import{j as e,r as S,a as Ss}from"./react-f83171f6.js";import{c as Wn}from"./react-dom-e9b5ed0c.js";import{L as Qt,u as lt,B as Hn}from"./react-router-dom-3db48442.js";import{r as Gn,a as Kn,s as Zn,G as Xn,f as R,$ as te,W as bs,T as X,b as Vt,L as ct,X as Ee,c as Jn,n as ea,g as yt,d as ta,e as sa,V as Zs,S as na,h as aa,y as ln,i as ze,j as Yt,U as V,H as ie,k as ra,l as st,m as Is,o as Me,p as cn,q as qe,D as Wt,O as Ht,A as ia,t as oa,u as be,v as Gt,w as la,x as vt,z as he,Y as Ge,B as ca,C as dn,_ as Kt,E as Ts,F as _s,I as da,J as Zt,Z as ws,K as ks,M as ua,N as ma,P as pa,Q as xa,R as un,a0 as ga,a1 as ha,a2 as ja,a3 as fa,a4 as ya,a5 as Xs,a6 as va,a7 as Ca,a8 as Sa,a9 as ba,aa as Ia,ab as Ta}from"./@refinedev-e19195c0.js";import{D as _a,az as Ft,aA as mn,aB as Ct,T as St,aC as pn,aD as xn,aE as Xt,aF as wa,aG as ge,E as Ne,C as As,aH as rt,aI as gn,aJ as bt,aK as Jt,aL as ka,aM as Ke,aN as hn,L as Aa,aO as Ea,R as jn,a as es,U as ft,B as Na,aP as Ie,aQ as Oa,j as fn,aR as js,aS as Lt,aT as Da,aU as Pa,aV as $a,aW as Ua,aX as fs,b as pe,aY as ts,aZ as Es,a_ as yn,I as Fa,c as It,a$ as Tt,d as Ns,b0 as vn,b1 as La,b2 as _t,b3 as za,b4 as Ma,b5 as Os,b6 as Cn,m as qa,b7 as cs,b8 as Ra,b9 as Ba,P as Sn,ba as bn,bb as Qa,bc as Va,bd as Ya,be as Wa,bf as In}from"./@ant-design-b3fb01a5.js";import{a as Ha}from"./axios-a342f982.js";import"./camelcase-a877ba3b.js";import"./gql-query-builder-55751dde.js";import"./pluralize-aac65ede.js";import{d as Ds}from"./lodash-ded28814.js";import{g as T}from"./graphql-tag-b0ed4b27.js";import{c as Ga}from"./graphql-ws-6dcf2f9d.js";import{a as Ka}from"./algoliasearch-fa1a6be7.js";import{d as A,u as Za,r as Xa,f as Ja,g as er}from"./dayjs-ccdc21e7.js";import{C as ss,T as W,l as Tn,e as B,a as C,m as N,A as tr,d as Ce,n as Ps,I as w,o as fe,f as Se,F as g,D as it,S as I,p as $,k as $s,L as ye,t as Oe,G as Ze,M as ys,g as Le,q as oe,s as E,u as J,v as wt,R as ee,h as F,c as _n,j as dt,w as sr,x as nr,y as Fe,z as Ue,b as ar}from"./antd-8dc53e1b.js";import{c as me}from"./classnames-25d76406.js";import{u as rr,a as ir,I as or}from"./react-instantsearch-core-78b5f298.js";import{u as kt,b as Te,f as lr,g as O,O as ue}from"./react-router-286b5268.js";import{u as Js,a as cr,D as dr,M as ur,T as mr,b as Us,c as pr,d as xr,e as gr}from"./@dnd-kit-915f3bb4.js";import"./@algolia-6bb98d1b.js";import"./@remix-run-8247d2bc.js";import"./sunflower-antd-b7c52e64.js";import"./tslib-133e1b7a.js";import"./react-markdown-ecaefd3d.js";import"./vfile-6404f5ee.js";import"./vfile-message-36a63b7e.js";import"./unist-util-stringify-position-c1d0da3a.js";import"./unified-a4a02247.js";import"./bail-6c55de42.js";import"./extend-b3232017.js";import"./trough-cd0b4d6d.js";import"./remark-parse-85ac6e81.js";import"./mdast-util-from-markdown-d6783c52.js";import"./micromark-7d81d632.js";import"./mdast-util-to-string-4033e385.js";import"./remark-rehype-9a2032e2.js";import"./mdast-util-to-hast-8e9d18d8.js";import"./mdurl-bfa3a10b.js";import"./unist-builder-069018de.js";import"./unist-util-visit-parents-a8973bb3.js";import"./unist-util-is-ed1fe220.js";import"./unist-util-generated-8c2ee601.js";import"./mdast-util-definitions-f967f126.js";import"./prop-types-30de2bcf.js";import"./property-information-0004ac0d.js";import"./xtend-2b056f5a.js";import"./react-is-8d9ddb1f.js";import"./space-separated-tokens-d6f14c6f.js";import"./comma-separated-tokens-a05230ef.js";import"./style-to-object-b28dc10f.js";import"./inline-style-parser-e2a37bce.js";import"./remark-gfm-e694efbd.js";import"./micromark-extension-gfm-39dd3ef5.js";import"./micromark-extension-gfm-autolink-literal-edb0f204.js";import"./micromark-extension-gfm-table-29daca91.js";import"./micromark-extension-gfm-task-list-item-d37fdbb4.js";import"./micromark-extension-gfm-strikethrough-dd4f2228.js";import"./mdast-util-gfm-4ff8096f.js";import"./mdast-util-gfm-autolink-literal-ea729c86.js";import"./mdast-util-find-and-replace-195d46af.js";import"./escape-string-regexp-348311e6.js";import"./mdast-util-gfm-strikethrough-bb347af8.js";import"./mdast-util-to-markdown-f2181906.js";import"./repeat-string-d22006ec.js";import"./mdast-util-gfm-table-86d8b2fd.js";import"./markdown-table-c51853ae.js";import"./mdast-util-gfm-task-list-item-bb68c4e9.js";import"./@tanstack-87345ecd.js";import"./use-sync-external-store-45a4f913.js";import"./error-stack-parser-8a325f08.js";import"./stackframe-d613cda2.js";import"./qs-533703aa.js";import"./side-channel-2b67a7a3.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-480ee363.js";import"./crypto-js-223de2bb.js";import"./lodash-es-7c8d70fb.js";import"./warn-once-02798694.js";import"./papaparse-42281dbe.js";import"./graphql-3565279e.js";import"./cross-fetch-e3cbbbc3.js";import"./rc-util-c5d9a97a.js";import"./@babel-1b4b41ae.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./swr-b4b4bea7.js";import"./@ctrl-fb5a5473.js";import"./rc-resize-observer-e44fcb90.js";import"./@emotion-c0b5c018.js";import"./stylis-5efc5547.js";import"./@antv-0cee95de.js";import"./detect-browser-4b5d6ec2.js";import"./gl-matrix-54a6b629.js";import"./d3-ease-e4d6dab1.js";import"./d3-interpolate-ca1e460c.js";import"./d3-color-6502c434.js";import"./d3-timer-4c6100d9.js";import"./fecha-59c3c944.js";import"./size-sensor-a627fda7.js";import"./d3-regression-45fb9454.js";import"./d3-hierarchy-187e1b2d.js";import"./fmin-0c78f753.js";import"./pdfast-a451494d.js";import"./react-content-loader-64a5b8dd.js";import"./rc-motion-d3441b18.js";import"./rc-notification-fe76982d.js";import"./rc-overflow-7a102792.js";import"./rc-picker-08f8db9f.js";import"./@rc-component-cd4aaefc.js";import"./rc-tabs-aa40fa60.js";import"./rc-dropdown-a7e16339.js";import"./rc-menu-479eb022.js";import"./rc-select-d6e555cc.js";import"./rc-virtual-list-75ccf576.js";import"./rc-input-number-47067811.js";import"./rc-input-813e1b90.js";import"./rc-collapse-80ac144a.js";import"./rc-drawer-4623e45d.js";import"./rc-field-form-628030e8.js";import"./async-validator-dee29e8b.js";import"./scroll-into-view-if-needed-582d6ca4.js";import"./compute-scroll-into-view-e3f0ecc2.js";import"./rc-image-a155e2e3.js";import"./rc-dialog-a5b29123.js";import"./rc-tooltip-fb4190ca.js";import"./rc-table-a60f2689.js";import"./rc-tree-c57a14ed.js";import"./rc-checkbox-5033fea8.js";import"./rc-pagination-9f434a85.js";import"./throttle-debounce-87e7e444.js";import"./copy-to-clipboard-3f887352.js";import"./toggle-selection-93f4ad84.js";import"./rc-textarea-ad67d466.js";import"./rc-upload-290ca40f.js";import"./rc-progress-6fd91520.js";import"./instantsearch.js-acc6351b.js";import"./algoliasearch-helper-1f51e904.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();const hr={token:{colorPrimaryText:"rgba(0, 0, 0, 0.85)",colorTextSecondary:"rgba(0, 0, 0, 0.65)",colorTextTertiary:"rgba(0, 0, 0, 0.45)",colorPrimary:"#A2121C",colorBgContainer:"#F7F8F9",colorBgLayout:"#F0F2F5",colorBorderBg:"#E8E9EA",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', 'Arial', 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'"},components:{Typography:{colorText:"rgba(0, 0, 0, 0.85)",colorTextDescription:"rgba(0, 0, 0, 0.65)",colorTextDisabled:"rgba(0, 0, 0, 0.45)"},Card:{colorBgContainer:"#FFFFFF",headerBg:"#FAFAFA",boxShadowTertiary:"0px 1px 2px 0px #00000008,0px 1px 6px -1px #000000050px,2px 4px 0px #00000005"},Table:{colorBgContainer:"#fff"},Input:{colorBgContainer:"#fff"},InputNumber:{colorBgContainer:"#fff"},Calendar:{colorBgContainer:"#FFFFFF"},Radio:{colorBgContainer:"#fff"},Select:{colorBgContainer:"#fff"}}},jr=[{name:"dashboard",list:"/",meta:{label:"Dashboard",icon:e.jsx(_a,{})}},{name:"events",list:"/calendar",create:"/calendar/create",edit:"/calendar/edit/:id",show:"/calendar/show/:id",meta:{label:"Calendar",icon:e.jsx(Ft,{})}},{name:"scrumboard",meta:{label:"Scrumboard",icon:e.jsx(mn,{})}},{name:"tasks",list:"/scrumboard/kanban",create:"/scrumboard/kanban/create",edit:"/scrumboard/kanban/edit/:id",meta:{label:"Project Kanban",parent:"scrumboard"}},{name:"taskStages",create:"/scrumboard/kanban/stages/create",edit:"/scrumboard/kanban/stages/edit/:id",list:"/scrumboard/kanban",meta:{hide:!0}},{name:"deals",list:"/scrumboard/sales",create:"/scrumboard/sales/create",edit:"/scrumboard/sales/edit/:id",meta:{label:"Sales Pipeline",parent:"scrumboard"}},{name:"deals",identifier:"finalize-deals",edit:"/scrumboard/sales/:id/finalize",meta:{hide:!0}},{name:"dealStages",create:"/scrumboard/sales/stages/create",edit:"/scrumboard/sales/stages/edit/:id",list:"/scrumboard/sales",meta:{hide:!0}},{name:"companies",list:"/companies",show:"/companies/:id",create:"/companies/create",edit:"/companies/edit/:id",meta:{label:"Companies",icon:e.jsx(Ct,{})}},{name:"companies",identifier:"sales-companies",create:"/scrumboard/sales/create/company/create",meta:{hide:!0}},{name:"contacts",list:"/contacts",create:"/contacts/create",edit:"/contacts/edit/:id",show:"/contacts/show/:id",meta:{label:"Contacts",icon:e.jsx(St,{})}},{name:"quotes",list:"/quotes",create:"/quotes/create",edit:"/quotes/edit/:id",show:"/quotes/show/:id",meta:{label:"Quotes",icon:e.jsx(pn,{})}},{name:"administration",meta:{label:"Administration",icon:e.jsx(xn,{})}},{name:"settings",list:"/administration/settings",meta:{label:"Settings",parent:"administration"}},{name:"audits",list:"/administration/audit-log",meta:{label:"Audit Log",parent:"administration"}}],fr=()=>{const[t,s]=S.useState(!0),n=S.useCallback(async()=>{const r=localStorage.getItem("auto_login")||Cs[0];try{await kn.login({email:r})}catch{}finally{s(!1)}},[t]);return S.useEffect(()=>{if(!(localStorage.getItem("auto_login")!=="false")){s(!1);return}n()},[]),{loading:t}},en=t=>{localStorage.setItem("auto_login",t)},yr=()=>{localStorage.setItem("auto_login","false")},vr=T`
    mutation refreshToken($refreshToken: String!) {
        refreshToken(refreshToken: $refreshToken) {
            accessToken
            refreshToken
        }
    }
`,Cr=t=>{var a;const s=(a=t==null?void 0:t.data)==null?void 0:a.errors;return!(!s||!localStorage.getItem("refresh_token")||!s.some(i=>{var o;return((o=i.extensions)==null?void 0:o.code)==="UNAUTHENTICATED"}))},Sr=async()=>{const t=localStorage.getItem("refresh_token");if(!t)return null;try{const s=await Gn("https://api.crm.refine.dev/graphql",vr,{refreshToken:t});return localStorage.setItem("access_token",s.refreshToken.accessToken),localStorage.setItem("refresh_token",s.refreshToken.refreshToken),s.refreshToken}catch{return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),null}},zt=Ha.create({headers:{"Content-Type":"application/json, text/plain, */*","Apollo-Require-Preflight":"true"}});zt.interceptors.request.use(async t=>{const s=localStorage.getItem("access_token");return s&&(t!=null&&t.headers)&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));zt.interceptors.response.use(async t=>{br(t);const s=t==null?void 0:t.data,n=s==null?void 0:s.errors,r=t.config;if(n){if(Cr(t)&&!(r!=null&&r._retry)){if(!await Sr())throw n;return r._retry=!0,zt(r)}throw vs(t,!1),n}return t},t=>(vs(t,!1),Promise.reject(t)));const br=t=>{t.headers.forEach=function(s){for(const n in this)Object.hasOwn(this,n)&&s(this[n],n,this)},t.text=async function(){return JSON.stringify(this.data)},vs(t,!0)},vs=(t,s)=>{t.ok=s},wn="https://api.crm.refine.dev",gt=`${wn}/graphql`,Ir="wss://api.crm.refine.dev/graphql",$t=new Xn(gt,{fetch:async(t,s)=>{var n,r,a;try{const i=await zt.request({data:s.body,url:t,...s});return{...i,data:i.data}}catch(i){const o=(n=i==null?void 0:i.map(l=>l==null?void 0:l.message))==null?void 0:n.join(""),u=(a=(r=i==null?void 0:i[0])==null?void 0:r.extensions)==null?void 0:a.code;return Promise.reject({message:o||JSON.stringify(i),statusCode:u||500})}}}),Tr=Ga({url:Ir,connectionParams:()=>({headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}})}),ht=Kn($t),_r=Zn(Tr),Cs=["michael.scott@dundermifflin.com","jim.halpert@dundermifflin.com","pam.beesly@dundermifflin.com","dwight.schrute@dundermifflin.com","angela.martin@dundermifflin.com","stanley.hudson@dundermifflin.com","phyllis.smith@dundermifflin.com","kevin.malone@dundermifflin.com","oscar.martinez@dundermifflin.com","creed.bratton@dundermifflin.com","meredith.palmer@dundermifflin.com","ryan.howard@dundermifflin.com","kelly.kapoor@dundermifflin.com","andy.bernard@dundermifflin.com","toby.flenderson@dundermifflin.com"],wr=Cs[Math.floor(Math.random()*Cs.length)],kr={email:wr,password:"demodemo"},kn={login:async({email:t,providerName:s,accessToken:n,refreshToken:r})=>{if(n&&r)return $t.setHeaders({Authorization:`Bearer ${n}`}),localStorage.setItem("access_token",n),localStorage.setItem("refresh_token",r),{success:!0,redirectTo:"/"};if(s)return window.location.href=`${wn}/auth/${s}`,{success:!0};try{const{data:a}=await ht.custom({url:gt,method:"post",headers:{},meta:{variables:{email:t},rawQuery:`
                mutation Login($email: String!) {
                    login(loginInput: {
                      email: $email
                    }) {
                      accessToken,
                      refreshToken
                    }
                  }
                `}});return $t.setHeaders({Authorization:`Bearer ${a.login.accessToken}`}),en(t),localStorage.setItem("access_token",a.login.accessToken),localStorage.setItem("refresh_token",a.login.refreshToken),{success:!0,redirectTo:"/"}}catch(a){return{success:!1,error:{message:"message"in a?a.message:"Login failed",name:"name"in a?a.name:"Invalid email or password"}}}},register:async({email:t,password:s})=>{try{return await ht.custom({url:gt,method:"post",headers:{},meta:{variables:{email:t,password:s},rawQuery:`
                mutation register($email: String!, $password: String!) {
                    register(registerInput: {
                      email: $email
                        password: $password
                    }) {
                        id
                        email
                    }
                  }
                `}}),en(t),{success:!0,redirectTo:`/login?email=${t}`}}catch(n){return{success:!1,error:{message:"message"in n?n.message:"Register failed",name:"name"in n?n.name:"Invalid email or password"}}}},logout:async()=>($t.setHeaders({Authorization:""}),yr(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),{success:!0,redirectTo:"/login/student"}),onError:async t=>(t==null?void 0:t.statusCode)==="UNAUTHENTICATED"?{logout:!0}:{error:t},check:async()=>{try{return await ht.custom({url:gt,method:"post",headers:{},meta:{rawQuery:`
                    query Me {
                        me {
                          name
                        }
                      }
                `}}),{authenticated:!0}}catch{return{authenticated:!1}}},forgotPassword:async()=>({success:!0,redirectTo:"/update-password"}),updatePassword:async()=>({success:!0,redirectTo:"/login/student"}),getIdentity:async()=>{try{const{data:t}=await ht.custom({url:gt,method:"post",headers:{},meta:{rawQuery:`
                    query Me {
                        me {
                            id,
                            name,
                            email,
                            phone,
                            jobTitle,
                            timezone
                            avatarUrl
                        }
                      }
                `}});return t.me}catch{return}}},An={}.VITE_ALGOLIA_APP_ID,En={}.VITE_ALGOLIA_API_KEY,Ar=An&&En,Mt=Ar?Ka(An,En):!1,Er="refine-crm",Nr={xs:{fontSize:12,lineHeight:20/12},sm:{fontSize:14,lineHeight:22/14},md:{fontSize:16,lineHeight:24/16},lg:{fontSize:20,lineHeight:28/20},xl:{fontSize:24,lineHeight:32/24},xxl:{fontSize:30,lineHeight:38/30},xxxl:{fontSize:38,lineHeight:46/38},huge:{fontSize:46,lineHeight:54/46},xhuge:{fontSize:56,lineHeight:64/56},xxhuge:{fontSize:68,lineHeight:76/68}},p=({size:t="sm",children:s,...n})=>e.jsx(ss,{theme:{token:{...Nr[t]}},children:e.jsx(W.Text,{...n,children:s})}),Or="_item_buqxa_1",Dr="_date_buqxa_6",Pr="_badge_buqxa_10",$r="_title_buqxa_14",jt={item:Or,date:Dr,badge:Pr,title:$r},Ur=({item:t})=>{const{show:s}=R(),{id:n,title:r,startDate:a,endDate:i,color:o}=t,u=A.utc(a).isSame(A.utc(),"day"),l=A.utc(a).isSame(A.utc().add(1,"day"),"day"),d=A.utc(a).startOf("day").isSame(a)&&A.utc(i).endOf("day").isSame(i),m=()=>u?"Today":l?"Tomorrow":A(a).format("MMM DD"),c=()=>d?"All day":`${A(a).format("HH:mm")} - ${A(i).format("HH:mm")}`;return e.jsxs("div",{onClick:()=>{s("events",t.id)},className:jt.item,children:[e.jsxs("div",{className:jt.date,children:[e.jsx(Tn,{color:o,className:jt.badge}),e.jsx(p,{size:"xs",children:`${m()}, ${c()}`})]}),e.jsx(p,{ellipsis:{tooltip:!0},strong:!0,className:jt.title,children:r})]},n)},Fr=T`
    query UpcomingEvents(
        $filter: EventFilter!
        $sorting: [EventSort!]
        $paging: OffsetPaging!
    ) {
        events(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                title
                color
                startDate
                endDate
            }
            totalCount
        }
    }
`,Lr=()=>e.jsx("span",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"220px"},children:"No Upcoming Event"}),zr=()=>e.jsx("div",{className:jt.item,children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",marginLeft:"24px",padding:"1px 0"},children:[e.jsx(N.Button,{active:!0,style:{height:"14px"}}),e.jsx(N.Button,{active:!0,style:{width:"90%",marginTop:"8px",height:"16px"}})]})}),Nn=({limit:t=5,cardProps:s,showGoToListButton:n})=>{const{list:r}=R(),{data:a,isLoading:i}=te({resource:"events",pagination:{pageSize:t},sorters:[{field:"startDate",order:"asc"}],filters:[{field:"startDate",operator:"gte",value:A().format("YYYY-MM-DD")}],meta:{gqlQuery:Fr}});return e.jsxs(B,{headStyle:{padding:"8px 16px"},bodyStyle:{padding:"0 1rem"},title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Ft,{}),e.jsx(p,{size:"sm",style:{marginLeft:".7rem"},children:"Upcoming events"})]}),extra:n&&e.jsx(C,{onClick:()=>r("events"),icon:e.jsx(Xt,{}),children:"See calendar"}),...s,children:[i&&Array.from({length:t}).map((o,u)=>e.jsx(zr,{},u)),!i&&(a==null?void 0:a.data.map(o=>e.jsx(Ur,{item:o},o.id))),!i&&(a==null?void 0:a.data.length)===0&&e.jsx(Lr,{})]})},K=(t,s)=>typeof Intl=="object"&&Intl&&typeof Intl.NumberFormat=="function"?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",...s}).format(t):t.toString(),On=t=>{const s=A(t.date),n=A();return s.isBefore(n)?"error":s.isBefore(n.add(3,"day"))?"warning":t.defaultColor??"default"},Dn=(t,s=2)=>t.split(" ").map(a=>a[0]).join("").replace(/[^a-zA-Z]/g,"").slice(0,s).toUpperCase(),Mr=t=>{const s=["#ff9c6e","#ff7875","#ffc069","#ffd666","#fadb14","#95de64","#5cdbd3","#69c0ff","#85a5ff","#b37feb","#ff85c0"];let n=0;for(let r=0;r<t.length;r++)n=t.charCodeAt(r)+((n<<5)-n),n=n&n;return n=(n%s.length+s.length)%s.length,s[n]},qr=({name:t="",style:s,...n})=>e.jsx(tr,{alt:t,size:"small",style:{backgroundColor:n!=null&&n.src?"transparent":Mr(t),display:"flex",alignItems:"center",border:"none",...s},...n,children:Dn(t)}),L=S.memo(qr,(t,s)=>t.name===s.name&&t.src===s.src),Fs=()=>e.jsx(Ce,{size:"large",style:{height:"100vh",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"}}),Rr=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:[e.jsx("path",{d:"M1.3125 2.25C1.26094 2.25 1.21875 2.29219 1.21875 2.34375V3C1.21875 3.05156 1.26094 3.09375 1.3125 3.09375H10.6875C10.7391 3.09375 10.7812 3.05156 10.7812 3V2.34375C10.7812 2.29219 10.7391 2.25 10.6875 2.25H1.3125Z",fill:"black",fillOpacity:"0.65"}),e.jsx("path",{d:"M1.3125 5.57812C1.26094 5.57812 1.21875 5.62031 1.21875 5.67188V6.32812C1.21875 6.37969 1.26094 6.42188 1.3125 6.42188H10.6875C10.7391 6.42188 10.7812 6.37969 10.7812 6.32812V5.67188C10.7812 5.62031 10.7391 5.57812 10.6875 5.57812H1.3125Z",fill:"black",fillOpacity:"0.65"}),e.jsx("path",{d:"M1.3125 8.90625C1.26094 8.90625 1.21875 8.94844 1.21875 9V9.65625C1.21875 9.70781 1.26094 9.75 1.3125 9.75H7.6875C7.73906 9.75 7.78125 9.70781 7.78125 9.65625V9C7.78125 8.94844 7.73906 8.90625 7.6875 8.90625H1.3125Z",fill:"black",fillOpacity:"0.65"})]}),Ls=t=>e.jsx(wa,{component:Rr,...t}),Br="_container_1jegq_1",Qr="_popover_1jegq_7",Vr="_input_1jegq_14",Yr="_inputPrefix_1jegq_21",Wr="_inputSuffix_1jegq_26",Hr="_list_1jegq_39",Gr="_listItem_1jegq_45",Kr="_title_1jegq_50",Ae={container:Br,popover:Qr,"ant-input-affix-wrapper":"_ant-input-affix-wrapper_1jegq_8","ant-input-affix-wrapper-lg":"_ant-input-affix-wrapper-lg_1jegq_9",input:Vr,inputPrefix:Yr,inputSuffix:Wr,list:Hr,listItem:Gr,title:Kr},Zr=()=>{const[t,s]=S.useState(!1),{query:n,refine:r}=rr(),[a,i]=S.useState(n),o=u=>{i(u),r(u)};return e.jsx("div",{className:Ae.container,children:e.jsx(Ps,{overlayClassName:Ae.popover,content:e.jsx(Xr,{onHitClick:()=>{s(!1),i("")}}),trigger:"click",open:!!a||t,onOpenChange:u=>{s(u)},children:e.jsx(w,{className:Ae.input,size:"large",prefix:e.jsx(ge,{className:me(Ae.inputPrefix,"secondary","tertiary")}),suffix:e.jsx("div",{className:Ae.inputSuffix,children:"/"}),placeholder:"Search",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,maxLength:512,type:"search",value:a,onChange:u=>{o(u.currentTarget.value)}})})})},Xr=({onHitClick:t})=>{const{showUrl:s,editUrl:n}=R(),{hits:r}=ir(),{select:a}=bs(),i=d=>"name"in d?d.name:"title"in d?d.title:"",o=d=>{if("description"in d)return d.description;if("jobTitle"in d)return d.jobTitle;if("email"in d)return d.email;if("industry"in d)return`${d.industry}`},u=d=>{var c;return((c=a(d).resource.meta)==null?void 0:c.label)??d},l=d=>["contacts","quotes","events","user"].includes(d.resource)?s(d.resource,d.id):["tasks","deals","companies"].includes(d.resource)?n(d.resource,d.id):"";return e.jsx(fe,{className:Ae.list,style:{width:"400px"},itemLayout:"horizontal",dataSource:r,renderItem:d=>e.jsx(Qt,{to:l(d),children:e.jsx(fe.Item,{className:Ae.listItem,onClick:t,children:e.jsx(fe.Item.Meta,{avatar:"avatarUrl"in d?e.jsx(L,{src:d.avatarUrl,shape:d.resource==="companies"?"square":"circle",children:d.name}):null,title:e.jsxs("div",{className:Ae.title,children:[e.jsx(W.Text,{className:"secondary",ellipsis:{tooltip:i(d)},children:i(d)}),e.jsx(Se,{className:Ae.tag,color:"default",children:u(d.resource)})]}),description:e.jsx(W.Paragraph,{style:{margin:0},className:"secondary",ellipsis:{rows:2},children:o(d)})})})})})};var $e=(t=>(t.CUSTOMER="CUSTOMER",t.LEAD="LEAD",t.SALES_QUALIFIED_LEAD="SALES_QUALIFIED_LEAD",t))($e||{}),U=(t=>(t.NEW="NEW",t.CONTACTED="CONTACTED",t.INTERESTED="INTERESTED",t.UNQUALIFIED="UNQUALIFIED",t.QUALIFIED="QUALIFIED",t.NEGOTIATION="NEGOTIATION",t.LOST="LOST",t.WON="WON",t.CHURNED="CHURNED",t))(U||{}),Ye=(t=>(t["UTC (Coordinated Universal Time)"]="UTC (Coordinated Universal Time)",t["GMT (Greenwich Mean Time)"]="GMT (Greenwich Mean Time)",t["EST (Eastern Standard Time)"]="EST (Eastern Standard Time)",t["CST (Central Standard Time)"]="CST (Central Standard Time)",t["MST (Mountain Standard Time)"]="MST (Mountain Standard Time)",t["PST (Pacific Standard Time)"]="PST (Pacific Standard Time)",t["CET (Central European Time)"]="CET (Central European Time)",t["IST (Indian Standard Time)"]="IST (Indian Standard Time)",t["JST (Japan Standard Time)"]="JST (Japan Standard Time)",t["AEST (Australian Eastern Standard Time)"]="AEST (Australian Eastern Standard Time)",t))(Ye||{});const Jr="_container_khzzg_1",ei="_icon_khzzg_10",ti="_content_khzzg_15",si="_input_khzzg_21",ni="_formItem_khzzg_25",ai="_skeleton_khzzg_29",ri="_label_khzzg_34",ii="_buttons_khzzg_39",oi="_actions_khzzg_46",ke={container:Jr,icon:ei,content:ti,input:si,formItem:ni,skeleton:ai,label:ri,buttons:ii,actions:oi},ce=({state:t="view",view:s,icon:n,itemProps:r,onClick:a,onUpdate:i,onCancel:o,loading:u,children:l,style:d,extra:m,useFormProps:c,formProps:x})=>{const{formProps:h,saveButtonProps:j}=X({action:"edit",redirect:!1,autoSave:{enabled:!1},queryOptions:{enabled:!1},onMutationSuccess(){i==null||i()},mutationMode:"optimistic",...c});return e.jsx(g,{layout:"vertical",...h,...x,children:e.jsxs("div",{className:ke.container,style:d,children:[e.jsx("div",{className:ke.icon,children:n}),e.jsxs("div",{className:ke.content,children:[e.jsxs("div",{className:ke.input,children:[e.jsx(p,{size:"sm",type:"secondary",className:ke.label,children:r==null?void 0:r.label}),u&&e.jsx(N.Input,{className:ke.skeleton,size:"small",active:!0}),t==="form"&&!u&&e.jsxs("div",{className:ke.formItem,children:[e.jsx(g.Item,{...r,noStyle:!0,children:l}),m]}),t==="empty"&&!u&&e.jsxs(C,{onClick:a,type:"link",size:"small",style:{padding:0},children:["Add ",r==null?void 0:r.label]}),t==="view"&&s]}),t==="form"&&e.jsxs("div",{className:ke.buttons,children:[e.jsx(C,{onClick:()=>o==null?void 0:o(),children:"Cancel"}),e.jsx(C,{type:"primary",...j,children:"Save"})]})]}),t==="view"&&e.jsx("div",{className:ke.actions,children:e.jsx(C,{onClick:a,icon:e.jsx(Ne,{})})})]})})},li="_header_9vc36_1",ci="_container_9vc36_9",di="_title_9vc36_15",ui="_titleEditIcon_9vc36_19",mi="_name_9vc36_33",pi="_form_9vc36_40",mt={header:li,container:ci,title:di,titleEditIcon:ui,name:mi,form:pi},xi=T`
    query AccountSettingsGetUser($id: ID!) {
        user(id: $id) {
            id
            name
            email
            avatarUrl
            jobTitle
            phone
            timezone
        }
    }
`,pt=T`
    mutation AccountSettingsUpdateUser($input: UpdateOneUserInput!) {
        updateOneUser(input: $input) {
            id
            name
            email
            avatarUrl
            jobTitle
            phone
            timezone
        }
    }
`,gi=Object.keys(Ye).map(t=>({label:Ye[t],value:Ye[t]})),hi=({opened:t,setOpened:s,userId:n})=>{const[r,a]=S.useState(),{data:i,isLoading:o,isError:u}=Vt({resource:"users",id:n,queryOptions:{enabled:t},meta:{gqlQuery:xi}}),{mutate:l}=ct(),d=()=>{s(!1)};if(u)return d(),null;if(o)return e.jsx(it,{open:t,width:756,bodyStyle:{background:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ce,{})});const{id:m,name:c,email:x,jobTitle:h,phone:j,timezone:f,avatarUrl:y}=(i==null?void 0:i.data)??{},_=D=>r===D?"form":i!=null&&i.data[D]?"view":"empty";return e.jsxs(it,{onClose:d,open:t,width:756,styles:{body:{background:"#f5f5f5",padding:0},header:{display:"none"}},children:[e.jsxs("div",{className:mt.header,children:[e.jsx(p,{strong:!0,children:"Account Settings"}),e.jsx(C,{type:"text",icon:e.jsx(As,{}),onClick:()=>d()})]}),e.jsxs("div",{className:mt.container,children:[e.jsxs("div",{className:mt.name,children:[e.jsx(L,{style:{marginRight:"1rem",flexShrink:0,fontSize:"40px"},size:96,src:y,name:c}),e.jsx(W.Title,{level:3,style:{padding:0,margin:0,width:"100%"},className:mt.title,editable:{onChange(D){l({resource:"users",id:m,values:{name:D},mutationMode:"optimistic",successNotification:!1,meta:{gqlMutation:pt}})},triggerType:["text","icon"],icon:e.jsx(Ne,{className:mt.titleEditIcon})},children:c})]}),e.jsxs(B,{title:e.jsxs(I,{size:15,children:[e.jsx(rt,{}),e.jsx(p,{size:"sm",children:"User profile"})]}),headStyle:{padding:"0 12px"},bodyStyle:{padding:"0"},children:[e.jsx(ce,{useFormProps:{id:m,resource:"users",meta:{gqlMutation:pt}},formProps:{initialValues:{jobTitle:h}},icon:e.jsx(gn,{className:"tertiary"}),state:_("jobTitle"),itemProps:{name:"jobTitle",label:"Title"},view:e.jsx(p,{children:h}),onClick:()=>a("jobTitle"),onUpdate:()=>a(void 0),onCancel:()=>a(void 0),children:e.jsx(w,{})}),e.jsx(ce,{useFormProps:{id:m,resource:"users",meta:{gqlMutation:pt}},formProps:{initialValues:{phone:j}},icon:e.jsx(bt,{className:"tertiary"}),state:_("phone"),itemProps:{name:"phone",label:"Phone"},view:e.jsx(p,{children:j}),onClick:()=>a("phone"),onUpdate:()=>a(void 0),onCancel:()=>a(void 0),children:e.jsx(w,{})}),e.jsx(ce,{useFormProps:{id:m,resource:"users",meta:{gqlMutation:pt}},formProps:{initialValues:{timezone:f}},style:{borderBottom:"none"},icon:e.jsx(Jt,{className:"tertiary"}),state:_("timezone"),itemProps:{name:"timezone",label:"TimezoneEnum"},view:e.jsx(p,{children:f}),onClick:()=>a("timezone"),onUpdate:()=>a(void 0),onCancel:()=>a(void 0),children:e.jsx($,{style:{width:"100%"},options:gi})})]}),e.jsx(B,{title:e.jsxs(I,{size:15,children:[e.jsx(ka,{}),e.jsx(p,{size:"sm",children:"Security"})]}),headStyle:{padding:"0 12px"},bodyStyle:{padding:"0"},children:e.jsx(ce,{useFormProps:{id:m,resource:"users",meta:{gqlMutation:pt}},formProps:{initialValues:{email:x}},icon:e.jsx(Ke,{className:"tertiary"}),state:_("email"),itemProps:{name:"email",label:"Email"},view:e.jsx(p,{children:x}),onClick:()=>a("email"),onUpdate:()=>a(void 0),onCancel:()=>a(void 0),children:e.jsx(w,{})})})]})]})},ji=()=>{const[t,s]=S.useState(!1),{data:n}=Ee(),{mutate:r}=Jn(),a=e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx(p,{strong:!0,style:{padding:"12px 20px"},children:n==null?void 0:n.name}),e.jsxs("div",{style:{borderTop:"1px solid #d9d9d9",padding:"4px",display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx(C,{style:{textAlign:"left"},icon:e.jsx(hn,{}),type:"text",block:!0,onClick:()=>s(!0),children:"Account settings"}),e.jsx(C,{style:{textAlign:"left"},icon:e.jsx(Aa,{}),type:"text",danger:!0,block:!0,onClick:()=>r(),children:"Logout"})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(Ps,{placement:"bottomRight",content:a,trigger:"click",overlayInnerStyle:{padding:0},overlayStyle:{zIndex:999},children:e.jsx(L,{name:n==null?void 0:n.name,src:n==null?void 0:n.avatarUrl,size:"default",style:{cursor:"pointer"}})}),n&&e.jsx(hi,{opened:t,setOpened:s,userId:n.id})]})},fi=({audit:t,deal:s})=>{var n,r,a,i;return s?t.action==="UPDATE"?e.jsxs(p,{children:[e.jsx(p,{strong:!0,children:(n=t.user)==null?void 0:n.name})," moved ",e.jsx(p,{strong:!0,children:s.title})," deal to ",e.jsx(p,{strong:!0,children:((r=s.stage)==null?void 0:r.title)||"Unassigned"}),"."]}):t.action==="CREATE"?e.jsxs(p,{children:[e.jsx(p,{strong:!0,children:(a=t.user)==null?void 0:a.name})," created ",e.jsx(p,{strong:!0,children:s.title})," deal in ",e.jsx(p,{strong:!0,children:((i=s.stage)==null?void 0:i.title)||"Unassigned"}),"."]}):e.jsx(p,{children:"Unknown action"}):e.jsx(p,{children:"Loading..."})},yi=T`
    query Notifications(
        $paging: OffsetPaging!
        $filter: AuditFilter!
        $sorting: [AuditSort!]
    ) {
        audits(paging: $paging, filter: $filter, sorting: $sorting) {
            nodes {
                id
                action
                targetEntity
                targetId
                createdAt
                user {
                    id
                    name
                    avatarUrl
                }
            }
            totalCount
        }
    }
`,vi=T`
    query NotificationsDeals($filter: DealFilter!) {
        deals(filter: $filter) {
            nodes {
                id
                title
                stage {
                    id
                    title
                }
                company {
                    id
                    name
                    avatarUrl
                }
            }
        }
    }
`,Ci=()=>{var d,m;const[t,s]=S.useState(!1),{data:n,isLoading:r}=te({resource:"audits",pagination:{pageSize:5},sorters:[{field:"createdAt",order:"desc"}],filters:[{field:"action",operator:"in",value:["CREATE","UPDATE"]},{field:"targetEntity",operator:"eq",value:"Deal"}],meta:{gqlQuery:yi},queryOptions:{enabled:t}}),a=(d=n==null?void 0:n.data)==null?void 0:d.map(c=>c.targetId),{data:i}=ea({resource:"deals",ids:a??[],meta:{gqlQuery:vi},queryOptions:{enabled:!!(a!=null&&a.length)}}),o=c=>{var x;return(x=i==null?void 0:i.data)==null?void 0:x.find(h=>h.id===c)},u=e.jsx(I,{direction:"vertical",split:e.jsx($s,{style:{margin:0}}),children:(m=n==null?void 0:n.data)==null?void 0:m.map(c=>{var x,h,j,f;return e.jsxs(I,{children:[e.jsx(L,{size:48,shape:"square",src:(h=(x=o(c.targetId))==null?void 0:x.company)==null?void 0:h.avatarUrl,name:(f=(j=o(c.targetId))==null?void 0:j.company)==null?void 0:f.name}),e.jsxs(I,{direction:"vertical",size:0,children:[e.jsx(fi,{audit:c,deal:o(c.targetId)}),e.jsx(p,{size:"xs",type:"secondary",children:A(c==null?void 0:c.createdAt).fromNow()})]})]},c.id)})}),l=e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:20},children:e.jsx(Ce,{})});return e.jsx(Ps,{placement:"bottomRight",content:r?l:u,trigger:"click",onOpenChange:c=>s(c),overlayStyle:{width:400},children:e.jsx(Tn,{dot:!0,children:e.jsx(C,{shape:"circle",icon:e.jsx(Ea,{}),style:{border:0}})})})},{useToken:Si}=Oe,bi=()=>{const{token:t}=Si(),s={backgroundColor:t.colorBgElevated,display:"flex",justifyContent:Mt?"space-between":"flex-end",alignItems:"center",padding:"0px 24px",height:"64px",position:"sticky",top:0,zIndex:999};return e.jsxs(ye.Header,{style:s,children:[Mt?e.jsx(Zr,{}):null,e.jsxs(I,{align:"center",size:"middle",children:[e.jsx(Ci,{}),e.jsx(ji,{})]})]})},Ii="/assets/knust-mobile-4570a1aa.svg",Ti="/assets/title-de8da79f.svg",{useToken:_i}=Oe,ot=({collapsed:t,wrapperStyles:s})=>{const{token:n}=_i(),r=yt();return e.jsx(r,{to:"/login/student",style:{display:"inline-block",textDecoration:"none"},children:e.jsxs(I,{style:{display:"flex",alignItems:"center",fontSize:"inherit",...s},children:[e.jsx("div",{style:{height:"24px",width:"24px",color:n.colorPrimary,marginBottom:"16px",marginRight:"5px"},children:e.jsx("img",{src:Ii,alt:"logo",height:40})}),!t&&e.jsx(W.Title,{style:{fontSize:"inherit",marginBottom:0},children:e.jsx("img",{src:Ti,alt:"logo",height:45})})]})})},wi={borderTopLeftRadius:0,borderBottomLeftRadius:0,position:"fixed",top:64,zIndex:1001},{SubMenu:ki}=ys,{useToken:Ai}=Oe,Ei=()=>{const{token:t}=Ai(),{siderCollapsed:s,setSiderCollapsed:n,mobileSiderOpen:r,setMobileSiderOpen:a}=ta(),i=yt(),{menuItems:o,selectedKey:u,defaultOpenKeys:l}=sa(),d=Ze.useBreakpoint(),m=typeof d.lg>"u"?!1:!d.lg,c=(_,D)=>_.map(M=>{const{icon:G,label:Y,route:z,key:b,name:k,children:P,parentName:q,meta:Z,options:H}=M;if(P.length>0)return e.jsx(Zs,{resource:k.toLowerCase(),action:"list",params:{resource:M},children:e.jsx(ki,{icon:G??e.jsx(ft,{}),title:Y,children:c(P,D)},M.key)},M.key);const re=b===D,le=!(na(Z==null?void 0:Z.parent,H==null?void 0:H.parent,q)!==void 0&&P.length===0);return e.jsx(Zs,{resource:k.toLowerCase(),action:"list",params:{resource:M},children:e.jsxs(ys.Item,{icon:G??(le&&e.jsx(ft,{})),children:[e.jsx(i,{to:z??"",children:Y}),!s&&re&&e.jsx("div",{className:"ant-menu-tree-arrow"})]},M.key)},M.key)}),x=c(o,u),h=()=>e.jsx(e.Fragment,{children:x}),j=()=>e.jsx(ys,{selectedKeys:u?[u]:[],defaultOpenKeys:l,mode:"inline",style:{paddingTop:"8px",border:"none",overflow:"auto",height:"calc(100% - 72px)",background:"transparent"},onClick:()=>{a(!1)},children:h()}),f=()=>e.jsxs(e.Fragment,{children:[e.jsx(it,{open:r,onClose:()=>a(!1),placement:"left",closable:!1,width:256,bodyStyle:{padding:0},maskClosable:!0,children:e.jsx(ye,{children:e.jsxs(ye.Sider,{width:500,style:{height:"100vh",backgroundColor:t.colorBgContainer,borderRight:`1px solid ${t.colorBorderBg}`},children:[e.jsx("div",{style:{width:"256px",padding:"0 16px",display:"flex",justifyContent:"flex-start",alignItems:"center",height:"64px",backgroundColor:t.colorBgElevated,borderBottom:"none"},children:e.jsx(ot,{collapsed:!1})}),j()]})})}),e.jsx(C,{style:wi,size:"large",onClick:()=>a(!0),icon:e.jsx(Na,{})})]});if(m)return f();const y={backgroundColor:t.colorBgContainer,borderRight:`1px solid ${t.colorBorderBg}`,position:"sticky",top:0,left:0,height:"100vh",zIndex:999};return e.jsx(e.Fragment,{children:e.jsxs(ye.Sider,{style:y,width:256,collapsible:!0,collapsed:s,onCollapse:(_,D)=>{D==="clickTrigger"&&n(_)},collapsedWidth:80,breakpoint:"lg",trigger:e.jsx(C,{type:"text",style:{borderRadius:0,height:"100%",width:"100%",backgroundColor:t.colorBgElevated,borderRight:`1px solid ${t.colorBorderBg}`},children:s?e.jsx(jn,{style:{color:t.colorPrimary}}):e.jsx(es,{style:{color:t.colorPrimary}})}),children:[e.jsx("div",{style:{width:s?"80px":"256px",padding:s?"0":"0 16px",display:"flex",justifyContent:s?"center":"flex-start",alignItems:"center",height:"64px",backgroundColor:t.colorBgElevated,fontSize:"14px"},children:e.jsx(ot,{collapsed:s})}),j()]})})},Ni=({children:t})=>{const s=Ze.useBreakpoint(),n=typeof s.sm>"u"?!0:s.sm;return e.jsx(aa,{children:e.jsxs(ye,{hasSider:!0,style:{minHeight:"100vh"},children:[e.jsx(Ei,{}),e.jsxs(ye,{children:[e.jsx(bi,{}),e.jsx(ye.Content,{style:{padding:n?32:16},children:t})]})]})})},Oi=({children:t})=>Mt?e.jsx(or,{searchClient:Mt,indexName:Er,children:t}):e.jsx(e.Fragment,{children:t}),Di="/assets/ams_logo-5d3c1cfb.svg",Pi=t=>e.jsx("img",{src:Di,alt:"logo"}),zs=({buttonText:t,toPath:s})=>{const n=ln(),{pathname:r}=kt(),{createUrl:a}=R(),i=Ze.useBreakpoint();return e.jsx(C,{type:"primary",icon:e.jsx(Ie,{}),onClick:()=>n({to:`${a(s)}`,query:{to:r},options:{keepQuery:!0},type:"replace"}),size:i.xs?"middle":"large",style:{marginTop:i.xs?"1.6rem":"0.3rem"},children:e.jsx(p,{style:{color:"#fff",fontSize:"16px",fontWeight:400},children:i.xs?null:t})})},ut=({total:t,entityName:s})=>e.jsxs("span",{style:{marginLeft:"16px"},children:[e.jsx("span",{className:"ant-text secondary",children:t})," ",s," in total"]}),Ms=({userOne:t,userTwo:s})=>e.jsxs(I,{size:4,style:{textTransform:"uppercase"},children:[e.jsx(Le,{title:t.name,children:e.jsx(L,{size:"small",src:t.avatarUrl,name:t.name})}),e.jsx(Ie,{className:"xs tertiary"}),e.jsx(Le,{title:s.name,children:e.jsx(L,{size:"small",src:s.avatarUrl,name:s.name})})]}),ve=({avatarUrl:t,name:s,shape:n})=>e.jsxs(I,{children:[e.jsx(L,{shape:n,name:s,src:t}),e.jsx(p,{children:s})]}),qs=({status:t})=>{let s=null,n;switch(t){case"NEW":case"CONTACTED":case"INTERESTED":s=e.jsx(Lt,{}),n="cyan";break;case"UNQUALIFIED":s=e.jsx(Lt,{}),n="red";break;case"QUALIFIED":case"NEGOTIATION":s=e.jsx(js,{}),n="green";break;case"LOST":s=e.jsx(js,{}),n="red";break;case"WON":s=e.jsx(fn,{}),n="green";break;case"CHURNED":s=e.jsx(Oa,{}),n="red";break}return e.jsxs(Se,{color:n,style:{textTransform:"capitalize"},children:[s," ",t.toLowerCase()]})},tn={DRAFT:{color:"blue",icon:e.jsx(Da,{})},SENT:{color:"cyan",icon:e.jsx(Pa,{})},ACCEPTED:{color:"green",icon:e.jsx(fn,{})}},Pn=({status:t})=>e.jsx(Se,{style:{textTransform:"capitalize"},color:tn[t].color,icon:tn[t].icon,children:t.toLowerCase()}),$n=({user:t})=>e.jsx(Se,{style:{padding:2,paddingRight:8,borderRadius:24,lineHeight:"unset",marginRight:"unset"},children:e.jsxs(I,{size:4,children:[e.jsx(L,{src:t.avatarUrl,name:t.name,style:{display:"inline-flex"}}),t.name]})},t.id),$i=({record:t})=>{const[s,n]=S.useState(!1),r=[{title:"Field",dataIndex:"field",key:"field",render:a=>e.jsx(p,{strong:!0,children:a}),width:"20%"},{title:"New value",dataIndex:"to",key:"to"}];return t.action==="UPDATE"&&r.push({title:"Old value",dataIndex:"from",key:"from"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsx(C,{size:"small",icon:e.jsx($a,{}),onClick:()=>n(a=>!a),children:"Details"})}),s&&e.jsx(oe,{open:s,onOk:()=>n(!1),onCancel:()=>n(!1),style:{minWidth:"60vw"},bodyStyle:{maxHeight:"500px",overflow:"auto"},children:e.jsx(E,{dataSource:t.changes,pagination:!1,rowKey:"field",bordered:!0,size:"small",scroll:{x:!0},columns:r})})]})},Ui=({role:t})=>{const s={ADMIN:{color:"red",icon:e.jsx(xn,{})},SALES_INTERN:{color:"blue",icon:e.jsx(rt,{})},SALES_PERSON:{color:"geekblue",icon:e.jsx(rt,{})},SALES_MANAGER:{color:"cyan",icon:e.jsx(Ua,{})}},n=t.replace("_"," ").toLowerCase();return e.jsx(Se,{style:{textTransform:"capitalize"},color:s[t].color,icon:s[t].icon,children:n})},Fi=T`
    query AdministrationUsers(
        $filter: UserFilter!
        $sorting: [UserSort!]
        $paging: OffsetPaging!
    ) {
        users(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                name

                jobTitle
                role
                avatarUrl
            }
            totalCount
        }
    }
`,Li=T`
    query AdministrationAuditLogs(
        $filter: AuditFilter!
        $sorting: [AuditSort!]
        $paging: OffsetPaging!
    ) {
        audits(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                user {
                    id
                    name
                    avatarUrl
                }
                action
                targetEntity
                targetId
                changes {
                    field
                    from
                    to
                }
                createdAt
            }
            totalCount
        }
    }
`,zi=t=>{switch(t){case"CREATE":return"green";case"UPDATE":return"cyan";case"DELETE":return"red";default:return"default"}},Mi=()=>{const{tableProps:t,filters:s,sorters:n}=ze({meta:{gqlQuery:Li},filters:{initial:[{field:"user.name",value:"",operator:"contains"},{field:"createdAt",value:[],operator:"between"}]},sorters:{initial:[{field:"createdAt",order:"desc"}]}});return e.jsx("div",{className:"page-container",children:e.jsx(Yt,{breadcrumb:!1,contentProps:{style:{marginTop:"1.6rem"}},title:e.jsx(p,{style:{fontWeight:"500",fontSize:"24px",lineHeight:"24px"},children:"Audit Log"}),children:e.jsxs(E,{className:"audit-log-table",...t,rowKey:"id",scroll:{x:!0},pagination:{...t.pagination,showTotal:r=>e.jsx(ut,{total:r,entityName:"audit logs"})},children:[e.jsx(E.Column,{dataIndex:"user.name",title:"User",width:"15%",filterIcon:e.jsx(ge,{}),render:(r,a)=>{var i,o,u;return e.jsxs(I,{children:[e.jsx(L,{src:(i=a.user)==null?void 0:i.avatarUrl,name:(o=a.user)==null?void 0:o.name}),((u=a.user)==null?void 0:u.name)||"N/A"]})},filterDropdown:r=>e.jsx(V,{...r,children:e.jsx(w,{})}),defaultFilteredValue:ie("user.name",s,"contains")}),e.jsx(E.Column,{dataIndex:"action",title:"Action",render:(r,a)=>e.jsx(I,{children:e.jsx(Se,{color:zi(a.action),children:a.action.charAt(0)+a.action.slice(1).toLowerCase()})}),filterDropdown:r=>e.jsx(V,{...r,children:e.jsxs(J.Group,{children:[e.jsx(J,{value:"CREATE",children:"Created"}),e.jsx(J,{value:"UPDATE",children:"Updated"}),e.jsx(J,{value:"DELETE",children:"Deleted"})]})}),defaultFilteredValue:ie("action",s,"eq")}),e.jsx(E.Column,{dataIndex:"targetEntity",title:"Entity"}),e.jsx(E.Column,{dataIndex:"targetId",title:"Entity ID"}),e.jsx(E.Column,{dataIndex:"changes",title:"Changes",render:(r,a)=>e.jsx($i,{record:a})}),e.jsx(E.Column,{dataIndex:"createdAt",title:"Date & Time",width:"15%",render:r=>e.jsx(ra,{style:{verticalAlign:"middle"},value:r,format:"MM.DD.YYYY - hh:mm"}),filterDropdown:r=>e.jsx(V,{...r,children:e.jsx(wt.RangePicker,{})}),sorter:!0,defaultFilteredValue:ie("createdAt",s,"between"),defaultSortOrder:st("createdAt",n)})]})})})},qi="_list_1i6lc_1",Ri="_listItem_1i6lc_6",Bi="_listItemContent_1i6lc_18",Dt={list:qi,listItem:Ri,listItemContent:Bi},Qi=()=>e.jsxs("div",{className:"page-container",children:[e.jsx(I,{size:16,style:{width:"100%",paddingBottom:"24px",borderBottom:"1px solid #D9D9D9"},children:e.jsx(Pi,{width:96,height:96})}),e.jsxs(ee,{gutter:[32,32],style:{marginTop:32},children:[e.jsx(F,{xs:{span:24},md:{span:24},lg:{span:24},xl:{span:16},children:e.jsx(Yi,{})}),e.jsx(F,{xs:{span:24},md:{span:24},lg:{span:24},xl:{span:8},children:e.jsx(Hi,{})})]})]}),Vi=[{label:"Admin",value:"ADMIN"},{label:"Sales Intern",value:"SALES_INTERN"},{label:"Sales Person",value:"SALES_PERSON"},{label:"Sales Manager",value:"SALES_MANAGER"}],Yi=()=>{var n;const{tableProps:t,filters:s}=ze({resource:"users",sorters:{initial:[{field:"createdAt",order:"desc"}]},filters:{initial:[{field:"jobTitle",value:"",operator:"contains"},{field:"name",value:"",operator:"contains"},{field:"status",value:void 0,operator:"in"}]},meta:{gqlQuery:Fi}});return e.jsx(B,{bodyStyle:{padding:0},headStyle:{borderBottom:"1px solid #D9D9D9",marginBottom:"1px"},title:e.jsxs(I,{size:"middle",children:[e.jsx(St,{}),e.jsx(p,{children:"Contacts"})]}),extra:e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"tertiary",children:"Total users: "}),e.jsx(p,{strong:!0,children:(t==null?void 0:t.pagination)!==!1&&((n=t.pagination)==null?void 0:n.total)})]}),children:e.jsxs(E,{...t,children:[e.jsx(E.Column,{dataIndex:"name",title:"Name",defaultFilteredValue:ie("name",s,"contains"),filterIcon:e.jsx(ge,{}),filterDropdown:r=>e.jsx(V,{...r,children:e.jsx(w,{placeholder:"Search Name"})}),render:(r,a)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(L,{src:a.avatarUrl,name:a.name}),e.jsx(p,{children:a.name})]})}),e.jsx(E.Column,{dataIndex:"jobTitle",title:"Title",defaultFilteredValue:ie("jobTitle",s,"contains"),filterIcon:e.jsx(ge,{}),filterDropdown:r=>e.jsx(V,{...r,children:e.jsx(w,{placeholder:"Search title"})})}),e.jsx(E.Column,{dataIndex:"role",title:"Role",defaultFilteredValue:ie("role",s,"in"),filterDropdown:r=>e.jsx(V,{...r,children:e.jsx($,{style:{width:"200px"},mode:"multiple",placeholder:"Select Stage",options:Vi})}),render:(r,a)=>e.jsx(Ui,{role:a.role})})]})})},Wi=[{label:"Address",value:"2158 Mount Tabor, Westbury, New York, USA 11590",icon:e.jsx(fs,{className:"tertiary"})},{label:"Phone",value:"+123 456 789 01 23",icon:e.jsx(bt,{className:"tertiary"})},{label:"Email",value:"info@globexcorp.com",icon:e.jsx(Ke,{className:"tertiary"})},{label:"Website",value:"https://globexcorp.com",icon:e.jsx(Jt,{className:"tertiary"})}],Hi=()=>e.jsx(B,{title:e.jsxs(I,{children:[e.jsx(Ct,{}),e.jsx(p,{children:"Company info"})]}),headStyle:{padding:"1rem"},bodyStyle:{padding:"0"},children:e.jsx("div",{className:Dt.list,children:Wi.map(t=>e.jsxs("div",{className:Dt.listItem,children:[e.jsx("div",{children:t.icon}),e.jsxs("div",{className:Dt.listItemContent,children:[e.jsx(p,{size:"xs",className:"tertiary",children:t.label}),e.jsx(p,{className:me(Dt.listItemContent,"primary"),children:t.value})]})]},t.label))})}),Gi="modulepreload",Ki=function(t){return"/"+t},sn={},De=function(s,n,r){if(!n||n.length===0)return s();const a=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=Ki(i),i in sn)return;sn[i]=!0;const o=i.endsWith(".css"),u=o?'[rel="stylesheet"]':"";if(!!r)for(let m=a.length-1;m>=0;m--){const c=a[m];if(c.href===i&&(!o||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${u}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":Gi,o||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),o)return new Promise((m,c)=>{d.addEventListener("load",m),d.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>s()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Zi="_calendar_header_2mgdk_1",Xi="_actions_2mgdk_13",Ji="_title_2mgdk_18",ds={calendar_header:Zi,actions:Xi,title:Ji},eo=T`
    query CalendarEvents(
        $filter: EventFilter!
        $sorting: [EventSort!]
        $paging: OffsetPaging!
    ) {
        events(filter: $filter, sorting: $sorting, paging: $paging) {
            totalCount
            nodes {
                id
                title
                description
                startDate
                endDate
                color
                createdAt
                createdBy {
                    id
                    name
                }
                category {
                    id
                    title
                }
            }
        }
    }
`,to=S.lazy(()=>De(()=>import("./full-calendar-84c7f994.js"),["assets/full-calendar-84c7f994.js","assets/react-f83171f6.js","assets/@algolia-6bb98d1b.js","assets/@fullcalendar-57d69b32.js","assets/preact-30b9eaac.js","assets/react-dom-e9b5ed0c.js"])),so=({categoryId:t,onClickEvent:s})=>{var m;const[n,r]=S.useState("dayGridMonth"),a=S.useRef(null),[i,o]=S.useState((m=a.current)==null?void 0:m.getApi().view.title),{md:u}=Ze.useBreakpoint();S.useEffect(()=>{var c;(c=a.current)==null||c.getApi().changeView(n)},[n]),S.useEffect(()=>{r(u?"dayGridMonth":"listMonth")},[u]);const{data:l}=te({pagination:{mode:"off"},filters:[{field:"category.id",operator:"in",value:t!=null&&t.length?t:void 0}],meta:{gqlQuery:eo}}),d=((l==null?void 0:l.data)??[]).map(({id:c,title:x,startDate:h,endDate:j,color:f})=>({id:c,title:x,start:h,end:j,color:f,allDay:A(j).utc().diff(A(h).utc(),"hours")>=23}));return e.jsxs(B,{children:[e.jsxs("div",{className:ds.calendar_header,children:[e.jsxs("div",{className:ds.actions,children:[e.jsx(C,{onClick:()=>{var c;(c=a.current)==null||c.getApi().prev()},shape:"circle",icon:e.jsx(es,{})}),e.jsx(C,{onClick:()=>{var c;(c=a.current)==null||c.getApi().next()},shape:"circle",icon:e.jsx(jn,{})}),e.jsx(p,{className:ds.title,size:"lg",children:i})]}),e.jsxs(J.Group,{value:n,children:[[{label:"Month",desktopView:"dayGridMonth",mobileView:"listMonth"},{label:"Week",desktopView:"timeGridWeek",mobileView:"listWeek"},{label:"Day",desktopView:"timeGridDay",mobileView:"listDay"}].map(({label:c,desktopView:x,mobileView:h})=>{const j=u?x:h;return e.jsx(J.Button,{value:j,onClick:()=>{r(j)},children:c},c)}),u&&e.jsx(J.Button,{value:"listMonth",onClick:()=>{r("listMonth")},children:"List"})]})]}),e.jsx(S.Suspense,{children:e.jsx(to,{calendarRef:a,events:d,onClickEvent:s,setTitle:o})})]})},Rs=T`
    query EventCategories(
        $filter: EventCategoryFilter!
        $sorting: [EventCategorySort!]
    ) {
        eventCategories(filter: $filter, sorting: $sorting) {
            totalCount
            nodes {
                id
                title
            }
        }
    }
`,no="_container_k4ubd_1",ao="_category_k4ubd_2",ro="_checkbox_k4ubd_5",us={container:no,category:ao,checkbox:ro},io="_container_1motl_1",oo="_category_1motl_5",Qe={container:io,category:oo,"new-category-button":"_new-category-button_1motl_17","new-category-input":"_new-category-input_1motl_20"},lo=T`
    mutation CreateEventCategories($input: CreateManyEventCategoriesInput!) {
        createManyEventCategories(input: $input) {
            id
            title
        }
    }
`,co=({saveSuccces:t,...s})=>{const[n]=g.useForm(),{mutate:r}=Is(),{mutate:a}=Me(),{data:i}=te({resource:"eventCategories",meta:{gqlQuery:Rs}});return e.jsx(oe,{...s,title:"Manage Categories",okText:"Save",destroyOnClose:!0,bodyStyle:{paddingTop:"1rem"},okButtonProps:{onClick:()=>{n.submit()}},children:e.jsxs("div",{className:Qe.container,children:[i==null?void 0:i.data.map(o=>e.jsxs("div",{className:Qe.category,children:[e.jsx(p,{className:Qe.title,children:o.title}),e.jsx(_n,{title:"Delete the category",description:"Are you sure to delete this category?",okText:"Yes",cancelText:"No",onConfirm:()=>{a({resource:"eventCategories",id:o.id,successNotification:()=>({key:"event-category-delete",message:"Successfully deleted category",description:"Successful",type:"success"})})},children:e.jsx(C,{type:"text",icon:e.jsx(pe,{className:"tertiary"})})})]},o.id)),e.jsx(g,{form:n,onFinish:o=>{if(!(o!=null&&o.title)||o.title.length===0)return t==null?void 0:t();o.title=o.title.filter(l=>l!==void 0);const u=o.title.map(l=>({title:l}));r({resource:"eventCategories",meta:{gqlMutation:lo},values:u,successNotification:()=>({key:"event-category-create",message:"Successfully created categories",description:"Successful",type:"success"})},{onSuccess:()=>{t==null||t(),n.resetFields()}})},children:e.jsx(g.List,{name:"title",children:(o,{add:u,remove:l})=>e.jsxs(e.Fragment,{children:[o.map(d=>e.jsxs("div",{className:Qe.category,children:[e.jsx(g.Item,{required:!1,noStyle:!0,children:e.jsx(g.Item,{...d,noStyle:!0,children:e.jsx(w,{className:Qe["new-category-input"],placeholder:"Please enter category title",bordered:!1})})}),e.jsx(C,{type:"text",onClick:()=>{l(d.name)},icon:e.jsx(pe,{className:"tertiary"})})]},d.key)),e.jsx("div",{className:Qe.category,children:e.jsx(C,{type:"link",icon:e.jsx(ts,{}),onClick:()=>{u()},className:Qe["new-category-button"],children:"Add category"})})]})})})]})})},uo=({onChange:t,...s})=>{const{token:n}=Oe.useToken(),{modalProps:r,show:a,close:i}=cn(),{data:o,isLoading:u}=te({resource:"eventCategories",meta:{gqlQuery:Rs}});return e.jsxs(e.Fragment,{children:[e.jsx(B,{title:e.jsxs("span",{children:[e.jsx(Es,{style:{color:n.colorPrimary}}),e.jsx(p,{size:"sm",style:{marginLeft:".5rem"},children:"Categories"})]}),extra:e.jsx(C,{shape:"circle",onClick:()=>a(),icon:e.jsx(hn,{})}),bodyStyle:{padding:"0.5rem 1rem"},...s,children:e.jsxs("div",{className:us.container,children:[u&&e.jsx(N,{loading:u,active:!0,paragraph:{rows:3,width:200}}),o==null?void 0:o.data.map(l=>e.jsx("div",{className:us.category,children:e.jsx(dt,{className:us.checkbox,value:l.id,onChange:t,children:e.jsx(p,{children:l.title})})},l.id))]})}),e.jsx(co,{...r,saveSuccces:()=>i()})]})},mo=T`
    query UsersSelect(
        $filter: UserFilter!
        $sorting: [UserSort!]
        $paging: OffsetPaging!
    ) {
        users(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                name
                avatarUrl
            }
        }
    }
`,je=()=>qe({resource:"users",optionLabel:"name",meta:{gqlQuery:mo}}),{RangePicker:po}=wt,Un=({form:t,formProps:s,isAllDayEvent:n=!1,setIsAllDayEvent:r})=>{const{selectProps:a}=qe({resource:"eventCategories",meta:{gqlQuery:Rs}}),{selectProps:i}=je(),o=t.getFieldsValue().rangeDate,u=t.getFieldsValue().date;return e.jsxs(g,{layout:"vertical",form:t,...s,children:[e.jsx(g.Item,{label:"Title",name:"title",rules:[{required:!0}],children:e.jsx(w,{})}),e.jsx(g.Item,{label:"Description",name:"description",rules:[{required:!0}],children:e.jsx(w.TextArea,{})}),e.jsx(g.Item,{label:"Date & Time",rules:[{required:!0}],children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[e.jsx("div",{style:{flex:1,width:80},children:e.jsx(dt,{checked:n,onChange:l=>r(l.target.checked),children:"All Day"})}),n?e.jsx(g.Item,{name:"rangeDate",rules:[{required:!0}],noStyle:!0,children:e.jsx(po,{style:{width:416},format:"YYYY/MM/DD",defaultValue:[A(u),A(u)]})}):e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"0.5rem"},children:[e.jsx(g.Item,{name:"date",rules:[{required:!0}],noStyle:!0,children:e.jsx(wt,{style:{width:"160px"},format:"YYYY/MM/DD",defaultValue:A(o?o[0]:void 0)})}),e.jsx(g.Item,{name:"time",rules:[{required:!0}],noStyle:!0,children:e.jsx(sr.RangePicker,{style:{width:240},format:"HH:mm",minuteStep:15})})]})]})}),e.jsxs(ee,{gutter:[32,32],children:[e.jsx(F,{span:12,children:e.jsx(g.Item,{label:"Category",name:"categoryId",rules:[{required:!0}],children:e.jsx($,{...a})})}),e.jsx(F,{span:12,children:e.jsx(g.Item,{label:"Color",name:"color",rules:[{required:!0}],initialValue:"#1677FF",children:e.jsx(nr,{defaultValue:"#1677FF",panelRender:(l,{components:{Presets:d}})=>e.jsx(d,{}),presets:[{label:"Recommended",colors:["#F5222D","#FA8C16","#8BBB11","#52C41A","#13A8A8","#1677FF","#2F54EB","#722ED1","#EB2F96"]}]})})})]}),e.jsx(g.Item,{label:"Invite participants",name:"participantIds",rules:[{required:!0}],children:e.jsx($,{mode:"multiple",allowClear:!0,...i})})]})},xo=()=>{const[t,s]=S.useState(!1),{list:n}=R(),{formProps:r,saveButtonProps:a,form:i,onFinish:o}=X(),u=async l=>{const{rangeDate:d,date:m,time:c,color:x,...h}=l;let j=A(),f=A();d?(j=d[0].startOf("day"),f=d[1].endOf("day")):(j=m.set("hour",c[0].hour()).set("minute",c[0].minute()).set("second",0),f=m.set("hour",c[1].hour()).set("minute",c[1].minute()).set("second",0)),await o({...h,startDate:j.toISOString(),endDate:f.toISOString(),color:typeof x=="object"?`#${x.toHex()}`:x})};return e.jsx(oe,{title:"Create Event",open:!0,onCancel:()=>{n("events")},okButtonProps:{...a},okText:"Save",width:560,children:e.jsx(Un,{isAllDayEvent:t,setIsAllDayEvent:s,form:i,formProps:{...r,onFinish:u}})})},Fn=T`
    fragment EventFragment on Event {
        id
        title
        description
        startDate
        endDate
        color
        createdAt
        createdBy {
            id
            name
        }
        category {
            id
            title
        }
        participants {
            id
            name
        }
    }
`,go=T`
    mutation UpdateEvent($input: UpdateOneEventInput!) {
        updateOneEvent(input: $input) {
            ...EventFragment
        }
    }
    ${Fn}
`,ho=T`
    query GetEvent($id: ID!) {
        event(id: $id) {
            ...EventFragment
        }
    }
    ${Fn}
`,jo=()=>{const[t,s]=S.useState(!1),{id:n}=bs(),{list:r}=R(),{formProps:a,saveButtonProps:i,form:o,onFinish:u,queryResult:l}=X({action:"edit",id:n,queryOptions:{enabled:!0},meta:{gqlMutation:go}});S.useEffect(()=>{var j,f,y,_;const m=(j=l==null?void 0:l.data)==null?void 0:j.data.startDate,c=(f=l==null?void 0:l.data)==null?void 0:f.data.endDate,x=A(m).utc(),h=A(c).utc();o.setFieldsValue({categoryId:(y=l==null?void 0:l.data)==null?void 0:y.data.category.id,participantIds:(_=l==null?void 0:l.data)==null?void 0:_.data.participants.map(D=>D.id)}),h.diff(x,"hours")>=23?(s(!0),o.setFieldsValue({rangeDate:[x,h]})):o.setFieldsValue({date:x,time:[x,h]})},[l==null?void 0:l.data]);const d=async m=>{const{rangeDate:c,date:x,time:h,color:j,...f}=m;let y=A(),_=A();c?(y=c[0].utc().startOf("day"),_=c[1].utc().endOf("day")):(y=x.utc().set("hour",h[0].hour()).set("minute",h[0].minute()).set("second",0),_=x.utc().set("hour",h[1].hour()).set("minute",h[1].minute()).set("second",0)),await u({...f,startDate:y.toISOString(),endDate:_.toISOString(),color:typeof j=="object"?`#${j.toHex()}`:j})};return e.jsx(oe,{title:"Edit Event",open:!0,onCancel:()=>{r("events")},okButtonProps:{...i},okText:"Save",width:560,children:e.jsx(Un,{isAllDayEvent:t,setIsAllDayEvent:s,form:o,formProps:{...a,onFinish:d}})})},fo=()=>{const{id:t}=bs(),{list:s}=R(),{queryResult:n}=Wt({id:t,meta:{gqlQuery:ho}}),{data:r,isLoading:a,isError:i,error:o}=n;if(i)return console.error("Error fetching event",o),null;const{description:u,startDate:l,endDate:d,category:m,participants:c}=(r==null?void 0:r.data)??{},x=A(l).utc(),h=A(d).utc();let j=!1;h.diff(x,"hours")>=23&&(j=!0);const f=()=>{s("events")};return e.jsx(it,{title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("div",{style:{backgroundColor:r==null?void 0:r.data.color,flexShrink:0,borderRadius:"50%",width:"10px",height:"10px",marginTop:"8px"}}),e.jsx(p,{strong:!0,size:"md",children:r==null?void 0:r.data.title})]}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx(Ht,{icon:e.jsx(Ne,{}),hideText:!0,type:"text"}),e.jsx(C,{icon:e.jsx(As,{}),type:"text",onClick:f})]})]}),closeIcon:!1,open:!0,onClose:f,width:378,children:a?e.jsx(N,{loading:a,active:!0,avatar:!0,paragraph:{rows:3},style:{padding:0}}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[j?e.jsxs("div",{children:[e.jsx(Ft,{style:{marginRight:".5rem"}}),e.jsx(p,{children:`${A(x).format("MMMM D")} - ${A(h).format("MMMM D")}`}),e.jsx(Se,{style:{marginLeft:".5rem"},color:"blue",children:"All Day"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(Ft,{style:{marginRight:".5rem"}}),e.jsx(p,{children:A(x).format("MMMM D, YYYY dddd")})]}),e.jsxs("div",{children:[e.jsx(yn,{style:{marginRight:".5rem"}}),e.jsx(p,{children:`${A(x).format("h:mma")} - ${A(h).format("h:mma")}`})]})]}),e.jsxs("div",{children:[e.jsx(Es,{style:{marginRight:".5rem"}}),e.jsx(p,{children:m==null?void 0:m.title})]}),e.jsxs("div",{style:{display:"flex",alignItems:"start"},children:[e.jsx(St,{style:{marginRight:".5rem"}}),e.jsx(I,{size:4,wrap:!0,style:{marginTop:"-8px"},children:c==null?void 0:c.map(y=>e.jsx($n,{user:y},y.id))})]}),e.jsxs("div",{style:{display:"flex",alignItems:"start"},children:[e.jsx(Fa,{style:{marginRight:".5rem",marginTop:"0.32rem"}}),e.jsx(p,{children:u})]})]})})},yo=({children:t})=>{const{show:s}=R(),[n,r]=S.useState([]);return e.jsxs("div",{className:"page-container",children:[e.jsxs(ee,{gutter:[32,32],children:[e.jsxs(F,{xs:24,xl:6,children:[e.jsx(ia,{block:!0,size:"large",style:{marginBottom:"1rem"},children:"Create event"}),e.jsx(Nn,{limit:3,cardProps:{style:{marginBottom:"1rem"}}}),e.jsx(uo,{onChange:a=>{r(i=>i.includes(a.target.value)?i.filter(o=>o!==a.target.value):[...i,a.target.value])}})]}),e.jsx(F,{xs:24,xl:18,children:e.jsx(so,{onClickEvent:({id:a})=>{s("events",a)},categoryId:n})})]}),t]})},vo=T`
    mutation CreateCompany($input: CreateOneCompanyInput!) {
        createOneCompany(input: $input) {
            id
            name
            salesOwner {
                id
                name
                avatarUrl
            }
        }
    }
`,Co=T`
    query CompaniesTable(
        $filter: CompanyFilter!
        $sorting: [CompanySort!]!
        $paging: OffsetPaging!
    ) {
        companies(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                name
                avatarUrl
                dealsAggregate {
                    sum {
                        value
                    }
                }
                salesOwner {
                    id
                    name
                    avatarUrl
                }
                contacts {
                    nodes {
                        id
                        name
                        avatarUrl
                    }
                }
            }
            totalCount
        }
    }
`,xt=({isOverModal:t})=>{var x,h;const s=oa(),[n]=lt(),{pathname:r}=kt(),a=ln(),{formProps:i,modalProps:o,close:u,onFinish:l}=be({action:"create",defaultVisible:!0,resource:"companies",redirect:!1,warnWhenUnsavedChanges:!t,mutationMode:"pessimistic",meta:{gqlMutation:vo}}),{selectProps:d,queryResult:m}=je(),{mutateAsync:c}=Is();return e.jsx(oe,{...o,mask:!t,onCancel:()=>{u(),a({to:n.get("to")??s({action:"list"})??"",query:{to:void 0},options:{keepQuery:!0},type:"replace"})},title:"Add new company",width:512,closeIcon:e.jsx(es,{}),children:e.jsxs(g,{...i,layout:"vertical",onFinish:async j=>{var f,y;try{const _=await l({name:j.name,salesOwnerId:j.salesOwnerId}),D=_==null?void 0:_.data;((f=j.contacts??[])==null?void 0:f.length)>0&&await c({resource:"contacts",values:((y=j.contacts)==null?void 0:y.map(M=>({...M,companyId:D.id,salesOwnerId:D.salesOwner.id})))??[],successNotification:!1}),a({to:n.get("to")??r,query:{companyId:D.id,to:void 0},options:{keepQuery:!0},type:"replace"})}catch(_){Promise.reject(_)}},children:[e.jsx(g.Item,{label:"Company name",name:"name",rules:[{required:!0}],children:e.jsx(w,{placeholder:"Please enter company name"})}),e.jsx(g.Item,{label:"Sales owner",name:"salesOwnerId",rules:[{required:!0}],children:e.jsx($,{placeholder:"Please sales owner user",...d,options:((h=(x=m.data)==null?void 0:x.data)==null?void 0:h.map(j=>({value:j.id,label:e.jsx(ve,{name:j.name,avatarUrl:j.avatarUrl??void 0})})))??[]})}),e.jsx(g.List,{name:"contacts",children:(j,{add:f,remove:y})=>e.jsxs(I,{direction:"vertical",children:[j.map(({key:_,name:D,...M})=>e.jsxs(ee,{gutter:12,align:"middle",children:[e.jsx(F,{span:11,children:e.jsx(g.Item,{noStyle:!0,...M,name:[D,"name"],children:e.jsx(w,{addonBefore:e.jsx(rt,{}),placeholder:"Contact name"})})}),e.jsx(F,{span:11,children:e.jsx(g.Item,{noStyle:!0,name:[D,"email"],children:e.jsx(w,{addonBefore:e.jsx(Ke,{}),placeholder:"Contact email"})})}),e.jsx(F,{span:2,children:e.jsx(C,{icon:e.jsx(pe,{}),onClick:()=>y(D)})})]},_)),e.jsxs(W.Link,{onClick:()=>f(),children:[e.jsx(Ie,{})," Add new contacts"]})]})})]})})},Ln=({avatars:t,size:s,overlap:n,maxCount:r=3,gap:a="8px",containerStyle:i,avatarStyle:o})=>{const u=t.slice(0,r),l=t.slice(r),d=l.length>0,m=n&&t.length>3,c=x=>{if(typeof x=="number")return m?`${x+4}px`:`${x}px`;switch(x){case"large":return m?"44px":"40px";case"small":return m?"28px":"24px";default:return m?"36px":"32px"}};return e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:m?"0":a,...i},children:[u.map((x,h)=>{const j=m?`translateX(-${h*8}px)`:void 0;return e.jsx(Le,{title:x.name,children:e.jsx(L,{style:{cursor:"pointer",transform:j,zIndex:h,border:m?"2px solid #fff":"none",width:c(s),height:c(s),...o},name:x==null?void 0:x.name,src:x==null?void 0:x.src,size:s})},h)}),d&&e.jsx(Le,{destroyTooltipOnHide:!0,title:e.jsx(I,{direction:"vertical",children:l.map((x,h)=>e.jsxs(I,{children:[e.jsx(L,{name:x.name,src:x.src,size:"small"}),e.jsx(p,{style:{color:"#fff"},children:x.name},x.name)]},h))}),children:e.jsxs(p,{className:"tertiary",style:{userSelect:"none",cursor:"pointer",fontSize:"10px",lineHeight:"22px",letterSpacing:"0.5px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",width:c(s),height:c(s),transform:m?`translateX(-${u.length*8}px)`:void 0,zIndex:m?u.length:1,backgroundColor:"#D9D9D9",border:n?"2px solid #fff":"none"},children:["+",l.length]})})]})},zn=()=>e.jsx(B,{size:"small",actions:[e.jsxs("div",{style:{width:"100%",height:"60px",display:"flex",justifyContent:"space-between",alignItems:"flex-start",padding:"0 16px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"6px"},children:[e.jsx(p,{size:"xs",children:"Related contacts"}),e.jsxs(I,{size:4,children:[e.jsx(N.Avatar,{active:!0,shape:"circle",size:"small"}),e.jsx(N.Avatar,{active:!0,shape:"circle",size:"small"}),e.jsx(N.Avatar,{active:!0,shape:"circle",size:"small"})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"6px"},children:[e.jsx(p,{size:"xs",children:"Sales owner"}),e.jsx(I,{size:4,children:e.jsx(N.Avatar,{active:!0,shape:"circle",size:"small"})})]})]},1)],children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},children:[e.jsx(N.Avatar,{active:!0,shape:"square",style:{width:"48px",height:"48px",borderRadius:"4px"}}),e.jsx(N.Input,{active:!0,style:{width:"200px",height:"16px",marginTop:"16px"}}),e.jsxs(I,{direction:"vertical",size:0,style:{marginBottom:"6px",alignItems:"center"},children:[e.jsx(N.Input,{active:!0,style:{height:"16px",marginTop:"12px"}}),e.jsx(N.Input,{active:!0,style:{height:"16px",marginTop:"8px"}})]})]})}),So=({company:t})=>{var a,i,o,u,l,d,m,c;const{edit:s}=R(),{mutate:n}=Me();if(!t)return e.jsx(zn,{});const r=(i=(a=t==null?void 0:t.contacts)==null?void 0:a.nodes)==null?void 0:i.map(x=>({name:x.name,src:x.avatarUrl}));return e.jsx(B,{size:"small",actions:[e.jsxs("div",{style:{width:"100%",height:"60px",display:"flex",justifyContent:"space-between",alignItems:"flex-start",padding:"0 16px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"6px"},children:[e.jsx(p,{size:"xs",children:"Related contacts"}),e.jsx(Ln,{size:"small",overlap:!0,gap:"4px",avatars:r})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"6px"},children:[e.jsx(p,{size:"xs",children:"Sales owner"}),e.jsx(Le,{title:(o=t.salesOwner)==null?void 0:o.name,children:e.jsx(L,{name:(u=t.salesOwner)==null?void 0:u.name,src:(l=t.salesOwner)==null?void 0:l.avatarUrl})},(d=t.salesOwner)==null?void 0:d.id)]})]},"1")],children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},children:[e.jsx(Fe,{menu:{items:[{label:"View company",key:"1",icon:e.jsx(It,{}),onClick:()=>{s("companies",t.id)}},{danger:!0,label:"Delete company",key:"2",icon:e.jsx(pe,{}),onClick:()=>{n({resource:"company",id:t.id})}}]},placement:"bottom",arrow:!0,children:e.jsx(C,{type:"text",shape:"circle",style:{position:"absolute",top:0,right:0},icon:e.jsx(Tt,{style:{transform:"rotate(90deg)"}})})}),e.jsx(L,{name:t.name,src:t.avatarUrl,shape:"square",style:{width:"48px",height:"48px"}}),e.jsx(p,{strong:!0,size:"md",ellipsis:{tooltip:t.name},style:{marginTop:"12px"},children:t.name}),e.jsxs(I,{direction:"vertical",size:0,style:{marginTop:"8px",alignItems:"center"},children:[e.jsx(p,{type:"secondary",children:"Open deals amount"}),e.jsx(p,{strong:!0,size:"md",style:{marginTop:"12px"},children:K(((c=(m=t==null?void 0:t.dealsAggregate)==null?void 0:m[0].sum)==null?void 0:c.value)||0)})]})]})})},bo=({tableProps:{dataSource:t,pagination:s,loading:n},setCurrent:r,setPageSize:a})=>{const i=S.useMemo(()=>[...t||[]],[t]);return e.jsx(fe,{grid:{gutter:32,column:4,xs:1,sm:1,md:2,lg:2,xl:4},dataSource:i,renderItem:o=>e.jsx(fe.Item,{children:e.jsx(So,{company:o})}),pagination:{...s,hideOnSinglePage:!0,itemRender:void 0,position:"bottom",style:{display:"flex",marginTop:"1rem"},pageSizeOptions:["12","24","48"],onChange:(o,u)=>{r(o),a(u)},showTotal:o=>e.jsx(ut,{total:o,entityName:"company"})},children:n?e.jsx(fe,{grid:{gutter:32,column:4,xs:1,sm:1,md:2,lg:2,xl:4},dataSource:Array.from({length:12}).map((o,u)=>({id:u})),renderItem:()=>e.jsx(fe.Item,{children:e.jsx(zn,{})})}):void 0})},Io=T`
    query CompanyContactsTable(
        $filter: ContactFilter!
        $sorting: [ContactSort!]
        $paging: OffsetPaging!
    ) {
        contacts(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                name
                avatarUrl
                jobTitle
                email
                phone
                status
            }
            totalCount
        }
    }
`,To=T`
    query CompanyContactsGetCompany($id: ID!) {
        company(id: $id) {
            id
            name
            salesOwner {
                id
            }
        }
    }
`,_o=T`
    query CompanyDealsTable(
        $filter: DealFilter!
        $sorting: [DealSort!]
        $paging: OffsetPaging!
    ) {
        deals(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                title
                value
                stage {
                    id
                    title
                }
                dealOwner {
                    id
                    name
                    avatarUrl
                }
                dealContact {
                    id
                    name
                    avatarUrl
                }
            }
            totalCount
        }
    }
`,wo=T`
    query CompanyTotalDealsAmount($id: ID!) {
        company(id: $id) {
            dealsAggregate {
                sum {
                    value
                }
            }
        }
    }
`,ko=T`
    query CompanyInfo($id: ID!) {
        company(id: $id) {
            id
            totalRevenue
            industry
            companySize
            businessType
            country
            website
        }
    }
`,Ao=T`
    mutation CompanyCreateCompanyNote($input: CreateOneCompanyNoteInput!) {
        createOneCompanyNote(input: $input) {
            id
            note
        }
    }
`,Eo=T`
    query CompanyCompanyNotes(
        $filter: CompanyNoteFilter!
        $sorting: [CompanyNoteSort!]
        $paging: OffsetPaging!
    ) {
        companyNotes(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                note
                createdAt
                createdBy {
                    id
                    name
                    updatedAt
                    avatarUrl
                }
            }
            totalCount
        }
    }
`,No=T`
    mutation CompanyUpdateCompanyNote($input: UpdateOneCompanyNoteInput!) {
        updateOneCompanyNote(input: $input) {
            id
            note
        }
    }
`,Oo=T`
    query CompanyQuotesTable(
        $filter: QuoteFilter!
        $sorting: [QuoteSort!]
        $paging: OffsetPaging!
    ) {
        quotes(filter: $filter, sorting: $sorting, paging: $paging) {
            totalCount
            nodes {
                id
                title
                status
                total
                company {
                    id
                    name
                }
                contact {
                    id
                    name
                    avatarUrl
                }
                salesOwner {
                    id
                    name
                    avatarUrl
                }
            }
        }
    }
`,Do=()=>{var o,u;const t=Te(),{tableProps:s,filters:n,setFilters:r}=ze({resource:"contacts",syncWithLocation:!1,sorters:{initial:[{field:"createdAt",order:"desc"}]},filters:{initial:[{field:"jobTitle",value:"",operator:"contains"},{field:"name",value:"",operator:"contains"},{field:"status",value:void 0,operator:"in"}],permanent:[{field:"company.id",operator:"eq",value:t.id}]},meta:{gqlQuery:Io}}),a=s.loading?!0:(((o=s==null?void 0:s.dataSource)==null?void 0:o.length)||0)>0,i=S.useMemo(()=>n==null?void 0:n.filter(l=>!("field"in l&&l.field==="company.id"||!l.value)),[n]);return e.jsxs(B,{headStyle:{borderBottom:"1px solid #D9D9D9",marginBottom:"1px"},bodyStyle:{padding:0},title:e.jsxs(I,{size:"middle",children:[e.jsx(St,{}),e.jsx(p,{children:"Contacts"}),(i==null?void 0:i.length)>0&&e.jsx(C,{size:"small",onClick:()=>r([],"replace"),children:"Reset filters"})]}),actions:[e.jsx(Po,{},"1")],extra:e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"tertiary",children:"Total contacts: "}),e.jsx(p,{strong:!0,children:(s==null?void 0:s.pagination)!==!1&&((u=s.pagination)==null?void 0:u.total)})]}),children:[!a&&e.jsx("div",{style:{padding:16,borderBottom:"1px solid #D9D9D9"},children:e.jsx(p,{children:"No contacts yet"})}),a&&e.jsxs(E,{...s,rowKey:"id",pagination:{...s.pagination,showSizeChanger:!1},children:[e.jsx(E.Column,{title:"Name",dataIndex:"name",render:(l,d)=>e.jsxs(I,{children:[e.jsx(L,{name:d.name,src:d.avatarUrl}),e.jsx(p,{style:{whiteSpace:"nowrap"},children:d.name})]}),filterIcon:e.jsx(ge,{}),filterDropdown:l=>e.jsx(V,{...l,children:e.jsx(w,{placeholder:"Search Name"})})}),e.jsx(E.Column,{title:"Title",dataIndex:"jobTitle",filterIcon:e.jsx(ge,{}),filterDropdown:l=>e.jsx(V,{...l,children:e.jsx(w,{placeholder:"Search Title"})})}),e.jsx(E.Column,{title:"Stage",dataIndex:"status",render:(l,d)=>e.jsx(qs,{status:d.status}),filterDropdown:l=>e.jsx(V,{...l,children:e.jsx($,{style:{width:"200px"},mode:"multiple",placeholder:"Select Stage",options:$o})})}),e.jsx(E.Column,{dataIndex:"id",width:112,render:(l,d)=>e.jsxs(I,{children:[e.jsx(C,{size:"small",href:`mailto:${d.email}`,icon:e.jsx(Ke,{})}),e.jsx(C,{size:"small",href:`tel:${d.phone}`,icon:e.jsx(bt,{})}),e.jsx(Gt,{hideText:!0,recordItemId:l,size:"small",resource:"contacts",icon:e.jsx(Ns,{})})]})})]})]})},Po=()=>{const{id:t=""}=Te(),{data:s}=Vt({id:t,resource:"companies",meta:{gqlQuery:To}}),[n]=g.useForm(),r=g.useWatch("contacts",n),{mutateAsync:a}=Is(),i=async u=>{n.validateFields();const l=u.contacts.map(d=>{var m;return{...d,companyId:t,salesOwnerId:((m=s==null?void 0:s.data.salesOwner)==null?void 0:m.id)||""}});await a({resource:"contacts",values:l,successNotification:!1}),n.resetFields()},{hasContacts:o}=S.useMemo(()=>({hasContacts:(r==null?void 0:r.length)>0}),[r]);return e.jsxs(g,{form:n,onFinish:i,children:[e.jsx(g.List,{name:"contacts",children:(u,{add:l,remove:d})=>e.jsxs("div",{style:{display:"flex",alignItems:"flex-start ",flexDirection:"column",gap:"16px",padding:"4px 16px"},children:[u.map(({key:m,name:c,...x})=>e.jsxs(ee,{gutter:12,align:"top",style:{width:"100%"},children:[e.jsx(F,{span:11,children:e.jsx(g.Item,{...x,style:{marginBottom:0},rules:[{required:!0,message:"Please enter contact name"}],name:[c,"name"],children:e.jsx(w,{addonBefore:e.jsx(rt,{}),placeholder:"Contact name"})})}),e.jsx(F,{span:11,children:e.jsx(g.Item,{required:!0,style:{marginBottom:0},rules:[{required:!0,message:"Please enter contact e-mail"}],name:[c,"email"],children:e.jsx(w,{addonBefore:e.jsx(Ke,{}),placeholder:"Contact email"})})}),e.jsx(F,{span:2,children:e.jsx(C,{icon:e.jsx(pe,{}),onClick:()=>d(c)})})]},m)),e.jsx(C,{type:"link",icon:e.jsx(Ie,{}),onClick:()=>l(),style:{marginBottom:o?16:0},children:"Add new contact"})]})}),o&&e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",padding:"16px",borderTop:"1px solid #D9D9D9"},children:[e.jsx(C,{size:"large",type:"default",onClick:()=>{n.resetFields()},children:"Cancel"}),e.jsx(la,{size:"large",icon:void 0,onClick:()=>n.submit()})]})]})},$o=[{label:"New",value:"NEW"},{label:"Qualified",value:"QUALIFIED"},{label:"Unqualified",value:"UNQUALIFIED"},{label:"Won",value:"WON"},{label:"Negotiation",value:"NEGOTIATION"},{label:"Lost",value:"LOST"},{label:"Interested",value:"INTERESTED"},{label:"Contacted",value:"CONTACTED"},{label:"Churned",value:"CHURNED"}],Uo=T`
    query DealStagesSelect(
        $filter: DealStageFilter!
        $sorting: [DealStageSort!]
        $paging: OffsetPaging!
    ) {
        dealStages(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                title
            }
        }
    }
`,Bs=()=>qe({resource:"dealStages",meta:{gqlQuery:Uo}}),Fo=({style:t})=>{var x,h,j,f;const{listUrl:s}=R(),n=Te(),{tableProps:r,filters:a,setFilters:i}=ze({resource:"deals",syncWithLocation:!1,sorters:{initial:[{field:"updatedAt",order:"desc"}]},filters:{initial:[{field:"title",value:"",operator:"contains"},{field:"stage.id",value:"",operator:"in"}],permanent:[{field:"company.id",operator:"eq",value:n.id}]},meta:{gqlQuery:_o}}),{data:o,isLoading:u}=Vt({resource:"companies",id:n.id,meta:{gqlQuery:wo}}),{selectProps:l}=je(),{selectProps:d}=Bs(),m=r.loading?!0:(((x=r==null?void 0:r.dataSource)==null?void 0:x.length)||0)>0,c=S.useMemo(()=>a==null?void 0:a.filter(y=>!("field"in y&&y.field==="company.id"||!y.value)),[a]);return e.jsxs(B,{style:t,headStyle:{borderBottom:"1px solid #D9D9D9",marginBottom:"1px"},bodyStyle:{padding:0},title:e.jsxs(I,{size:"middle",children:[e.jsx(vn,{}),e.jsx(p,{children:"Deals"}),(c==null?void 0:c.length)>0&&e.jsx(C,{size:"small",onClick:()=>i([],"replace"),children:"Reset filters"})]}),extra:e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"tertiary",children:"Total deal amount: "}),u?e.jsx(N.Input,{active:!0,size:"small"}):e.jsx(p,{strong:!0,children:K(((f=(j=(h=o==null?void 0:o.data.dealsAggregate)==null?void 0:h[0])==null?void 0:j.sum)==null?void 0:f.value)||0)})]}),children:[!m&&e.jsxs(I,{direction:"vertical",size:16,style:{padding:16},children:[e.jsx(p,{children:"No deals yet"}),e.jsxs(Qt,{to:s("deals"),children:[e.jsx(Ie,{style:{marginRight:4}})," ","Add deals through sales pipeline"]})]}),m&&e.jsxs(E,{...r,rowKey:"id",pagination:{...r.pagination,showSizeChanger:!1},children:[e.jsx(E.Column,{title:"Deal Title",dataIndex:"title",filterIcon:e.jsx(ge,{}),filterDropdown:y=>e.jsx(V,{...y,children:e.jsx(w,{placeholder:"Search Title"})})}),e.jsx(E.Column,{title:"Deal amount",dataIndex:"value",sorter:!0,render:(y,_)=>e.jsx(p,{children:K(_.value||0)})}),e.jsx(E.Column,{title:"Stage",dataIndex:["stage","id"],render:(y,_)=>_.stage?e.jsx(Se,{children:_.stage.title}):null,filterDropdown:y=>e.jsx(V,{...y,children:e.jsx($,{...d,style:{width:"200px"},mode:"multiple",placeholder:"Select Stage"})})}),e.jsx(E.Column,{dataIndex:["dealOwnerId"],title:"Participants",render:(y,_)=>e.jsx(Ms,{userOne:_.dealOwner,userTwo:_.dealContact}),filterDropdown:y=>e.jsx(V,{...y,children:e.jsx($,{style:{width:"200px"},placeholder:"Select Sales Owner",...l})})}),e.jsx(E.Column,{dataIndex:"id",width:48,render:y=>e.jsx(Ht,{recordItemId:y,hideText:!0,size:"small",resource:"deals",icon:e.jsx(Ns,{})})})]})]})},Lo=()=>{var x;const[t,s]=S.useState(),{queryResult:n}=Wt({meta:{gqlQuery:ko}}),r=(x=n==null?void 0:n.data)==null?void 0:x.data,{totalRevenue:a,industry:i,companySize:o,businessType:u,country:l,website:d}=r||{},m=h=>{const{formName:j}=h;return t===j?"form":r!=null&&r[j]?"view":"empty"},c=n==null?void 0:n.isLoading;return e.jsxs(B,{title:e.jsxs(I,{size:15,children:[e.jsx(Ct,{className:"sm"}),e.jsx(p,{children:"Company info"})]}),headStyle:{padding:"1rem"},bodyStyle:{padding:"0"},style:{maxWidth:"500px"},children:[e.jsx(ce,{loading:c,style:{padding:"0.5rem 1rem"},icon:e.jsx(La,{className:"tertiary"}),state:m({formName:"companySize"}),itemProps:{name:"companySize",label:"Company size"},view:e.jsx(p,{children:o}),onClick:()=>s("companySize"),onUpdate:()=>s(void 0),onCancel:()=>s(void 0),children:e.jsx($,{autoFocus:!0,defaultValue:o,options:zo,style:{width:"100%"}})}),e.jsx(ce,{loading:c,style:{padding:"0.5rem 1rem"},icon:e.jsx(_t,{className:"tertiary"}),state:m({formName:"totalRevenue"}),itemProps:{name:"totalRevenue",label:"Total revenue"},view:e.jsx(p,{children:K(a||0)}),onClick:()=>s("totalRevenue"),onUpdate:()=>s(void 0),onCancel:()=>s(void 0),children:e.jsx(Ue,{autoFocus:!0,addonBefore:"$",min:0,placeholder:"0,00",defaultValue:a||0,formatter:h=>`${h}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")})}),e.jsx(ce,{loading:c,style:{padding:"0.5rem 1rem"},icon:e.jsx(za,{className:"tertiary"}),state:m({formName:"industry"}),itemProps:{name:"industry",label:"Industry"},view:e.jsx(p,{children:i}),onClick:()=>s("industry"),onUpdate:()=>s(void 0),onCancel:()=>s(void 0),children:e.jsx($,{autoFocus:!0,defaultValue:i,options:Mo,style:{width:"100%"}})}),e.jsx(ce,{loading:c,style:{padding:"0.5rem 1rem"},icon:e.jsx(Ma,{className:"tertiary"}),state:m({formName:"businessType"}),itemProps:{name:"businessType",label:"Business type"},view:e.jsx(p,{children:u}),onClick:()=>s("businessType"),onUpdate:()=>s(void 0),onCancel:()=>s(void 0),children:e.jsx($,{autoFocus:!0,defaultValue:u,options:qo,style:{width:"100%"}})}),e.jsx(ce,{loading:c,style:{padding:"0.5rem 1rem"},icon:e.jsx(fs,{className:"tertiary"}),state:m({formName:"country"}),itemProps:{name:"country",label:"Country"},view:e.jsx(p,{children:l}),onClick:()=>s("country"),onUpdate:()=>s(void 0),onCancel:()=>s(void 0),children:e.jsx(w,{autoFocus:!0,defaultValue:l||"",placeholder:"Country",style:{width:"100%"}})}),e.jsx(ce,{loading:c,style:{padding:"0.5rem 1rem"},icon:e.jsx(fs,{className:"tertiary"}),state:m({formName:"website"}),itemProps:{name:"website",label:"Website"},view:e.jsx(p,{children:d}),onClick:()=>s("website"),onUpdate:()=>s(void 0),onCancel:()=>s(void 0),children:e.jsx(w,{autoFocus:!0,defaultValue:d||"",placeholder:"Website",style:{width:"100%"}})})]})},zo=[{label:"Enterprise",value:"ENTERPRISE"},{label:"Large",value:"LARGE"},{label:"Medium",value:"MEDIUM"},{label:"Small",value:"SMALL"}],Mo=[{label:"Aerospace",value:"AEROSPACE"},{label:"Agriculture",value:"AGRICULTURE"},{label:"Automotive",value:"AUTOMOTIVE"},{label:"Chemicals",value:"CHEMICALS"},{label:"Construction",value:"CONSTRUCTION"},{label:"Defense",value:"DEFENSE"},{label:"Education",value:"EDUCATION"},{label:"Energy",value:"ENERGY"},{label:"Financial Services",value:"FINANCIAL_SERVICES"},{label:"Food and Beverage",value:"FOOD_AND_BEVERAGE"},{label:"Government",value:"GOVERNMENT"},{label:"Healthcare",value:"HEALTHCARE"},{label:"Hospitality",value:"HOSPITALITY"},{label:"Industrial Manufacturing",value:"INDUSTRIAL_MANUFACTURING"},{label:"Insurance",value:"INSURANCE"},{label:"Life Sciences",value:"LIFE_SCIENCES"},{label:"Logistics",value:"LOGISTICS"},{label:"Media",value:"MEDIA"},{label:"Mining",value:"MINING"},{label:"Nonprofit",value:"NONPROFIT"},{label:"Other",value:"OTHER"},{label:"Pharmaceuticals",value:"PHARMACEUTICALS"},{label:"Professional Services",value:"PROFESSIONAL_SERVICES"},{label:"Real Estate",value:"REAL_ESTATE"},{label:"Retail",value:"RETAIL"},{label:"Technology",value:"TECHNOLOGY"},{label:"Telecommunications",value:"TELECOMMUNICATIONS"},{label:"Transportation",value:"TRANSPORTATION"},{label:"Utilities",value:"UTILITIES"}],qo=[{label:"B2B",value:"B2B"},{label:"B2C",value:"B2C"},{label:"B2G",value:"B2G"}],Ro=({style:t})=>e.jsxs(B,{bodyStyle:{padding:"0"},headStyle:{borderBottom:"1px solid #D9D9D9"},title:e.jsxs(I,{size:16,children:[e.jsx(Ls,{style:{width:"24px",height:"24px"}}),e.jsx(p,{children:"Notes"})]}),style:t,children:[e.jsx(Bo,{}),e.jsx(Qo,{})]}),Bo=()=>{const{id:t}=vt(),{data:s}=Ee(),{formProps:n,onFinish:r,form:a,formLoading:i}=X({action:"create",resource:"companyNotes",queryOptions:{enabled:!1},redirect:!1,mutationMode:"optimistic",successNotification:()=>({key:"company-note",message:"Successfully added note",description:"Successful",type:"success"}),meta:{gqlMutation:Ao}}),o=async u=>{if(!(!t||!u.note.trim()))try{await r({...u,companyId:t}),a.resetFields()}catch{}};return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"1rem",borderBottom:"1px solid #F0F0F0"},children:[e.jsx(L,{style:{flexShrink:0},name:s==null?void 0:s.name,src:s==null?void 0:s.avatarUrl}),e.jsx(g,{...n,style:{width:"100%"},onFinish:o,children:e.jsx(g.Item,{name:"note",noStyle:!0,rules:[{required:!0,transform(u){return u==null?void 0:u.trim()},message:"Please enter a note"}],children:e.jsx(w,{placeholder:"Add your note",style:{backgroundColor:"#fff"},addonAfter:i&&e.jsx(Os,{})})})})]})},Qo=()=>{var l;const t=Te(),s=he(),{data:n}=te({resource:"companyNotes",sorters:[{field:"updatedAt",order:"desc"}],filters:[{field:"company.id",operator:"eq",value:t.id}],meta:{gqlQuery:Eo}}),{formProps:r,setId:a,id:i,saveButtonProps:o}=X({resource:"companyNotes",action:"edit",queryOptions:{enabled:!1},mutationMode:"optimistic",onMutationSuccess:()=>{a(void 0),s({invalidates:["list"],resource:"companyNotes"})},successNotification:()=>({key:"company-update-note",message:"Successfully updated note",description:"Successful",type:"success"}),meta:{gqlMutation:No}}),{data:u}=Ee();return e.jsx(I,{size:16,direction:"vertical",style:{borderRadius:"8px",backgroundColor:"#FAFAFA",padding:"1rem",width:"100%"},children:(l=n==null?void 0:n.data)==null?void 0:l.map(d=>{const m=(u==null?void 0:u.id)===d.createdBy.id;return e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx(L,{style:{flexShrink:0},name:d.createdBy.name,src:d.createdBy.avatarUrl}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(p,{style:{fontWeight:500},children:d.createdBy.name}),e.jsx(p,{size:"xs",style:{color:"#000000a6"},children:A(d.createdAt).format("MMMM D, YYYY - h:ma")})]}),i===d.id?e.jsx(g,{...r,initialValues:{note:d.note},children:e.jsx(g.Item,{name:"note",rules:[{required:!0,transform(c){return c==null?void 0:c.trim()},message:"Please enter a note"}],children:e.jsx(w.TextArea,{autoFocus:!0,required:!0,minLength:1,style:{boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.03), 0px 1px 6px -1px rgba(0, 0, 0, 0.02), 0px 2px 4px 0px rgba(0, 0, 0, 0.02)",backgroundColor:"#fff",width:"100%"}})})}):e.jsx(W.Paragraph,{style:{boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.03), 0px 1px 6px -1px rgba(0, 0, 0, 0.02), 0px 2px 4px 0px rgba(0, 0, 0, 0.02)",background:"#fff",borderRadius:"6px",padding:"8px",marginBottom:0},ellipsis:{rows:3,expandable:!0},children:d.note}),m&&!i&&e.jsxs(I,{size:16,children:[e.jsx(W.Link,{type:"secondary",style:{fontSize:"12px"},onClick:()=>a(d.id),children:"Edit"}),e.jsx(Ge,{resource:"companyNotes",recordItemId:d.id,size:"small",type:"link",successNotification:()=>({key:"company-delete-note",message:"Successfully deleted note",description:"Successful",type:"success"}),icon:null,className:"ant-typography secondary",style:{fontSize:"12px"}})]}),i===d.id&&e.jsxs(I,{children:[e.jsx(C,{size:"small",onClick:()=>a(void 0),children:"Cancel"}),e.jsx(C,{size:"small",type:"primary",...o,children:"Save"})]})]})]},d.id)})})},Vo=({style:t})=>{var d;const{listUrl:s}=R(),n=Te(),{tableProps:r,filters:a,setFilters:i}=ze({resource:"quotes",syncWithLocation:!1,sorters:{initial:[{field:"updatedAt",order:"desc"}]},filters:{initial:[{field:"title",value:"",operator:"contains"},{field:"status",value:void 0,operator:"in"}],permanent:[{field:"company.id",operator:"eq",value:n.id}]},meta:{gqlQuery:Oo}}),{selectProps:o}=je(),u=S.useMemo(()=>a==null?void 0:a.filter(m=>!("field"in m&&m.field==="company.id"||!m.value)),[a]),l=(((d=r==null?void 0:r.dataSource)==null?void 0:d.length)||0)>0;return e.jsxs(B,{style:t,headStyle:{borderBottom:"1px solid #D9D9D9",marginBottom:"1px"},bodyStyle:{padding:0},title:e.jsxs(I,{size:"middle",children:[e.jsx(pn,{}),e.jsx(p,{children:"Quotes"}),(u==null?void 0:u.length)>0&&e.jsx(C,{size:"small",onClick:()=>i([],"replace"),children:"Reset filters"})]}),children:[!l&&e.jsxs(I,{direction:"vertical",size:16,style:{padding:16},children:[e.jsx(p,{children:"No quotes yet"}),e.jsxs(Qt,{to:s("quotes"),children:[e.jsx(Ie,{style:{marginRight:4}})," ","Add quotes"]})]}),l&&e.jsxs(E,{...r,rowKey:"id",pagination:{...r.pagination,showSizeChanger:!1},children:[e.jsx(E.Column,{title:"Quote Title",dataIndex:"title",filterIcon:e.jsx(ge,{}),filterDropdown:m=>e.jsx(V,{...m,children:e.jsx(w,{placeholder:"Search Title"})})}),e.jsx(E.Column,{title:"Total amount",dataIndex:"total",sorter:!0,render:(m,c)=>e.jsx(p,{children:K(c.total||0)})}),e.jsx(E.Column,{title:"Stage",dataIndex:"status",render:(m,c)=>c.status?e.jsx(Pn,{status:c.status}):null,filterDropdown:m=>e.jsx(V,{...m,children:e.jsx($,{style:{width:"200px"},mode:"multiple",placeholder:"Select Stage",options:Yo})})}),e.jsx(E.Column,{dataIndex:["salesOwner","id"],title:"Participants",render:(m,c)=>e.jsx(Ms,{userOne:c.salesOwner,userTwo:c.contact}),filterDropdown:m=>e.jsx(V,{...m,children:e.jsx($,{style:{width:"200px"},placeholder:"Select Sales Owner",...o})})}),e.jsx(E.Column,{dataIndex:"id",width:48,render:m=>e.jsx(Gt,{recordItemId:m,hideText:!0,size:"small",resource:"contacts",icon:e.jsx(Ns,{})})})]})," "]})},Yo=[{label:"Draft",value:"DRAFT"},{label:"Sent",value:"SENT"},{label:"Accepted",value:"ACCEPTED"}],Wo=T`
    query ContactsSelect(
        $filter: ContactFilter!
        $sorting: [ContactSort!]
        $paging: OffsetPaging!
    ) {
        contacts(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                name
                avatarUrl
            }
        }
    }
`,Qs=t=>{const{filters:s}=t||{};return qe({resource:"contacts",optionLabel:"name",filters:s,meta:{gqlQuery:Wo}})},Ho=({tableProps:t,filters:s})=>{const{selectProps:n}=je(),{selectProps:r}=Qs();return e.jsxs(E,{...t,pagination:{...t.pagination,pageSizeOptions:["12","24","48","96"],showTotal:a=>e.jsx(ut,{total:a,entityName:"companies"})},rowKey:"id",children:[e.jsx(E.Column,{dataIndex:"name",title:"Company title",defaultFilteredValue:ie("id",s),filterIcon:e.jsx(ge,{}),filterDropdown:a=>e.jsx(V,{...a,children:e.jsx(w,{placeholder:"Search Company"})}),render:(a,i)=>e.jsxs(I,{children:[e.jsx(L,{shape:"square",name:i.name,src:i.avatarUrl}),e.jsx(p,{style:{whiteSpace:"nowrap"},children:i.name})]})}),e.jsx(E.Column,{dataIndex:["salesOwner","id"],title:"Sales Owner",defaultFilteredValue:ie("salesOwner.id",s),filterDropdown:a=>e.jsx(V,{...a,children:e.jsx($,{placeholder:"Search Sales owner",style:{width:220},...n})}),render:(a,i)=>{const o=i.salesOwner;return e.jsxs(I,{children:[e.jsx(L,{name:o.name,src:o.avatarUrl}),e.jsx(p,{style:{whiteSpace:"nowrap"},children:o.name})]})}}),e.jsx(E.Column,{dataIndex:"totalRevenue",title:"Open deals amount",render:(a,i)=>{var o,u;return e.jsx(p,{children:K(((u=(o=i==null?void 0:i.dealsAggregate)==null?void 0:o[0].sum)==null?void 0:u.value)||0)})}}),e.jsx(E.Column,{dataIndex:["contacts","id"],title:"Related Contacts",defaultFilteredValue:ie("contacts.id",s,"in"),filterDropdown:a=>e.jsx(V,{...a,children:e.jsx($,{mode:"multiple",placeholder:"Search related contacts",style:{width:220},...r})}),render:(a,i)=>{var l;const o=i.contacts,u=(l=o==null?void 0:o.nodes)==null?void 0:l.map(d=>({name:d.name,src:d.avatarUrl}));return e.jsx(Ln,{avatars:u,size:"small"})}}),e.jsx(E.Column,{fixed:"right",dataIndex:"id",title:"Actions",render:a=>e.jsxs(I,{children:[e.jsx(Ht,{icon:e.jsx(It,{}),hideText:!0,size:"small",recordItemId:a}),e.jsx(Ge,{hideText:!0,size:"small",recordItemId:a})]})})]})},Go=T`
    mutation CompanyTitleForm($input: UpdateOneCompanyInput!) {
        updateOneCompany(input: $input) {
            id
            name
            avatarUrl
            salesOwner {
                id
                name
                avatarUrl
            }
        }
    }
`,Ko=T`
    query CompanyTitle($id: ID!) {
        company(id: $id) {
            id
            name
            createdAt
            avatarUrl
            salesOwner {
                id
                name
                avatarUrl
            }
        }
    }
`,Zo="_title_namk9_1",Xo="_titleEditIcon_namk9_6",Jo="_salesOwnerInput_namk9_17",el="_salesOwnerInputEditIcon_namk9_22",qt={title:Zo,titleEditIcon:Xo,salesOwnerInput:Jo,salesOwnerInputEditIcon:el},tl=()=>{var i;const{formProps:t,queryResult:s,onFinish:n}=X({redirect:!1,meta:{gqlMutation:Go,gqlQuery:Ko}}),r=(i=s==null?void 0:s.data)==null?void 0:i.data,a=s==null?void 0:s.isLoading;return e.jsx(g,{...t,children:e.jsxs(I,{size:16,children:[e.jsx(L,{size:"large",shape:"square",src:r==null?void 0:r.avatarUrl,name:Dn((r==null?void 0:r.name)||""),style:{width:96,height:96,fontSize:48,display:"flex",alignItems:"center",justifyContent:"center",border:"none"}}),e.jsxs(I,{direction:"vertical",size:0,children:[e.jsx(g.Item,{name:"name",required:!0,noStyle:!0,children:e.jsx(sl,{loading:a,onChange:o=>n==null?void 0:n({name:o})})}),e.jsx(nl,{salesOwner:r==null?void 0:r.salesOwner,loading:a,onChange:o=>{n==null||n({salesOwnerId:o})}})]})]})})},sl=({value:t,onChange:s,loading:n})=>e.jsx(p,{className:qt.title,size:"xl",strong:!0,editable:{onChange:s,triggerType:["text","icon"],icon:e.jsx(Ne,{className:qt.titleEditIcon})},children:n?e.jsx(N.Input,{size:"small",style:{width:200},active:!0}):t}),nl=({salesOwner:t,onChange:s,loading:n})=>{var u,l;const[r,a]=S.useState(!1),{selectProps:i,queryResult:o}=je();return e.jsxs("div",{className:qt.salesOwnerInput,role:"button",onClick:()=>{a(!0)},children:[e.jsx(p,{type:"secondary",style:{marginRight:12},children:"Sales Owner:"}),n&&e.jsx(N.Input,{size:"small",style:{width:120},active:!0}),!r&&!n&&e.jsxs(e.Fragment,{children:[e.jsx(L,{size:"small",src:t==null?void 0:t.avatarUrl,style:{marginRight:4}}),e.jsx(p,{children:t==null?void 0:t.name}),e.jsx(C,{type:"link",icon:e.jsx(Ne,{className:qt.salesOwnerInputEditIcon})})]}),r&&!n&&e.jsx(g.Item,{name:["salesOwner","id"],noStyle:!0,children:e.jsx($,{...i,defaultOpen:!0,autoFocus:!0,onDropdownVisibleChange:d=>{d||a(!1)},onClick:d=>{d.stopPropagation()},onChange:(d,m)=>{var c;s==null||s(d),(c=i.onChange)==null||c.call(i,d,m)},options:((l=(u=o.data)==null?void 0:u.data)==null?void 0:l.map(({id:d,name:m,avatarUrl:c})=>({value:d,label:e.jsx(ve,{name:m,avatarUrl:c??void 0})})))??[]})})]})},al=()=>e.jsxs("div",{className:"page-container",children:[e.jsx(tl,{}),e.jsxs(ee,{gutter:[32,32],style:{marginTop:32},children:[e.jsxs(F,{span:16,children:[e.jsx(Do,{}),e.jsx(Fo,{style:{marginTop:32}}),e.jsx(Vo,{style:{marginTop:32}}),e.jsx(Ro,{style:{marginTop:32}})]}),e.jsx(F,{span:8,children:e.jsx(Lo,{})})]})]}),rl=({children:t})=>{const[s,n]=S.useState("card"),r=Ze.useBreakpoint(),{tableProps:a,tableQueryResult:i,searchFormProps:o,filters:u,sorters:l,setCurrent:d,setPageSize:m,setFilters:c}=ze({resource:"companies",onSearch:f=>[{field:"name",operator:"contains",value:f.name}],sorters:{initial:[{field:"createdAt",order:"desc"}]},filters:{initial:[{field:"name",operator:"contains",value:void 0},{field:"contacts.id",operator:"in",value:void 0}]},pagination:{pageSize:12},meta:{gqlQuery:Co}}),x=f=>{var y;n(f),c([],"replace"),(y=o.form)==null||y.resetFields()},j=Ds(f=>{var y;(y=o==null?void 0:o.onFinish)==null||y.call(o,{name:f.target.value??""})},500);return e.jsxs("div",{className:"page-container",children:[e.jsx(Yt,{breadcrumb:!1,headerButtons:()=>e.jsxs(I,{style:{marginTop:r.xs?"1.6rem":void 0},children:[e.jsx(g,{...o,layout:"inline",children:e.jsx(g.Item,{name:"name",noStyle:!0,children:e.jsx(w,{size:"large",prefix:e.jsx(ge,{className:"anticon tertiary"}),suffix:e.jsx(Ce,{size:"small",spinning:i.isFetching}),placeholder:"Search by name",onChange:j})})}),r.xs?null:e.jsxs(J.Group,{size:"large",value:s,onChange:f=>x(f.target.value),children:[e.jsx(J.Button,{value:"table",children:e.jsx(ft,{})}),e.jsx(J.Button,{value:"card",children:e.jsx(Cn,{})})]})]}),contentProps:{style:{marginTop:"28px"}},title:e.jsx(zs,{toPath:"companies",buttonText:"Add new company"}),children:s==="table"?e.jsx(Ho,{tableProps:a,filters:u,sorters:l}):e.jsx(bo,{tableProps:a,setPageSize:m,setCurrent:d})}),t]})},il=T`
    query CompaniesSelect(
        $filter: CompanyFilter!
        $sorting: [CompanySort!]
        $paging: OffsetPaging!
    ) {
        companies(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                name
                avatarUrl
            }
        }
    }
`,At=()=>qe({resource:"companies",optionLabel:"name",meta:{gqlQuery:il}}),ol=({children:t})=>{var x,h;const{list:s,replace:n}=R(),{pathname:r}=kt(),{data:a}=Ee(),[i]=lt(),{formProps:o,saveButtonProps:u,onFinish:l}=X({redirect:"list"}),{selectProps:d,queryResult:m}=At();S.useEffect(()=>{var f;const j=i.get("companyId");j&&j!=="null"&&((f=o.form)==null||f.setFieldsValue({companyId:j}))},[i]);const c=r==="/contacts/create/company-create";return e.jsxs(e.Fragment,{children:[e.jsx(oe,{open:!0,title:"Create Contact",style:{display:c?"none":"inherit"},onCancel:()=>{s("contacts","replace")},okText:"Save",okButtonProps:{...u},width:560,children:e.jsxs(g,{layout:"vertical",...o,onFinish:j=>{l({...j,salesOwnerId:a==null?void 0:a.id})},children:[e.jsx(g.Item,{label:"Contact Name",name:"name",rules:[{required:!0}],children:e.jsx(w,{})}),e.jsx(g.Item,{label:"Email",name:"email",rules:[{required:!0}],children:e.jsx(w,{})}),e.jsx(g.Item,{label:"Company",name:"companyId",rules:[{required:!0}],help:e.jsx(C,{style:{paddingLeft:0},type:"link",icon:e.jsx(Ie,{}),onClick:()=>{n("company-create?to=/contacts/create")},children:"Add new company"}),children:e.jsx($,{...d,options:((h=(x=m.data)==null?void 0:x.data)==null?void 0:h.map(({id:j,name:f,avatarUrl:y})=>({value:j,label:e.jsx(ve,{name:f,avatarUrl:y??void 0})})))??[]})})]})}),t]})},ll="_container_e6vks_1",cl="_dropdown_e6vks_10",dl="_personal_e6vks_16",ul="_company_e6vks_28",Ve={container:ll,dropdown:cl,personal:dl,company:ul},Mn=()=>e.jsx(B,{size:"small",actions:[e.jsxs("div",{style:{width:"100%",height:"60px",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",padding:"0 16px"},children:[e.jsx(N.Button,{active:!0,style:{width:"200px",height:"16px"}}),e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center",alignItems:"center"},children:[e.jsx(N.Avatar,{active:!0,shape:"square",size:"small",style:{borderRadius:"4px"}}),e.jsx(N.Button,{active:!0,style:{height:"16px",marginTop:"4px",width:"100px"}})]})]},1)],children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},children:[e.jsx(N.Avatar,{active:!0,shape:"circle",style:{width:"64px",height:"64px"}}),e.jsx(N.Input,{active:!0,style:{width:"100px",height:"12px",marginTop:"14px"}}),e.jsxs(I,{direction:"vertical",size:0,style:{marginTop:"4px",marginBottom:"2px",alignItems:"center"},children:[e.jsx(N.Input,{active:!0,style:{width:"200px",height:"16px",marginTop:"12px"}}),e.jsx(N.Button,{active:!0,style:{width:"80px",height:"22px",marginTop:"8px"}})]})]})}),ml=({contact:t})=>{const{show:s}=R(),{mutate:n}=Me();if(!t)return e.jsx(Mn,{});const{name:r,email:a,status:i,jobTitle:o,company:u,avatarUrl:l,id:d}=t,m=[{label:"Show",key:"show",icon:e.jsx(It,{}),onClick:()=>{s("contacts",d,"replace")}},{label:"Delete",key:"delete",danger:!0,icon:e.jsx(pe,{}),onClick:()=>{n({resource:"contacts",id:d})}}];return e.jsxs("div",{className:Ve.container,children:[e.jsx(Fe,{className:Ve.dropdown,menu:{items:m},trigger:["click"],children:e.jsx(C,{type:"text",icon:e.jsx(qa,{})})}),e.jsxs("div",{className:Ve.personal,children:[e.jsx(L,{size:64,src:l,name:r}),e.jsx(p,{className:Ve.name,strong:!0,ellipsis:{tooltip:!0},children:r}),e.jsx(p,{ellipsis:{tooltip:!0},className:Ve.email,children:a}),e.jsx(qs,{status:i})]}),e.jsxs("div",{className:Ve.company,children:[e.jsx(p,{ellipsis:{tooltip:!0},children:o&&`${o} at`||e.jsx("span",{children:""})}),e.jsx("div",{className:Ve.companyName,children:e.jsxs(p,{strong:!0,ellipsis:{tooltip:!0},children:[e.jsx(L,{src:u.avatarUrl,name:u.name,shape:"square",style:{display:"inline-flex",marginRight:8}}),u.name]})})]})]})},pl=({tableProps:{dataSource:t,pagination:s,loading:n},setCurrent:r,setPageSize:a})=>{const i=S.useMemo(()=>[...t||[]],[t]);return e.jsx(fe,{grid:{gutter:32,column:4,xs:1,sm:1,md:2,lg:2,xl:4},dataSource:i,renderItem:o=>e.jsx(fe.Item,{children:e.jsx(ml,{contact:o})}),pagination:{...s,hideOnSinglePage:!0,itemRender:void 0,position:"bottom",style:{display:"flex",marginTop:"1rem"},pageSizeOptions:["12","24","48"],onChange:(o,u)=>{r(o),a(u)},showTotal:o=>e.jsx(ut,{total:o,entityName:"contacts"})},children:n?e.jsx(fe,{grid:{gutter:32,column:4,xs:1,sm:1,md:2,lg:2,xl:4},dataSource:Array.from({length:12}).map((o,u)=>({id:u})),renderItem:()=>e.jsx(fe.Item,{children:e.jsx(Mn,{})})}):void 0})},xl=T`
    mutation ContactsCreateContactNote($input: CreateOneContactNoteInput!) {
        createOneContactNote(input: $input) {
            id
            note
        }
    }
`,gl=T`
    mutation ContactsUpdateContactNote($input: UpdateOneContactNoteInput!) {
        updateOneContactNote(input: $input) {
            id
            note
        }
    }
`,hl=T`
    query ContactsContactNotesList(
        $filter: ContactNoteFilter!
        $sorting: [ContactNoteSort!]
        $paging: OffsetPaging!
    ) {
        contactNotes(filter: $filter, sorting: $sorting, paging: $paging) {
            totalCount
            nodes {
                id
                note
                createdAt
                createdBy {
                    id
                    name
                    avatarUrl
                }
            }
        }
    }
`,jl=()=>{const{id:t}=vt(),{data:s}=Ee(),{formProps:n,onFinish:r,form:a,formLoading:i}=X({action:"create",resource:"contactNotes",queryOptions:{enabled:!1},meta:{gqlMutation:xl},redirect:!1,mutationMode:"optimistic",successNotification:()=>({key:"contact-note",message:"Successfully added note",description:"Successful",type:"success"})}),o=async u=>{if(!(!t||!u.note.trim()))try{await r({...u,contactId:t}),a.resetFields()}catch{}};return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"1rem",borderBottom:"1px solid #F0F0F0"},children:[e.jsx(L,{style:{flexShrink:0},name:s==null?void 0:s.name,src:s==null?void 0:s.avatarUrl}),e.jsx(g,{...n,style:{width:"100%"},onFinish:o,children:e.jsx(g.Item,{name:"note",noStyle:!0,rules:[{required:!0,transform(u){return u==null?void 0:u.trim()},message:"Please enter a note"}],children:e.jsx(w,{placeholder:"Add your note",style:{backgroundColor:"#fff"},addonAfter:i&&e.jsx(Os,{})})})})]})},fl=({item:t})=>{const s=he(),{formProps:n,setId:r,id:a,saveButtonProps:i}=X({resource:"contactNotes",action:"edit",queryOptions:{enabled:!1},mutationMode:"optimistic",onMutationSuccess:()=>{r(void 0),s({invalidates:["list"],resource:"contactNotes"})},successNotification:()=>({key:"contact-note",message:"Successfully updated note",description:"Successful",type:"success"}),meta:{gqlMutation:gl}}),{data:o}=Ee(),u=(o==null?void 0:o.id)===t.createdBy.id;return e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx(L,{style:{flexShrink:0},name:t.createdBy.name,src:t.createdBy.avatarUrl}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(p,{style:{fontWeight:500},children:t.createdBy.name}),e.jsx(p,{size:"xs",style:{color:"#000000a6"},children:A(t.createdAt).format("MMMM D, YYYY - h:ma")})]}),a===t.id?e.jsx(g,{...n,initialValues:{note:t.note},children:e.jsx(g.Item,{name:"note",rules:[{required:!0,transform(l){return l==null?void 0:l.trim()},message:"Please enter a note"}],children:e.jsx(w.TextArea,{autoFocus:!0,style:{backgroundColor:"#fff",width:"100%"}})})}):e.jsx(W.Paragraph,{style:{background:"#fff",borderRadius:"6px",padding:"8px",marginBottom:0},ellipsis:{rows:3,expandable:!0},children:t.note}),u&&!a&&e.jsxs(I,{size:16,children:[e.jsx(W.Link,{style:{color:"inherit",fontSize:"12px"},onClick:()=>r(t.id),children:"Edit"}),e.jsx(Ge,{recordItemId:t.id,resource:"contactNotes",size:"small",type:"link",successNotification:()=>({key:"contact-delete-note",message:"Successfully deleted note",description:"Successful",type:"success"}),icon:null,style:{padding:0,fontSize:"12px",color:"inherit"}})]}),a&&e.jsxs(I,{children:[e.jsx(C,{size:"small",onClick:()=>r(void 0),children:"Cancel"}),e.jsx(C,{size:"small",type:"primary",...i,children:"Save"})]})]})]})},yl=()=>{var n;const{id:t}=vt(),{data:s}=te({resource:"contactNotes",filters:[{field:"contact.id",operator:"eq",value:t}],sorters:[{field:"createdAt",order:"desc"}],pagination:{mode:"off"},meta:{gqlQuery:hl}});return e.jsx(I,{size:16,direction:"vertical",style:{backgroundColor:"#FAFAFA",padding:"1rem",width:"100%"},children:(n=s==null?void 0:s.data)==null?void 0:n.map(r=>e.jsx(fl,{item:r},r.id))})},vl=()=>e.jsxs(e.Fragment,{children:[e.jsx(jl,{}),e.jsx(yl,{})]}),Cl="_container_5x8dx_1",Sl="_item_5x8dx_10",bl="_arrow_5x8dx_24",Il="_NEW_5x8dx_35",Tl="_CONTACTED_5x8dx_36",_l="_INTERESTED_5x8dx_37",wl="_QUALIFIED_5x8dx_44",kl="_NEGOTIATION_5x8dx_45",Al="_WON_5x8dx_52",El="_UNQUALIFIED_5x8dx_59",Nl="_LOST_5x8dx_60",Ol="_CHURNED_5x8dx_61",Dl="_active_5x8dx_68",ne={container:Cl,item:Sl,arrow:bl,NEW:Il,CONTACTED:Tl,INTERESTED:_l,QUALIFIED:wl,NEGOTIATION:kl,WON:Al,UNQUALIFIED:El,LOST:Nl,CHURNED:Ol,active:Dl},qn=t=>{let s=$e.CUSTOMER;switch(t){case U.NEW:case U.CONTACTED:case U.INTERESTED:s=$e.LEAD;break;case U.QUALIFIED:case U.NEGOTIATION:s=$e.SALES_QUALIFIED_LEAD;break;case U.UNQUALIFIED:s=$e.LEAD;break;case U.LOST:s=$e.SALES_QUALIFIED_LEAD;break;case U.WON:s=$e.CUSTOMER;break;case U.CHURNED:s=$e.CUSTOMER;break}return s},Pl=({status:t})=>{const s=qn(t);let n=e.jsx(Lt,{style:{color:"#08979C"}});switch(t){case U.WON:n=e.jsx(Ba,{style:{color:"#389E0D"}});break;case U.CHURNED:n=e.jsx(Ra,{style:{color:"#CF1322"}});break;case U.LOST:n=e.jsx(js,{style:{color:"#CF1322"}});break;case U.UNQUALIFIED:n=e.jsx(Lt,{style:{color:"#CF1322"}});break}return e.jsxs(p,{strong:!0,children:["Lifecycle stage: ",n,e.jsx(p,{style:{marginLeft:".2rem",textTransform:"capitalize",fontWeight:"normal"},children:s.replaceAll("_"," ").toLowerCase()})]})},$l=({contact:t})=>{const{mutate:s}=ct(),{status:n}=t,r=a=>{const i=qn(a);s({resource:"contacts",mutationMode:"optimistic",id:t.id,values:{status:a,stage:i}})};return e.jsxs("div",{children:[e.jsx(Pl,{status:n}),e.jsxs("ul",{className:`${ne.container} ${ne[n]}`,style:{marginTop:"1rem"},children:[e.jsx("li",{className:`${ne.item} ${n===U.NEW?ne.active:""}`,children:e.jsx("a",{onClick:()=>{r(U.NEW)},children:"New"})}),e.jsx("li",{className:`${ne.item} ${n===U.CONTACTED?ne.active:""}
            }`,children:e.jsx("a",{onClick:()=>{r(U.CONTACTED)},children:"Contacted"})}),e.jsx("li",{className:`${ne.item} ${n===U.INTERESTED||n===U.UNQUALIFIED?ne.active:""}`,children:e.jsx(Fe,{arrow:!0,trigger:["click"],placement:"bottomRight",menu:{onClick:({key:a})=>{r(a)},items:[{label:"Interested",key:U.INTERESTED},{label:"Unqualified",key:U.UNQUALIFIED,danger:!0}]},children:e.jsxs("a",{children:[n===U.UNQUALIFIED?"Unqualified":"Interested",e.jsx(cs,{className:ne.arrow})]})})}),e.jsx("li",{className:`${ne.item} ${n===U.QUALIFIED?ne.active:""}`,children:e.jsx("a",{onClick:()=>{r(U.QUALIFIED)},children:"Qualified"})}),e.jsx("li",{className:`${ne.item} ${n===U.NEGOTIATION||n===U.LOST?ne.active:""}`,children:e.jsx(Fe,{arrow:!0,trigger:["click"],placement:"bottomRight",menu:{onClick:({key:a})=>{r(a)},items:[{label:"Negotiation",key:U.NEGOTIATION},{label:"Lost",key:U.LOST,danger:!0}]},children:e.jsxs("a",{children:[n===U.LOST?"Lost":"Negotiation",e.jsx(cs,{className:ne.arrow})]})})}),e.jsx("li",{className:`${ne.item} ${n===U.WON||n===U.CHURNED?ne.active:""}`,children:e.jsx(Fe,{arrow:!0,trigger:["click"],placement:"bottomRight",menu:{onClick:({key:a})=>{r(a)},items:[{label:"Won",key:U.WON},{label:"Churned",key:U.CHURNED,danger:!0}]},children:e.jsxs("a",{children:[n===U.CHURNED?"Churned":"Won",e.jsx(cs,{className:ne.arrow})]})})})]})]})},Ul=Object.keys(U).map(t=>({label:`${t[0]}${t.slice(1).toLowerCase()}`,value:U[t]})),Fl=({tableProps:t,filters:s,sorters:n})=>{const{selectProps:r}=At();return e.jsxs(E,{...t,pagination:{...t.pagination,pageSizeOptions:["12","24","48","96"],showTotal:a=>e.jsx(ut,{total:a,entityName:"contacts"})},rowKey:"id",children:[e.jsx(E.Column,{dataIndex:"name",title:"Name",width:200,defaultFilteredValue:ie("name",s),defaultSortOrder:st("name",n),filterDropdown:a=>e.jsx(V,{...a,children:e.jsx(w,{placeholder:"Search Name"})}),render:(a,i)=>e.jsxs(I,{children:[e.jsx(L,{src:i.avatarUrl,name:i.name}),e.jsx(p,{children:i.name})]})}),e.jsx(E.Column,{dataIndex:"email",title:"Email",defaultFilteredValue:ie("email",s),defaultSortOrder:st("email",n),filterDropdown:a=>e.jsx(V,{...a,children:e.jsx(w,{placeholder:"Search Email"})})}),e.jsx(E.Column,{dataIndex:["company","id"],title:"Company",defaultFilteredValue:ie("company.id",s),defaultSortOrder:st("company.id",n),filterDropdown:a=>e.jsx(V,{...a,children:e.jsx($,{placeholder:"Search Company",style:{width:220},...r})}),render:(a,i)=>e.jsx("span",{children:i==null?void 0:i.company.name})}),e.jsx(E.Column,{dataIndex:"jobTitle",title:"Title",filterDropdown:a=>e.jsx(V,{...a,children:e.jsx(w,{placeholder:"Search Title"})})}),e.jsx(E.Column,{dataIndex:"status",title:"Status",sorter:!0,defaultFilteredValue:ie("status",s),defaultSortOrder:st("status",n),filterDropdown:a=>e.jsx(V,{...a,children:e.jsx($,{style:{width:"200px"},defaultValue:null,mode:"multiple",options:Ul})}),render:a=>e.jsx(qs,{status:a})}),e.jsx(E.Column,{fixed:"right",title:"Actions",dataIndex:"actions",render:(a,i)=>e.jsxs(I,{children:[e.jsx(Gt,{hideText:!0,size:"small",recordItemId:i.id}),e.jsx(C,{size:"small",href:"tel:1234567890",icon:e.jsx(bt,{})}),e.jsx(Ge,{hideText:!0,size:"small",recordItemId:i.id})]})})]})},Ll=T`
    query ContactsList(
        $filter: ContactFilter!
        $sorting: [ContactSort!]
        $paging: OffsetPaging!
    ) {
        contacts(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                name
                email
                company {
                    id
                    name
                    avatarUrl
                }
                jobTitle
                status
                avatarUrl
            }
            totalCount
        }
    }
`,zl=({children:t})=>{const[s,n]=S.useState("table"),r=Ze.useBreakpoint(),{tableProps:a,searchFormProps:i,setCurrent:o,setPageSize:u,filters:l,sorters:d,setFilters:m,tableQueryResult:c}=ze({pagination:{pageSize:12},sorters:{initial:[{field:"createdAt",order:"asc"}]},filters:{initial:[{field:"name",value:void 0,operator:"contains"},{field:"email",value:void 0,operator:"contains"},{field:"company.id",value:void 0,operator:"eq"},{field:"jobTitle",value:void 0,operator:"contains"},{field:"status",value:void 0,operator:"in"}]},onSearch:f=>[{field:"name",operator:"contains",value:f.name}],meta:{gqlQuery:Ll}}),x=f=>{var y;n(f),m([],"replace"),(y=i.form)==null||y.resetFields()},j=Ds(f=>{var y;(y=i==null?void 0:i.onFinish)==null||y.call(i,{name:f.target.value})},500);return e.jsx("div",{className:"page-container",children:e.jsxs(Yt,{breadcrumb:!1,headerButtons:()=>e.jsxs(I,{style:{marginTop:r.xs?"1.6rem":void 0},children:[e.jsx(g,{...i,layout:"inline",children:e.jsx(g.Item,{name:"name",noStyle:!0,children:e.jsx(w,{size:"large",prefix:e.jsx(ge,{className:"anticon tertiary"}),suffix:e.jsx(Ce,{size:"small",spinning:c.isFetching}),placeholder:"Search by name",onChange:j})})}),r.xs?null:e.jsxs(J.Group,{size:"large",value:s,onChange:f=>x(f.target.value),children:[e.jsx(J.Button,{value:"table",children:e.jsx(ft,{})}),e.jsx(J.Button,{value:"card",children:e.jsx(Cn,{})})]})]}),contentProps:{style:{marginTop:"28px"}},title:e.jsx(zs,{toPath:"contacts",buttonText:"Add new contact"}),children:[r.xs||s==="card"?e.jsx(pl,{tableProps:a,setPageSize:u,setCurrent:o}):e.jsx(Fl,{tableProps:a,filters:l,sorters:d}),t]})})},Ml="_header_ai9gn_1",ql="_container_ai9gn_9",Rl="_title_ai9gn_12",Bl="_titleEditIcon_ai9gn_17",Ql="_name_ai9gn_31",Vl="_form_ai9gn_38",Yl="_stage_ai9gn_44",Wl="_actions_ai9gn_49",Pe={header:Ml,container:ql,title:Rl,titleEditIcon:Bl,name:Ql,form:Vl,stage:Yl,actions:Wl},Hl=T`
    query ContactShow($id: ID!) {
        contact(id: $id) {
            id
            name
            email
            company {
                id
                name
                avatarUrl
            }
            status
            jobTitle
            phone
            timezone
            avatarUrl
            salesOwner {
                id
                name
                avatarUrl
            }
            createdAt
        }
    }
`,Gl=Object.keys(Ye).map(t=>({label:Ye[t],value:Ye[t]})),Kl=()=>{var k,P,q,Z;const[t,s]=S.useState(),{list:n}=R(),{mutate:r}=ct(),{mutate:a}=Me(),{queryResult:i}=Wt({meta:{gqlQuery:Hl}}),{selectProps:o,queryResult:u}=At(),{selectProps:l,queryResult:d}=je(),m=()=>{s(void 0),n("contacts")},{data:c,isLoading:x,isError:h}=i;if(h)return m(),null;if(x)return e.jsx(it,{open:!0,width:756,bodyStyle:{background:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ce,{})});const{id:j,name:f,email:y,jobTitle:_,phone:D,timezone:M,avatarUrl:G,company:Y,createdAt:z,salesOwner:b}=(c==null?void 0:c.data)??{};return e.jsxs(it,{open:!0,onClose:()=>m(),width:756,bodyStyle:{background:"#f5f5f5",padding:0},headerStyle:{display:"none"},children:[e.jsx("div",{className:Pe.header,children:e.jsx(C,{type:"text",icon:e.jsx(As,{}),onClick:()=>m()})}),e.jsxs("div",{className:Pe.container,children:[e.jsxs("div",{className:Pe.name,children:[e.jsx(L,{style:{marginRight:"1rem",flexShrink:0,fontSize:"40px"},size:96,src:G,name:f}),e.jsx(W.Title,{level:3,style:{padding:0,margin:0,width:"100%"},className:Pe.title,editable:{onChange(H){r({resource:"contacts",id:j,values:{name:H},successNotification:!1})},triggerType:["text","icon"],icon:e.jsx(Ne,{className:Pe.titleEditIcon})},children:f})]}),e.jsxs("div",{className:Pe.form,children:[e.jsx(ce,{icon:e.jsx(Ke,{className:"tertiary"}),state:t&&t==="email"?"form":y?"view":"empty",itemProps:{name:"email",label:"Email"},view:e.jsx(p,{children:y}),onClick:()=>s("email"),onUpdate:()=>s(void 0),onCancel:()=>s(void 0),children:e.jsx(w,{defaultValue:y})}),e.jsx(ce,{icon:e.jsx(Ct,{className:"tertiary"}),state:t&&t==="companyId"?"form":Y.id?"view":"empty",itemProps:{name:"companyId",label:"Company"},view:e.jsxs(I,{children:[e.jsx(L,{src:Y.avatarUrl,name:Y.name}),e.jsx(p,{children:Y.name})]}),onClick:()=>s("companyId"),onCancel:()=>s(void 0),onUpdate:()=>{s(void 0)},extra:e.jsx(g.Item,{name:"salesOwnerId",label:"Sales Owner",labelCol:{style:{marginTop:"0.8rem"}},children:e.jsx($,{style:{width:"100%"},defaultValue:{label:b.name,value:b.id},...l,options:((P=(k=d.data)==null?void 0:k.data)==null?void 0:P.map(({id:H,name:re,avatarUrl:le})=>({value:H,label:e.jsx(ve,{name:re,avatarUrl:le??void 0})})))??[]})}),children:e.jsx($,{style:{width:"100%"},defaultValue:{label:c.data.company.name,value:c.data.company.id},...o,options:((Z=(q=u.data)==null?void 0:q.data)==null?void 0:Z.map(({id:H,name:re,avatarUrl:le})=>({value:H,label:e.jsx(ve,{name:re,avatarUrl:le??void 0})})))??[]})}),e.jsx(ce,{icon:e.jsx(gn,{className:"tertiary"}),state:t&&t==="jobTitle"?"form":_?"view":"empty",itemProps:{name:"jobTitle",label:"Title"},view:e.jsx(p,{children:_}),onClick:()=>s("jobTitle"),onUpdate:()=>s(void 0),onCancel:()=>s(void 0),children:e.jsx(w,{defaultValue:_||""})}),e.jsx(ce,{icon:e.jsx(bt,{className:"tertiary"}),state:t&&t==="phone"?"form":D?"view":"empty",itemProps:{name:"phone",label:"Phone"},view:e.jsx(p,{children:D}),onClick:()=>s("phone"),onUpdate:()=>s(void 0),onCancel:()=>s(void 0),children:e.jsx(w,{defaultValue:D||""})}),e.jsx(ce,{style:{borderBottom:"none"},icon:e.jsx(Jt,{className:"tertiary"}),state:t&&t==="timezone"?"form":M?"view":"empty",itemProps:{name:"timezone",label:"TimezoneEnum"},view:e.jsx(p,{children:M}),onClick:()=>s("timezone"),onUpdate:()=>s(void 0),onCancel:()=>s(void 0),children:e.jsx($,{style:{width:"100%"},options:Gl,defaultValue:c.data.timezone})})]}),e.jsx("div",{className:Pe.stage,children:e.jsx($l,{contact:c.data})}),e.jsx(B,{title:e.jsxs(e.Fragment,{children:[e.jsx(Ls,{}),e.jsx(p,{style:{marginLeft:".8rem"},children:"Notes"})]}),bodyStyle:{padding:0},children:e.jsx(vl,{})}),e.jsxs("div",{className:Pe.actions,children:[e.jsxs(p,{className:"ant-text tertiary",children:["Created on: ",A(z).format("MMMM DD, YYYY")]}),e.jsx(_n,{title:"Delete the contact",description:"Are you sure to delete this contact?",onConfirm:()=>{a({id:j,resource:"contacts"},{onSuccess:()=>m()})},okText:"Yes",cancelText:"No",children:e.jsx(C,{type:"link",danger:!0,icon:e.jsx(pe,{}),children:"Delete Contact"})})]})]})]})},Zl=[{id:1,name:"United States",shortName:"US",flag:"https://upload.wikimedia.org/wikipedia/commons/a/a9/Flag_of_the_United_States_%28DoS_ECA_Color_Standard%29.svg",count:24},{id:2,name:"Germany",shortName:"DE",flag:"https://upload.wikimedia.org/wikipedia/commons/b/ba/Flag_of_Germany.svg",count:18},{id:3,name:"United Kingdom",shortName:"UK",flag:"https://upload.wikimedia.org/wikipedia/commons/a/a5/Flag_of_the_United_Kingdom_%281-2%29.svg",count:6},{id:4,name:"Canada",flag:"https://upload.wikimedia.org/wikipedia/commons/d/d9/Flag_of_Canada_%28Pantone%29.svg",count:4},{id:5,name:"Spain",shortName:"ES",flag:"https://upload.wikimedia.org/wikipedia/commons/8/89/Bandera_de_Espa%C3%B1a.svg",count:3},{id:6,name:"France",shortName:"FR",flag:"http://upload.turkcewiki.org/wikipedia/commons/9/93/Flag_of_France_%281794%E2%80%931815%2C_1830%E2%80%931974%29.svg",count:2}],Xl="_countries_x7hn0_1",Jl="_item_x7hn0_11",ec="_flag_x7hn0_20",ms={countries:Xl,item:Jl,flag:ec},tc=S.lazy(()=>De(()=>import("./map-9a26d647.js"),["assets/map-9a26d647.js","assets/react-f83171f6.js","assets/@algolia-6bb98d1b.js","assets/react-leaflet-cluster-14b37f8b.js","assets/@react-leaflet-0cb78c77.js","assets/react-dom-e9b5ed0c.js","assets/leaflet-f9c7aa0e.js","assets/leaflet-4d8e306f.css","assets/leaflet.markercluster-f3ff14cb.js","assets/react-leaflet-cluster-0069d45a.css","assets/react-leaflet-799ff92f.js"])),sc=()=>{const{list:t}=R();return e.jsxs(B,{style:{height:"100%"},bodyStyle:{padding:0,overflow:"hidden"},title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Jt,{}),e.jsx(p,{size:"sm",style:{marginLeft:".5rem"},children:"Companies"})]}),extra:e.jsx(C,{onClick:()=>t("companies"),icon:e.jsx(Xt,{}),children:"See all companies"}),children:[e.jsx("div",{style:{height:"318px",marginTop:"2px",position:"relative"},children:e.jsx(S.Suspense,{children:e.jsx(tc,{})})}),e.jsx("div",{className:ms.countries,children:Zl.map(s=>e.jsxs("div",{className:ms.item,children:[e.jsx("img",{className:ms.flag,src:s.flag,alt:`${s.name} flag`,width:14,height:7}),e.jsx("div",{children:s.shortName}),s.count]},s.id))})]})},nc=T`
    query DashboardDealsChart(
        $filter: DealStageFilter!
        $sorting: [DealStageSort!]
        $paging: OffsetPaging!
    ) {
        dealStages(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                title
                dealsAggregate {
                    groupBy {
                        closeDateMonth
                        closeDateYear
                    }
                    sum {
                        value
                    }
                }
            }
        }
    }
`,ac=T`
    query DashboardTasksChart(
        $filter: TaskStageFilter!
        $sorting: [TaskStageSort!]
        $paging: OffsetPaging!
    ) {
        taskStages(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                title
                tasksAggregate {
                    count {
                        id
                    }
                }
            }
        }
    }
`,rc=S.lazy(()=>De(()=>import("./@ant-design-b3fb01a5.js").then(t=>t.bh),["assets/@ant-design-b3fb01a5.js","assets/rc-util-c5d9a97a.js","assets/react-f83171f6.js","assets/@algolia-6bb98d1b.js","assets/react-dom-e9b5ed0c.js","assets/@babel-1b4b41ae.js","assets/classnames-25d76406.js","assets/resize-observer-polyfill-0f9f8adb.js","assets/dayjs-ccdc21e7.js","assets/swr-b4b4bea7.js","assets/use-sync-external-store-45a4f913.js","assets/@ctrl-fb5a5473.js","assets/rc-resize-observer-e44fcb90.js","assets/antd-8dc53e1b.js","assets/rc-motion-d3441b18.js","assets/rc-notification-fe76982d.js","assets/rc-overflow-7a102792.js","assets/rc-picker-08f8db9f.js","assets/@rc-component-cd4aaefc.js","assets/rc-tabs-aa40fa60.js","assets/rc-dropdown-a7e16339.js","assets/rc-menu-479eb022.js","assets/rc-select-d6e555cc.js","assets/rc-virtual-list-75ccf576.js","assets/rc-input-number-47067811.js","assets/rc-input-813e1b90.js","assets/rc-collapse-80ac144a.js","assets/rc-drawer-4623e45d.js","assets/rc-field-form-628030e8.js","assets/async-validator-dee29e8b.js","assets/scroll-into-view-if-needed-582d6ca4.js","assets/compute-scroll-into-view-e3f0ecc2.js","assets/rc-image-a155e2e3.js","assets/rc-dialog-a5b29123.js","assets/rc-tooltip-fb4190ca.js","assets/rc-table-a60f2689.js","assets/rc-tree-c57a14ed.js","assets/rc-checkbox-5033fea8.js","assets/rc-pagination-9f434a85.js","assets/throttle-debounce-87e7e444.js","assets/copy-to-clipboard-3f887352.js","assets/toggle-selection-93f4ad84.js","assets/rc-textarea-ad67d466.js","assets/rc-upload-290ca40f.js","assets/rc-progress-6fd91520.js","assets/@emotion-c0b5c018.js","assets/stylis-5efc5547.js","assets/@antv-0cee95de.js","assets/tslib-133e1b7a.js","assets/detect-browser-4b5d6ec2.js","assets/gl-matrix-54a6b629.js","assets/d3-ease-e4d6dab1.js","assets/d3-interpolate-ca1e460c.js","assets/d3-color-6502c434.js","assets/d3-timer-4c6100d9.js","assets/fecha-59c3c944.js","assets/size-sensor-a627fda7.js","assets/d3-regression-45fb9454.js","assets/d3-hierarchy-187e1b2d.js","assets/lodash-es-7c8d70fb.js","assets/fmin-0c78f753.js","assets/pdfast-a451494d.js","assets/react-content-loader-64a5b8dd.js"])),ic=()=>{const{list:t}=R(),{data:s,isError:n,error:r}=te({resource:"dealStages",filters:[{field:"title",operator:"in",value:["WON","LOST"]}],meta:{gqlQuery:nc}});if(n)return console.error("Error fetching deals chart data",r),null;const i={isStack:!1,data:S.useMemo(()=>{var l,d;const o=(l=s==null?void 0:s.data.find(m=>m.title==="WON"))==null?void 0:l.dealsAggregate.map(m=>{var j;const{closeDateMonth:c,closeDateYear:x}=m.groupBy,h=A(`${x}-${c}-01`);return{timeUnix:h.unix(),timeText:h.format("MMM YYYY"),value:(j=m.sum)==null?void 0:j.value,state:"Won"}}),u=(d=s==null?void 0:s.data.find(m=>m.title==="LOST"))==null?void 0:d.dealsAggregate.map(m=>{var j;const{closeDateMonth:c,closeDateYear:x}=m.groupBy,h=A(`${x}-${c}-01`);return{timeUnix:h.unix(),timeText:h.format("MMM YYYY"),value:(j=m.sum)==null?void 0:j.value,state:"Lost"}});return[...o||[],...u||[]].sort((m,c)=>m.timeUnix-c.timeUnix)},[s]),xField:"timeText",yField:"value",seriesField:"state",animation:!0,startOnZero:!1,smooth:!0,legend:{offsetY:-6},yAxis:{tickCount:4,label:{formatter:o=>`$${Number(o)/1e3}k`}},tooltip:{formatter:o=>({name:o.state,value:`$${Number(o.value)/1e3}k`})},areaStyle:o=>{const u="l(270) 0:#ffffff 0.5:#b7eb8f 1:#52c41a",l="l(270) 0:#ffffff 0.5:#f3b7c2 1:#ff4d4f";return{fill:o.state==="Won"?u:l}},color:o=>o.state==="Won"?"#52C41A":"#F5222D"};return e.jsx(B,{style:{height:"100%"},headStyle:{padding:"8px 16px"},bodyStyle:{padding:"24px 24px 0px 24px"},title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(_t,{}),e.jsx(p,{size:"sm",style:{marginLeft:".5rem"},children:"Deals"})]}),extra:e.jsx(C,{onClick:()=>t("deals"),icon:e.jsx(Xt,{}),children:"See sales pipeline"}),children:e.jsx(S.Suspense,{children:e.jsx(rc,{...i,height:325})})})},oc="_item_vou8f_1",lc="_avatar_vou8f_12",cc="_action_vou8f_16",dc="_detail_vou8f_20",uc="_name_vou8f_25",tt={item:oc,avatar:lc,action:cc,detail:dc,name:uc},mc=T`
    query LatestActivitiesDeals(
        $filter: DealFilter!
        $sorting: [DealSort!]!
        $paging: OffsetPaging!
    ) {
        deals(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                title
                stage {
                    id
                    title
                }
                company {
                    id
                    name
                    avatarUrl
                }
            }
        }
    }
`,pc=T`
    query LatestActivitiesAudits(
        $filter: AuditFilter!
        $sorting: [AuditSort!]!
        $paging: OffsetPaging!
    ) {
        audits(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                action
                targetEntity
                targetId
                createdAt
                changes {
                    field
                    from
                    to
                }
                user {
                    id
                    name
                    avatarUrl
                }
            }
        }
    }
`,xc=({limit:t=5})=>{const{data:s,isLoading:n}=te({resource:"deals",pagination:{mode:"off"},meta:{gqlQuery:mc}}),{data:r,isLoading:a,isError:i,error:o}=te({resource:"audits",pagination:{pageSize:t},sorters:[{field:"createdAt",order:"desc"}],filters:[{field:"action",operator:"in",value:["CREATE","UPDATE"]},{field:"targetEntity",operator:"eq",value:"Deal"}],meta:{gqlQuery:pc}});if(i)return console.error("Error fetching latest activities",o),null;const u=a||n;return e.jsxs(B,{headStyle:{padding:"16px"},bodyStyle:{padding:"0 1rem"},title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(ft,{}),e.jsx(p,{size:"sm",style:{marginLeft:".5rem"},children:"Latest activities"})]}),children:[u&&Array.from({length:t}).map((l,d)=>e.jsx(gc,{},d)),!u&&(r==null?void 0:r.data.map(({id:l,user:d,createdAt:m,action:c,targetId:x})=>{var j;const h=(s==null?void 0:s.data.find(f=>f.id===`${x}`))||void 0;return e.jsxs("div",{className:tt.item,children:[e.jsx("div",{className:tt.avatar,children:e.jsx(L,{shape:"square",size:48,src:h==null?void 0:h.company.avatarUrl,name:h==null?void 0:h.company.name})}),e.jsxs("div",{className:tt.action,children:[e.jsx(p,{type:"secondary",size:"xs",children:A(m).fromNow()}),e.jsxs(p,{className:tt.detail,children:[e.jsx(p,{className:tt.name,strong:!0,children:d==null?void 0:d.name}),e.jsx(p,{children:c==="CREATE"?"created":"moved"}),e.jsx(p,{strong:!0,children:h==null?void 0:h.title}),e.jsx(p,{children:"deal"}),e.jsx(p,{children:c==="CREATE"?"in":"to"}),e.jsxs(p,{strong:!0,children:[((j=h==null?void 0:h.stage)==null?void 0:j.title)||"Unassigned","."]})]})]})]},l)}))]})},gc=()=>e.jsxs("div",{className:tt.item,children:[e.jsx(N.Avatar,{active:!0,size:48,shape:"square",style:{borderRadius:"4px",marginRight:"16px"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx(N.Button,{active:!0,style:{height:"16px"}}),e.jsx(N.Button,{active:!0,style:{width:"300px",height:"16px"}})]})]}),hc=S.lazy(()=>De(()=>import("./@ant-design-b3fb01a5.js").then(t=>t.bi),["assets/@ant-design-b3fb01a5.js","assets/rc-util-c5d9a97a.js","assets/react-f83171f6.js","assets/@algolia-6bb98d1b.js","assets/react-dom-e9b5ed0c.js","assets/@babel-1b4b41ae.js","assets/classnames-25d76406.js","assets/resize-observer-polyfill-0f9f8adb.js","assets/dayjs-ccdc21e7.js","assets/swr-b4b4bea7.js","assets/use-sync-external-store-45a4f913.js","assets/@ctrl-fb5a5473.js","assets/rc-resize-observer-e44fcb90.js","assets/antd-8dc53e1b.js","assets/rc-motion-d3441b18.js","assets/rc-notification-fe76982d.js","assets/rc-overflow-7a102792.js","assets/rc-picker-08f8db9f.js","assets/@rc-component-cd4aaefc.js","assets/rc-tabs-aa40fa60.js","assets/rc-dropdown-a7e16339.js","assets/rc-menu-479eb022.js","assets/rc-select-d6e555cc.js","assets/rc-virtual-list-75ccf576.js","assets/rc-input-number-47067811.js","assets/rc-input-813e1b90.js","assets/rc-collapse-80ac144a.js","assets/rc-drawer-4623e45d.js","assets/rc-field-form-628030e8.js","assets/async-validator-dee29e8b.js","assets/scroll-into-view-if-needed-582d6ca4.js","assets/compute-scroll-into-view-e3f0ecc2.js","assets/rc-image-a155e2e3.js","assets/rc-dialog-a5b29123.js","assets/rc-tooltip-fb4190ca.js","assets/rc-table-a60f2689.js","assets/rc-tree-c57a14ed.js","assets/rc-checkbox-5033fea8.js","assets/rc-pagination-9f434a85.js","assets/throttle-debounce-87e7e444.js","assets/copy-to-clipboard-3f887352.js","assets/toggle-selection-93f4ad84.js","assets/rc-textarea-ad67d466.js","assets/rc-upload-290ca40f.js","assets/rc-progress-6fd91520.js","assets/@emotion-c0b5c018.js","assets/stylis-5efc5547.js","assets/@antv-0cee95de.js","assets/tslib-133e1b7a.js","assets/detect-browser-4b5d6ec2.js","assets/gl-matrix-54a6b629.js","assets/d3-ease-e4d6dab1.js","assets/d3-interpolate-ca1e460c.js","assets/d3-color-6502c434.js","assets/d3-timer-4c6100d9.js","assets/fecha-59c3c944.js","assets/size-sensor-a627fda7.js","assets/d3-regression-45fb9454.js","assets/d3-hierarchy-187e1b2d.js","assets/lodash-es-7c8d70fb.js","assets/fmin-0c78f753.js","assets/pdfast-a451494d.js","assets/react-content-loader-64a5b8dd.js"])),jc=()=>{const{list:t}=R(),{data:s,isError:n,error:r}=te({resource:"taskStages",pagination:{pageSize:4},meta:{gqlQuery:ac}});if(n)return console.error("Error fetching task chart data",r),null;const a=S.useMemo(()=>{var u;return(u=s==null?void 0:s.data)!=null&&u.length?s.data.map(l=>{var d,m,c;return{title:l.title,value:((c=(m=(d=l.tasksAggregate)==null?void 0:d[0])==null?void 0:m.count)==null?void 0:c.id)??0}}).filter(l=>l.value!==null&&l.value!==void 0&&l.value>0).sort((l,d)=>(d.value??0)-(l.value??0)):[]},[s==null?void 0:s.data]),i=["#BAE0FF","#69B1FF","#1677FF","#0958D9","#10239E","#061178","#030852","#03052E","#000B0A","#000000"],o={width:168,height:168,data:a,angleField:"value",colorField:"title",color:i,legend:!1,radius:1,innerRadius:.6,label:!1,syncViewPadding:!0,statistic:{title:!1,content:!1}};return e.jsxs(B,{style:{height:"100%"},headStyle:{padding:"8px 16px"},bodyStyle:{padding:"32px"},title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(mn,{}),e.jsx(p,{size:"sm",style:{marginLeft:".5rem"},children:"Tasks"})]}),extra:e.jsx(C,{onClick:()=>t("tasks"),icon:e.jsx(Xt,{}),children:"See kanban board"}),children:[e.jsx("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(S.Suspense,{children:e.jsx(hc,{...o})})}),e.jsx("div",{style:{display:"flex",width:"100%",flexWrap:"wrap",marginTop:"48px"},children:a==null?void 0:a.map((u,l)=>e.jsxs("div",{style:{display:"flex",width:"50%",alignItems:"center",marginTop:"8px"},children:[e.jsx("div",{style:{width:8,height:8,backgroundColor:i[l],marginRight:".5rem"}}),e.jsx(p,{size:"md",style:{textTransform:"capitalize",whiteSpace:"nowrap"},children:u.title.toLowerCase()})]},l))})]})},fc="_area_1vzr7_1",yc={area:fc},vc=Ss.lazy(()=>De(()=>import("./@ant-design-b3fb01a5.js").then(t=>t.bh),["assets/@ant-design-b3fb01a5.js","assets/rc-util-c5d9a97a.js","assets/react-f83171f6.js","assets/@algolia-6bb98d1b.js","assets/react-dom-e9b5ed0c.js","assets/@babel-1b4b41ae.js","assets/classnames-25d76406.js","assets/resize-observer-polyfill-0f9f8adb.js","assets/dayjs-ccdc21e7.js","assets/swr-b4b4bea7.js","assets/use-sync-external-store-45a4f913.js","assets/@ctrl-fb5a5473.js","assets/rc-resize-observer-e44fcb90.js","assets/antd-8dc53e1b.js","assets/rc-motion-d3441b18.js","assets/rc-notification-fe76982d.js","assets/rc-overflow-7a102792.js","assets/rc-picker-08f8db9f.js","assets/@rc-component-cd4aaefc.js","assets/rc-tabs-aa40fa60.js","assets/rc-dropdown-a7e16339.js","assets/rc-menu-479eb022.js","assets/rc-select-d6e555cc.js","assets/rc-virtual-list-75ccf576.js","assets/rc-input-number-47067811.js","assets/rc-input-813e1b90.js","assets/rc-collapse-80ac144a.js","assets/rc-drawer-4623e45d.js","assets/rc-field-form-628030e8.js","assets/async-validator-dee29e8b.js","assets/scroll-into-view-if-needed-582d6ca4.js","assets/compute-scroll-into-view-e3f0ecc2.js","assets/rc-image-a155e2e3.js","assets/rc-dialog-a5b29123.js","assets/rc-tooltip-fb4190ca.js","assets/rc-table-a60f2689.js","assets/rc-tree-c57a14ed.js","assets/rc-checkbox-5033fea8.js","assets/rc-pagination-9f434a85.js","assets/throttle-debounce-87e7e444.js","assets/copy-to-clipboard-3f887352.js","assets/toggle-selection-93f4ad84.js","assets/rc-textarea-ad67d466.js","assets/rc-upload-290ca40f.js","assets/rc-progress-6fd91520.js","assets/@emotion-c0b5c018.js","assets/stylis-5efc5547.js","assets/@antv-0cee95de.js","assets/tslib-133e1b7a.js","assets/detect-browser-4b5d6ec2.js","assets/gl-matrix-54a6b629.js","assets/d3-ease-e4d6dab1.js","assets/d3-interpolate-ca1e460c.js","assets/d3-color-6502c434.js","assets/d3-timer-4c6100d9.js","assets/fecha-59c3c944.js","assets/size-sensor-a627fda7.js","assets/d3-regression-45fb9454.js","assets/d3-hierarchy-187e1b2d.js","assets/lodash-es-7c8d70fb.js","assets/fmin-0c78f753.js","assets/pdfast-a451494d.js","assets/react-content-loader-64a5b8dd.js"])),ps=({resource:t,isLoading:s,totalCount:n})=>{const{primaryColor:r,secondaryColor:a,icon:i,title:o}=nn[t],u={className:yc.area,appendPadding:[1,0,0,0],padding:0,syncViewPadding:!0,data:nn[t].data,autoFit:!0,tooltip:!1,animation:!1,xField:"index",yField:"value",xAxis:!1,yAxis:{tickCount:12,label:{style:{fill:"transparent"}},grid:{line:{style:{stroke:"transparent"}}}},smooth:!0,areaStyle:()=>({fill:`l(270) 0:#fff 0.2:${a} 1:${r}`}),line:{color:r}};return e.jsxs(B,{style:{height:"96px",padding:0},bodyStyle:{padding:"8px 8px 8px 12px"},size:"small",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap"},children:[i,e.jsx(p,{size:"md",className:"secondary",style:{marginLeft:"8px"},children:o})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(p,{size:"xxxl",strong:!0,style:{textAlign:"start",marginLeft:"48px",fontVariantNumeric:"tabular-nums"},children:s?e.jsx(N.Button,{style:{marginTop:"8px",width:"74px"}}):n}),e.jsx(S.Suspense,{children:e.jsx(vc,{...u})})]})]})},xs=({color:t,children:s})=>e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"50%",backgroundColor:t},children:s}),nn={companies:{primaryColor:"#1677FF",secondaryColor:"#BAE0FF",icon:e.jsx(xs,{color:"#E6F4FF",children:e.jsx(Ct,{className:"md",style:{color:"#1677FF"}})}),title:"Number of companies",data:[{index:"1",value:3500},{index:"2",value:2750},{index:"3",value:5e3},{index:"4",value:4250},{index:"5",value:5e3}]},contacts:{primaryColor:"#52C41A",secondaryColor:"#D9F7BE",icon:e.jsx(xs,{color:"#F6FFED",children:e.jsx(St,{className:"md",style:{color:"#52C41A"}})}),title:"Number of contacts",data:[{index:"1",value:1e4},{index:"2",value:19500},{index:"3",value:13e3},{index:"4",value:17e3},{index:"5",value:13e3},{index:"6",value:2e4}]},deals:{primaryColor:"#FA541C",secondaryColor:"#FFD8BF",icon:e.jsx(xs,{color:"#FFF2E8",children:e.jsx(vn,{className:"md",style:{color:"#FA541C"}})}),title:"Total deals in pipeline",data:[{index:"1",value:1e3},{index:"2",value:1300},{index:"3",value:1200},{index:"4",value:2e3},{index:"5",value:800},{index:"6",value:1700},{index:"7",value:1400},{index:"8",value:1800}]}},an=T`
    query DashboardTotalRevenue(
        $filter: DealStageFilter!
        $sorting: [DealStageSort!]
        $paging: OffsetPaging!
    ) {
        dealStages(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                title
                dealsAggregate {
                    sum {
                        value
                    }
                }
            }
        }
    }
`,Cc=Ss.lazy(()=>De(()=>import("./@ant-design-b3fb01a5.js").then(t=>t.bj),["assets/@ant-design-b3fb01a5.js","assets/rc-util-c5d9a97a.js","assets/react-f83171f6.js","assets/@algolia-6bb98d1b.js","assets/react-dom-e9b5ed0c.js","assets/@babel-1b4b41ae.js","assets/classnames-25d76406.js","assets/resize-observer-polyfill-0f9f8adb.js","assets/dayjs-ccdc21e7.js","assets/swr-b4b4bea7.js","assets/use-sync-external-store-45a4f913.js","assets/@ctrl-fb5a5473.js","assets/rc-resize-observer-e44fcb90.js","assets/antd-8dc53e1b.js","assets/rc-motion-d3441b18.js","assets/rc-notification-fe76982d.js","assets/rc-overflow-7a102792.js","assets/rc-picker-08f8db9f.js","assets/@rc-component-cd4aaefc.js","assets/rc-tabs-aa40fa60.js","assets/rc-dropdown-a7e16339.js","assets/rc-menu-479eb022.js","assets/rc-select-d6e555cc.js","assets/rc-virtual-list-75ccf576.js","assets/rc-input-number-47067811.js","assets/rc-input-813e1b90.js","assets/rc-collapse-80ac144a.js","assets/rc-drawer-4623e45d.js","assets/rc-field-form-628030e8.js","assets/async-validator-dee29e8b.js","assets/scroll-into-view-if-needed-582d6ca4.js","assets/compute-scroll-into-view-e3f0ecc2.js","assets/rc-image-a155e2e3.js","assets/rc-dialog-a5b29123.js","assets/rc-tooltip-fb4190ca.js","assets/rc-table-a60f2689.js","assets/rc-tree-c57a14ed.js","assets/rc-checkbox-5033fea8.js","assets/rc-pagination-9f434a85.js","assets/throttle-debounce-87e7e444.js","assets/copy-to-clipboard-3f887352.js","assets/toggle-selection-93f4ad84.js","assets/rc-textarea-ad67d466.js","assets/rc-upload-290ca40f.js","assets/rc-progress-6fd91520.js","assets/@emotion-c0b5c018.js","assets/stylis-5efc5547.js","assets/@antv-0cee95de.js","assets/tslib-133e1b7a.js","assets/detect-browser-4b5d6ec2.js","assets/gl-matrix-54a6b629.js","assets/d3-ease-e4d6dab1.js","assets/d3-interpolate-ca1e460c.js","assets/d3-color-6502c434.js","assets/d3-timer-4c6100d9.js","assets/fecha-59c3c944.js","assets/size-sensor-a627fda7.js","assets/d3-regression-45fb9454.js","assets/d3-hierarchy-187e1b2d.js","assets/lodash-es-7c8d70fb.js","assets/fmin-0c78f753.js","assets/pdfast-a451494d.js","assets/react-content-loader-64a5b8dd.js"])),Sc=()=>{const{data:t,isError:s,error:n,isLoading:r}=te({resource:"dealStages",filters:[{field:"title",operator:"nin",value:["WON","LOST"]}],meta:{gqlQuery:an}}),{data:a,isError:i,error:o,isLoading:u}=te({resource:"dealStages",filters:[{field:"title",operator:"eq",value:"WON"}],meta:{gqlQuery:an}});if(s||i)return console.error("Error fetching dashboard data",n,o),null;const l=((a==null?void 0:a.data)||[]).map(x=>{var h,j,f;return(f=(j=(h=x.dealsAggregate)==null?void 0:h[0])==null?void 0:j.sum)==null?void 0:f.value})[0],d=((t==null?void 0:t.data)||[]).reduce((x,h)=>{var j,f,y;return x+(((y=(f=(j=h==null?void 0:h.dealsAggregate)==null?void 0:j[0])==null?void 0:f.sum)==null?void 0:y.value)??0)},0),m=l&&d?l/d*100:0,c={animation:!(r||u),supportCSSTransform:!0,percent:m/100,range:{color:"l(0) 0:#D9F7BE 1:#52C41A"},axis:{tickLine:{style:{stroke:"#BFBFBF"}},label:{formatter(x){return Number(x)*100}},subTickLine:{count:3}},indicator:{pointer:{style:{fontSize:4,stroke:"#BFBFBF",lineWidth:2}},pin:{style:{r:8,lineWidth:2,stroke:"#BFBFBF"}}},statistic:{content:{formatter:x=>`${((x==null?void 0:x.percent)*100).toFixed(2)}%`,style:{color:"rgba(0,0,0,0.85)",fontWeight:500,fontSize:"24px"}}}};return e.jsxs(B,{style:{height:"100%"},bodyStyle:{padding:"0 32px 32px 32px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},headStyle:{padding:"16px"},title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(_t,{}),e.jsx(p,{size:"sm",children:"Total revenue (yearly)"})]}),children:[e.jsx(S.Suspense,{children:e.jsx(Cc,{...c,padding:0,width:280,height:280})}),e.jsxs("div",{style:{display:"flex",gap:"32px"},children:[e.jsxs(I,{direction:"vertical",size:0,children:[e.jsx(p,{size:"xs",className:"secondary",children:"Expected"}),!r||!u?e.jsx(p,{size:"md",className:"primary",style:{minWidth:"100px"},children:K(d||0)}):e.jsx(N.Button,{style:{width:"100px",height:"16px",marginTop:"6px"},active:!0})]}),e.jsxs(I,{direction:"vertical",size:0,children:[e.jsx(p,{size:"xs",className:"secondary",children:"Realized"}),!r||!u?e.jsx(p,{size:"md",className:"primary",style:{minWidth:"100px"},children:K(l||0)}):e.jsx(N.Button,{style:{width:"100px",height:"16px",marginTop:"6px"},active:!0})]})]})]})},bc=T`
    query DashboardTotalCounts {
        companies {
            totalCount
        }
        contacts {
            totalCount
        }
        deals {
            totalCount
        }
    }
`,Ic=()=>{const{data:t,isLoading:s}=ca({url:"",method:"get",meta:{gqlQuery:bc}});return e.jsxs("div",{className:"page-container",children:[e.jsxs(ee,{gutter:[32,32],children:[e.jsx(F,{xs:24,sm:24,xl:8,children:e.jsx(ps,{resource:"companies",isLoading:s,totalCount:t==null?void 0:t.data.companies.totalCount})}),e.jsx(F,{xs:24,sm:24,xl:8,children:e.jsx(ps,{resource:"contacts",isLoading:s,totalCount:t==null?void 0:t.data.contacts.totalCount})}),e.jsx(F,{xs:24,sm:24,xl:8,children:e.jsx(ps,{resource:"deals",isLoading:s,totalCount:t==null?void 0:t.data.deals.totalCount})})]}),e.jsxs(ee,{gutter:[32,32],style:{marginTop:"32px"},children:[e.jsx(F,{xs:24,sm:24,xl:8,style:{height:"432px"},children:e.jsx(Sc,{})}),e.jsx(F,{xs:24,sm:24,xl:16,style:{height:"432px"},children:e.jsx(ic,{})})]}),e.jsxs(ee,{gutter:[32,32],style:{marginTop:"32px"},children:[e.jsx(F,{xs:24,sm:24,xl:14,xxl:16,children:e.jsx(xc,{})}),e.jsx(F,{xs:24,sm:24,xl:10,xxl:8,children:e.jsx(Nn,{showGoToListButton:!0})})]}),e.jsxs(ee,{gutter:[32,32],style:{marginTop:"32px"},children:[e.jsx(F,{xs:24,sm:24,xl:8,style:{height:"448px"},children:e.jsx(jc,{})}),e.jsx(F,{xs:24,sm:24,xl:16,style:{height:"448px"},children:e.jsx(sc,{})})]})]})},Tc=()=>e.jsx(dn,{type:"forgotPassword",title:e.jsx(ot,{collapsed:!1})}),ns={},as={maxWidth:"400px",margin:"auto",padding:"32px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.02), 0px 1px 6px -1px rgba(0, 0, 0, 0.02), 0px 1px 2px rgba(0, 0, 0, 0.03)"},rs={borderBottom:0,padding:0},is={padding:0,marginTop:"32px"},os={textAlign:"center",marginBottom:0,fontSize:"24px",lineHeight:"32px",fontWeight:700,overflowWrap:"break-word",hyphens:"manual",textOverflow:"unset",whiteSpace:"pre-wrap"},_c=({loginLink:t,wrapperProps:s,contentProps:n,renderContent:r,formProps:a,title:i})=>{const{token:o}=Oe.useToken(),[u]=g.useForm(),l=Kt(),d=Ts(),m=yt(),{Link:c}=_s(),x=d==="legacy"?c:m,{mutate:h,isLoading:j}=da(),f=i===!1?null:e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"32px",fontSize:"20px"},children:i??e.jsx(Zt,{collapsed:!1})}),y=e.jsx(W.Title,{level:3,style:{color:o.colorPrimaryTextHover,...os},children:l("pages.forgotPassword.title","Forgot your password?")}),_=e.jsx(B,{title:y,headStyle:rs,bodyStyle:is,style:{...as,backgroundColor:o.colorBgElevated},...n??{},children:e.jsxs(g,{layout:"vertical",form:u,onFinish:D=>h(D),requiredMark:!1,...a,children:[e.jsx(g.Item,{name:"email",label:l("pages.forgotPassword.fields.email","Email"),rules:[{required:!0},{type:"email",message:l("pages.forgotPassword.errors.validEmail","Invalid email address")}],children:e.jsx(w,{type:"email",size:"large",placeholder:l("pages.forgotPassword.fields.email","Email")})}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between"},children:t??e.jsxs(W.Text,{style:{fontSize:12,marginLeft:"auto"},children:[l("pages.register.buttons.haveAccount","Have an account? ")," ",e.jsx(x,{style:{fontWeight:"bold",color:o.colorPrimaryTextHover},to:"/login",children:l("pages.login.signin","Sign in")})]})}),e.jsx(g.Item,{style:{marginTop:"24px",marginBottom:0},children:e.jsx(C,{type:"primary",size:"large",htmlType:"submit",loading:j,block:!0,children:l("pages.forgotPassword.buttons.submit","Send reset instructions")})})]})});return e.jsx(ye,{style:ns,...s??{},children:e.jsx(ee,{justify:"center",align:"middle",style:{padding:"16px 0",minHeight:"100dvh"},children:e.jsx(F,{xs:22,children:r?r(_,f):e.jsxs(e.Fragment,{children:[f,_]})})})})},wc=({providers:t,forgotPasswordLink:s,rememberMe:n,contentProps:r,wrapperProps:a,renderContent:i,formProps:o,title:u,hideForm:l})=>{const{token:d}=Oe.useToken(),[m]=g.useForm(),c=Kt(),x=Ts(),h=yt(),{Link:j}=_s(),f=x==="legacy"?j:h,y=ws(),{mutate:_,isLoading:D}=ks({v3LegacyAuthProviderCompatible:!!(y!=null&&y.isLegacy)}),M=u===!1?null:e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"32px",fontSize:"20px"},children:u??e.jsx(Zt,{collapsed:!1})}),G=e.jsx(W.Title,{level:3,style:{color:d.colorPrimaryTextHover,...os},children:c("Login As A Student")}),Y=()=>t&&t.length>0?e.jsxs(e.Fragment,{children:[t.map(b=>e.jsx(C,{type:"default",block:!0,icon:b.icon,style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",marginBottom:"8px"},onClick:()=>_({providerName:b.name}),children:b.label},b.name)),!l&&e.jsx($s,{children:e.jsx(W.Text,{style:{color:d.colorTextLabel},children:c("pages.login.divider","or")})})]}):null,z=e.jsxs(B,{title:e.jsxs(e.Fragment,{children:[e.jsxs(J.Group,{defaultValue:"student",buttonStyle:"solid",style:{display:"flex",justifyContent:"center",marginBottom:"20px"},children:[e.jsx(J.Button,{value:"student",disabled:!0,style:{backgroundColor:d.colorPrimaryTextHover,color:"white",cursor:"not-allowed"},children:"Student"}),e.jsx(J.Button,{value:"lecturer",style:{backgroundColor:"white",color:d.colorPrimaryTextHover,fontWeight:"bold",padding:0},children:e.jsx(f,{to:"/login/lecturer",style:{color:d.colorPrimaryTextHover},children:e.jsx("div",{style:{padding:"0 10px"},children:"Lecturer"})})})]}),G]}),headStyle:rs,bodyStyle:is,style:{...as,backgroundColor:d.colorBgElevated},...r??{},children:[Y(),!l&&e.jsxs(g,{layout:"vertical",form:m,onFinish:b=>_(b),requiredMark:!1,initialValues:{remember:!1},...o,children:[e.jsx(g.Item,{name:"email",label:c("pages.login.fields.email","Email"),rules:[{required:!0},{type:"email",message:c("pages.login.errors.validEmail","Invalid email address")}],children:e.jsx(w,{size:"large",placeholder:c("pages.login.fields.email","Email")})}),e.jsx(g.Item,{name:"password",label:c("pages.login.fields.password","Password"),rules:[{required:!0}],children:e.jsx(w,{type:"password",autoComplete:"current-password",placeholder:"",size:"large"})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"24px"},children:[n??e.jsx(g.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:e.jsx(dt,{style:{fontSize:"12px"},children:c("pages.login.buttons.rememberMe","Remember me")})}),s??e.jsx(f,{style:{color:d.colorPrimaryTextHover,fontSize:"12px",marginLeft:"auto"},to:"/forgot-password",children:c("pages.login.buttons.forgotPassword","Forgot password?")})]}),!l&&e.jsx(g.Item,{children:e.jsx(C,{type:"primary",size:"large",htmlType:"submit",loading:D,block:!0,children:c("Login")})})]})]});return e.jsx(ye,{style:ns,...a??{},children:e.jsx(ee,{justify:"center",align:l?"top":"middle",style:{padding:"16px 0",minHeight:"100dvh",paddingTop:l?"15dvh":"16px"},children:e.jsx(F,{xs:22,children:i?i(z,M):e.jsxs(e.Fragment,{children:[M,z]})})})})},kc=({providers:t,forgotPasswordLink:s,rememberMe:n,wrapperProps:r,contentProps:a,renderContent:i,formProps:o,title:u,hideForm:l})=>{const{token:d}=Oe.useToken(),[m]=g.useForm(),c=Kt(),x=Ts(),h=yt(),{Link:j}=_s(),f=x==="legacy"?j:h,y=ws(),{mutate:_,isLoading:D}=ks({v3LegacyAuthProviderCompatible:!!(y!=null&&y.isLegacy)}),M=u===!1?null:e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"32px",fontSize:"20px"},children:u??e.jsx(Zt,{collapsed:!1})}),G=e.jsx(W.Title,{level:3,style:{color:d.colorPrimaryTextHover,...os},children:c("Login As Lecturer")}),Y=()=>t&&t.length>0?e.jsxs(e.Fragment,{children:[t.map(b=>e.jsx(C,{type:"default",block:!0,icon:b.icon,style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",marginBottom:"8px"},onClick:()=>_({providerName:b.name}),children:b.label},b.name)),!l&&e.jsx($s,{children:e.jsx(W.Text,{style:{color:d.colorTextLabel},children:c("pages.login.divider","or")})})]}):null,z=e.jsxs(B,{title:e.jsxs(e.Fragment,{children:[e.jsxs(J.Group,{defaultValue:"student",buttonStyle:"solid",style:{display:"flex",justifyContent:"center",marginBottom:"20px"},children:[e.jsx(J.Button,{value:"lecturer",style:{backgroundColor:"white",color:d.colorPrimaryTextHover,fontWeight:"bold",padding:0},children:e.jsx(f,{to:"/login/student",style:{color:d.colorPrimaryTextHover},children:e.jsx("div",{style:{padding:"0 10px"},children:"Student"})})}),e.jsx(J.Button,{value:"student",disabled:!0,style:{backgroundColor:d.colorPrimaryTextHover,color:"white",cursor:"not-allowed"},children:"Lecturer"})]}),G]}),headStyle:rs,bodyStyle:is,style:{...as,backgroundColor:d.colorBgElevated},...a??{},children:[Y(),!l&&e.jsxs(g,{layout:"vertical",form:m,onFinish:b=>_(b),requiredMark:!1,...o,children:[e.jsx(g.Item,{name:"email",label:c("pages.register.email","Email"),rules:[{required:!0},{type:"email",message:c("pages.register.errors.validEmail","Invalid email address")}],children:e.jsx(w,{size:"large",placeholder:c("pages.register.fields.email","Email")})}),e.jsx(g.Item,{name:"password",label:c("pages.register.fields.password","Password"),rules:[{required:!0}],children:e.jsx(w,{type:"password",placeholder:"",size:"large"})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"24px"},children:[n??e.jsx(g.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:e.jsx(dt,{style:{fontSize:"12px"},children:c("pages.login.buttons.rememberMe","Remember me")})}),s??e.jsx(f,{style:{color:d.colorPrimaryTextHover,fontSize:"12px",marginLeft:"auto"},to:"/forgot-password",children:c("pages.login.buttons.forgotPassword","Forgot password?")})]}),e.jsx(g.Item,{children:e.jsx(C,{type:"primary",size:"large",htmlType:"submit",loading:D,block:!0,children:c("Login")})})]})]});return e.jsx(ye,{style:ns,...r??{},children:e.jsx(ee,{justify:"center",align:l?"top":"middle",style:{padding:"16px 0",minHeight:"100dvh",paddingTop:l?"15dvh":"16px"},children:e.jsx(F,{xs:22,children:i?i(z,M):e.jsxs(e.Fragment,{children:[M,z]})})})})},Ac=({wrapperProps:t,contentProps:s,renderContent:n,formProps:r,title:a})=>{const{token:i}=Oe.useToken(),[o]=g.useForm(),u=Kt(),l=ws(),{mutate:d,isLoading:m}=ua({v3LegacyAuthProviderCompatible:!!(l!=null&&l.isLegacy)}),c=a===!1?null:e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"32px",fontSize:"20px"},children:a??e.jsx(Zt,{collapsed:!1})}),x=e.jsx(W.Title,{level:3,style:{color:i.colorPrimaryTextHover,...os},children:u("pages.updatePassword.title","Set New Password")}),h=e.jsx(B,{title:x,headStyle:rs,bodyStyle:is,style:{...as,backgroundColor:i.colorBgElevated},...s??{},children:e.jsxs(g,{layout:"vertical",form:o,onFinish:j=>d(j),requiredMark:!1,...r,children:[e.jsx(g.Item,{name:"password",label:u("pages.updatePassword.fields.password","New Password"),rules:[{required:!0}],style:{marginBottom:"12px"},children:e.jsx(w,{type:"password",placeholder:"",size:"large"})}),e.jsx(g.Item,{name:"confirmPassword",label:u("pages.updatePassword.fields.confirmPassword","Confirm New Password"),hasFeedback:!0,dependencies:["password"],rules:[{required:!0},({getFieldValue:j})=>({validator(f,y){return!y||j("password")===y?Promise.resolve():Promise.reject(new Error(u("pages.updatePassword.errors.confirmPasswordNotMatch","Passwords do not match")))}})],children:e.jsx(w,{type:"password",placeholder:"",size:"large"})}),e.jsx(g.Item,{style:{marginBottom:0},children:e.jsx(C,{type:"primary",size:"large",htmlType:"submit",loading:m,block:!0,children:u("pages.updatePassword.buttons.submit","Update")})})]})});return e.jsx(ye,{style:ns,...t??{},children:e.jsx(ee,{justify:"center",align:"middle",style:{padding:"16px 0",minHeight:"100dvh"},children:e.jsx(F,{xs:22,children:n?n(h,c):e.jsxs(e.Fragment,{children:[c,h]})})})})},Rn=t=>{const{type:s}=t,n=()=>{switch(s){case"register":return e.jsx(kc,{...t});case"forgotPassword":return e.jsx(_c,{...t});case"updatePassword":return e.jsx(Ac,{...t});default:return e.jsx(wc,{...t})}};return e.jsx(e.Fragment,{children:n()})},Ec=()=>{const[t]=lt(),{mutate:s}=ks(),n=t.get("email"),r=t.get("accessToken"),a=t.get("refreshToken"),i=n?{email:n}:kr;return S.useEffect(()=>{r&&a&&s({accessToken:r,refreshToken:a})},[r,a]),e.jsx(Rn,{type:"login",formProps:{initialValues:i},contentProps:{className:"auth-page"},title:e.jsx(ot,{collapsed:!1})})},ls=T`
    fragment QuoteFields on Quote {
        id
        title
        status
        description
        subTotal
        total
        tax
        createdAt
        items {
            title
            unitPrice
            quantity
            discount
            totalPrice
        }
        company {
            id
            name
            country
            website
            avatarUrl
        }
        salesOwner {
            id
            name
        }
        contact {
            id
            name
        }
    }
`,Nc=T`
    query QuotesTable(
        $filter: QuoteFilter!
        $sorting: [QuoteSort!]!
        $paging: OffsetPaging!
    ) {
        quotes(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                ...QuoteFields
            }
            totalCount
        }
    }
    ${ls}
`,Oc=T`
    query QuotesGetQuote($id: ID!) {
        quote(id: $id) {
            ...QuoteFields
        }
    }
    ${ls}
`,Dc=T`
    mutation QuotesCreateQuote($input: CreateOneQuoteInput!) {
        createOneQuote(input: $input) {
            ...QuoteFields
        }
    }
    ${ls}
`,Et=T`
    mutation QuotesUpdateQuote($input: UpdateOneQuoteInput!) {
        updateOneQuote(input: $input) {
            ...QuoteFields
        }
    }
    ${ls}
`,Vs=({action:t,redirect:s,onCancel:n,onMutationSuccess:r})=>{var G,Y,z,b,k,P;const{pathname:a}=kt(),i=Te(),{list:o,replace:u}=R(),[l]=lt(),{formProps:d,modalProps:m,close:c}=be({resource:"quotes",action:t,id:i.id,defaultVisible:!0,redirect:s,meta:{gqlMutation:t==="create"?Dc:Et},onMutationSuccess:()=>{r==null||r()}}),{selectProps:x,queryResult:{isLoading:h}}=At(),{selectProps:j,queryResult:{isLoading:f}}=Qs(),{selectProps:y,queryResult:{isLoading:_}}=je(),D=h||f||_,M=a.includes("company-create");return e.jsx(oe,{...m,confirmLoading:D,width:560,style:{display:M?"none":"inherit"},onCancel:()=>{if(n){n();return}c(),o("quotes","replace")},children:e.jsx(Ce,{spinning:D,children:e.jsxs(g,{...d,layout:"vertical",children:[e.jsx(g.Item,{rules:[{required:!0}],name:"title",label:"Quotes title",children:e.jsx(w,{placeholder:"Please enter quote title"})}),e.jsx(g.Item,{rules:[{required:!0}],name:["salesOwnerId"],initialValue:(Y=(G=d==null?void 0:d.initialValues)==null?void 0:G.salesOwner)==null?void 0:Y.id,label:"Sales owner",children:e.jsx($,{...y,placeholder:"Please select user"})}),e.jsx(g.Item,{rules:[{required:!0}],name:["companyId"],initialValue:l.get("companyId")??((b=(z=d==null?void 0:d.initialValues)==null?void 0:z.company)==null?void 0:b.id),label:"Company",extra:e.jsx(C,{style:{paddingLeft:0},type:"link",icon:e.jsx(Ie,{}),onClick:()=>u(`company-create?to=${a}`),children:"Add new company"}),children:e.jsx($,{...x,placeholder:"Please select company"})}),e.jsx(g.Item,{rules:[{required:!0}],name:["contactId"],initialValue:(P=(k=d==null?void 0:d.initialValues)==null?void 0:k.contact)==null?void 0:P.id,label:"Quote Contact",children:e.jsx($,{...j,placeholder:"Please select contact"})})]})})})},rn=[{title:"Title",dataIndex:"title",flex:"auto",span:{xs:6,md:8},Input:t=>e.jsx(w,{...t})},{title:"Unit Price",dataIndex:"unitPrice",flex:"auto",span:{xs:6,md:5},Input:t=>e.jsx(Ue,{style:{width:"100%"},min:0,formatter:s=>K(Number(s||0)).replace("$",""),addonBefore:"$",...t})},{title:"Quantity",dataIndex:"quantity",flex:"auto",span:{xs:2},Input:t=>e.jsx(Ue,{style:{width:"100%"},min:0,formatter:s=>(s??0).toString(),...t})},{title:"Discount",dataIndex:"discount",flex:"auto",span:{xs:4},Input:t=>e.jsx(Ue,{style:{width:"100%"},addonAfter:"%",min:0,formatter:s=>(s??0).toString(),...t})},{title:"Total Price",dataIndex:"totalPrice",flex:"auto",span:{xs:4},Input:t=>e.jsx(Ue,{disabled:!0,value:t.value,formatter:s=>K(Number(s||0)),style:{width:"100%",color:"rgba(0, 0, 0, 0.85)"},bordered:!1,...t})}],Pc=()=>{var m;const t=Te(),{formProps:s,autoSaveProps:n,queryResult:r}=X({resource:"quotes",action:"edit",id:t.id,liveMode:"off",autoSave:{enabled:!0,debounce:300,onFinish:c=>{const x=(c.items||[]).filter(h=>!!(h!=null&&h.title));return x==null||x.forEach(h=>{"totalPrice"in h&&delete h.totalPrice}),{...c,items:x}}},onMutationSuccess:()=>{o==null||o()},meta:{gqlMutation:Et}}),{isLoading:a=!1,isFetching:i=!1,refetch:o}=r??{},{total:u,subTotal:l,items:d}=((m=r==null?void 0:r.data)==null?void 0:m.data)??{};return e.jsxs("div",{style:{padding:"0px 32px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(p,{size:"xl",style:{fontWeight:500},children:"Products / Services"}),e.jsx(ma,{...n})]}),e.jsxs("div",{style:{marginTop:"32px",border:"1px solid #d9d9d9",borderRadius:"8px",overflow:"hidden"},children:[e.jsx(ee,{gutter:[16,16],style:{padding:"12px 16px",backgroundColor:"#fafafa",borderBottom:"1px solid #F0F0F0"},children:rn.map(c=>e.jsx(F,{...c.span,flex:c.flex,style:{borderRight:"1px solid #F0F0F0"},children:e.jsx(p,{size:"sm",style:{fontWeight:500,whiteSpace:"nowrap"},children:c.title})},c.title))}),e.jsxs(g,{...s,children:[a&&e.jsx(Fs,{}),!a&&e.jsx(g.List,{name:"items",children:(c,{add:x,remove:h})=>e.jsxs(e.Fragment,{children:[c.map(j=>e.jsx("div",{style:{padding:"8px 16px",borderBottom:"1px solid #d9d9d9"},children:e.jsxs(ee,{gutter:[16,16],children:[rn.map(({Input:f,...y})=>{var _;return e.jsx(F,{...y.span,flex:y.flex,children:y.dataIndex==="totalPrice"?e.jsx(f,{value:((_=d==null?void 0:d[j.key])==null?void 0:_.totalPrice)||0}):e.jsx(g.Item,{...j,noStyle:!0,name:[j.name,y.dataIndex],children:e.jsx(f,{})})},y.title)}),e.jsx(F,{span:1,children:e.jsx(C,{size:"small",style:{marginTop:"4px"},danger:!0,icon:e.jsx(pe,{}),onClick:()=>h(j.name)})})]})},j.key)),e.jsx(C,{type:"link",icon:e.jsx(Ie,{}),onClick:()=>x({title:"",unitPrice:0,quantity:0,discount:0}),style:{marginTop:"8px",marginBottom:"8px"},children:"Add new item"})]})})]})]}),e.jsx($c,{total:u||0,subTotal:l||0,isLoading:a,isFetching:i,taxFormOnMutationSuccess:()=>o==null?void 0:o()})]})},$c=t=>{const{total:s,subTotal:n,isLoading:r,isFetching:a,taxFormOnMutationSuccess:i}=t;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",width:"max-content",gap:"16px",marginTop:"16px",marginLeft:"auto"},children:[r&&e.jsxs(e.Fragment,{children:[e.jsx(N.Input,{size:"small",style:{width:"96px",height:"22px"},block:!0}),e.jsx(N.Input,{size:"small",style:{width:"96px",height:"22px"},block:!0}),e.jsx(N.Input,{size:"small",style:{width:"96px",height:"22px"},block:!0})]}),!r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"space-between"},children:[e.jsx("div",{children:e.jsx(p,{size:"sm",children:"Subtotal"})}),e.jsx("div",{children:e.jsx(p,{size:"sm",children:K(n||0)})})]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsx("div",{children:e.jsx(p,{size:"sm",children:"Sales tax"})}),e.jsx("div",{style:{width:"96px",justifyContent:"space-between"},children:e.jsx(Uc,{loading:a,onMutationSuccess:()=>i()})})]}),e.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"space-between"},children:[e.jsx("div",{children:e.jsx(p,{size:"sm",children:"Total value"})}),e.jsx("div",{children:e.jsx(p,{size:"sm",children:K(s||0)})})]})]})]})},Uc=t=>{const s=Te(),{formProps:n,queryResult:r}=X({resource:"quotes",action:"edit",id:s.id,redirect:!1,liveMode:"off",warnWhenUnsavedChanges:!1,autoSave:{enabled:!0},meta:{gqlMutation:Et},onMutationSuccess:()=>{var i;(i=t.onMutationSuccess)==null||i.call(t)}});return(r==null?void 0:r.isLoading)??!1?e.jsx(N.Input,{size:"small",style:{width:"96px",height:"22px"},block:!0}):e.jsx(g,{...n,children:e.jsx(g.Item,{noStyle:!0,name:"tax",children:e.jsx(Ue,{size:"small",disabled:t.loading,addonAfter:t.loading?e.jsx(Ce,{size:"small"}):"%",min:0,formatter:i=>(i??0).toString()})})})},Fc=S.lazy(()=>De(()=>import("./@uiw-034b265c.js"),["assets/@uiw-034b265c.js","assets/@babel-1b4b41ae.js","assets/react-f83171f6.js","assets/@algolia-6bb98d1b.js","assets/micromark-util-combine-extensions-34ef5cdc.js","assets/micromark-util-chunked-6f054bfc.js","assets/micromark-util-character-b44aa8a7.js","assets/micromark-extension-gfm-footnote-f8d4e9d7.js","assets/micromark-factory-space-1d8c7640.js","assets/micromark-util-normalize-identifier-dfdf0387.js","assets/micromark-core-commonmark-8b4646b7.js","assets/micromark-util-classify-character-9e93f1e0.js","assets/micromark-util-resolve-all-8a85a8df.js","assets/decode-named-character-reference-29ded5ae.js","assets/micromark-util-subtokenize-d9357da7.js","assets/micromark-factory-destination-5cbd3f54.js","assets/micromark-factory-label-13b42ae9.js","assets/micromark-factory-title-868a47c6.js","assets/micromark-factory-whitespace-1751da97.js","assets/micromark-util-html-tag-name-eaa6d7c0.js","assets/ccount-97b3fed9.js","assets/mdast-util-gfm-footnote-ac38b117.js","assets/micromark-util-decode-string-02bf9559.js","assets/micromark-util-decode-numeric-character-reference-bd25dc10.js","assets/rehype-raw-e68e8740.js","assets/hast-util-raw-d699ab4f.js","assets/html-void-elements-99229dcc.js","assets/web-namespaces-a6665c10.js","assets/zwitch-18fef54d.js","assets/hast-util-from-parse5-2e467fc5.js","assets/vfile-location-71013d3a.js","assets/hastscript-e888e985.js","assets/hast-util-parse-selector-2e5db8ec.js","assets/unist-util-visit-f72c27b5.js","assets/unist-util-position-793764a5.js","assets/hast-util-to-parse5-11afe826.js","assets/prop-types-30de2bcf.js","assets/hast-util-whitespace-aa13952a.js","assets/inline-style-parser-e2a37bce.js","assets/extend-b3232017.js","assets/micromark-util-sanitize-uri-493ba26b.js","assets/trim-lines-00010efb.js","assets/rehype-prism-plus-f2b4f0b5.js","assets/hast-util-to-string-00227f59.js","assets/parse-numeric-range-446232fd.js","assets/refractor-4e990fc6.js","assets/parse-entities-886a4bc9.js","assets/character-entities-legacy-d39742d7.js","assets/character-reference-invalid-da0c882b.js","assets/is-decimal-dfcce753.js","assets/is-hexadecimal-f403e296.js","assets/is-alphanumerical-4b9c73ef.js","assets/is-alphabetical-ea837323.js","assets/unist-util-filter-7d8ef162.js","assets/rehype-rewrite-8277dea6.js","assets/hast-util-select-74f394f3.js","assets/direction-ad776bdc.js","assets/hast-util-has-property-acd5f273.js","assets/bcp-47-match-575b2c5d.js","assets/nth-check-75195840.js","assets/boolbase-a031e425.js","assets/css-selector-parser-ca05af30.js","assets/rehype-attr-030cb18c.js","assets/rehype-slug-7f392561.js","assets/github-slugger-15b5d832.js","assets/hast-util-heading-rank-1ca6eaab.js","assets/rehype-ignore-c90cffa8.js","assets/rehype-autolink-headings-484b3924.js","assets/hast-util-is-element-4fe6b149.js","assets/rehype-7c152115.js","assets/rehype-parse-f20a9ed4.js","assets/rehype-stringify-c8ae307e.js","assets/hast-util-to-html-02689770.js","assets/stringify-entities-5742d472.js","assets/character-entities-html4-26dda978.js","assets/index-0a14a46d.css"])),Lc=()=>{const t=Te(),{formProps:s,queryResult:n,autoSaveProps:r}=X({resource:"quotes",action:"edit",id:t.id,redirect:!1,liveMode:"off",warnWhenUnsavedChanges:!1,autoSave:{enabled:!0},invalidates:[],meta:{gqlMutation:Et}}),a=(n==null?void 0:n.isLoading)??!1;return e.jsx(Ce,{spinning:a,children:e.jsxs("div",{style:{position:"relative",padding:"0 24px 24px 24px"},children:[e.jsx(g,{...s,children:e.jsx(S.Suspense,{children:e.jsx(g.Item,{noStyle:!0,name:"description",children:e.jsx(Fc,{preview:"edit","data-color-mode":"light",height:250})})})}),e.jsx("div",{children:e.jsx(Ce,{style:{position:"absolute",bottom:"32px",right:"32px"},spinning:(r==null?void 0:r.status)==="loading"})})]})})},zc="_button_24pgk_1",Mc="_first_24pgk_6",qc="_second_24pgk_14",Rc="_third_24pgk_23",Bc="_draft_24pgk_33",Qc="_sent_24pgk_38",Vc="_accepted_24pgk_43",He={button:zc,first:Mc,second:qc,third:Rc,draft:Bc,sent:Qc,accepted:Vc},Yc=({id:t,status:s,style:n})=>{const{mutate:r}=ct(),a=u=>{r({resource:"quotes",id:t,values:{status:u},mutationMode:"optimistic",invalidates:[],meta:{gqlMutation:Et}})},o={DRAFT:0,SENT:1,ACCEPTED:2}[s];return e.jsx("div",{style:n,children:e.jsxs("div",{className:He[s.toLocaleLowerCase()],style:{display:"flex",position:"relative"},children:[e.jsx(Wc,{fill:"currentColor",textColor:"#fff",onClick:()=>a("DRAFT")}),e.jsx(Hc,{fill:o>0?"currentColor":"#fff",textColor:o>0?"#fff":"#000",onClick:()=>a("SENT")}),e.jsx(Gc,{fill:o>1?"currentColor":"#fff",textColor:o>1?"#fff":"#000",onClick:()=>a("ACCEPTED")})]})})},Wc=t=>e.jsxs("svg",{role:"button",onClick:()=>t.onClick(),className:me(He.button,He.first),xmlns:"http://www.w3.org/2000/svg",width:126,height:44,fill:"none",children:[e.jsx("path",{fill:t.fill,stroke:"#F0F2F5",strokeWidth:2,d:"M22 1C10.402 1 1 10.402 1 22s9.402 21 21 21h87.735a5 5 0 0 0 4.288-2.428l9.6-16a5 5 0 0 0 0-5.145l-9.6-16A5 5 0 0 0 109.735 1H22Z"}),e.jsx("text",{x:"42",y:"27",fill:t.textColor,children:"Draft"})]}),Hc=t=>e.jsxs("svg",{role:"button",onClick:()=>t.onClick(),className:me(He.button,He.second),xmlns:"http://www.w3.org/2000/svg",width:126,height:44,fill:"none",children:[e.jsx("path",{fill:t.fill,stroke:"#F0F2F5",strokeWidth:2,d:"M2 1H1v42h108.735a5 5 0 0 0 4.288-2.428l9.6-16a5 5 0 0 0 0-5.145l-9.6-16A5 5 0 0 0 109.735 1H2Z"}),e.jsx("text",{x:"42",y:"27",fill:t.textColor,children:"Sent"})]}),Gc=t=>e.jsxs("svg",{role:"button",onClick:()=>t.onClick(),className:me(He.button,He.third),xmlns:"http://www.w3.org/2000/svg",width:126,height:44,fill:"none",children:[e.jsx("path",{fill:t.fill,stroke:"#F0F2F5",strokeWidth:2,d:"M2 1H1v42h103c11.598 0 21-9.402 21-21s-9.402-21-21-21H2Z"}),e.jsx("text",{x:"28",y:"27",fill:t.textColor,children:"Accepted"})]}),Kc=({children:t})=>e.jsxs(e.Fragment,{children:[e.jsx(Vs,{action:"create"}),t]}),Zc=({children:t})=>e.jsxs(e.Fragment,{children:[e.jsx(Vs,{action:"edit"}),t]}),Xc=[{label:"Draft",value:"DRAFT"},{label:"Sent",value:"SENT"},{label:"Accepted",value:"ACCEPTED"}],Jc=({children:t})=>{const s=Ze.useBreakpoint(),{tableProps:n,searchFormProps:r,filters:a,sorters:i,tableQueryResult:o}=ze({resource:"quotes",onSearch:c=>[{field:"title",operator:"contains",value:c.title}],filters:{initial:[{field:"title",value:"",operator:"contains"},{field:"status",value:void 0,operator:"in"}]},sorters:{initial:[{field:"createdAt",order:"desc"}]},meta:{gqlQuery:Nc}}),{selectProps:u}=At(),{selectProps:l}=je(),m=Ds(c=>{var x;(x=r==null?void 0:r.onFinish)==null||x.call(r,{title:c.target.value??""})},500);return e.jsxs("div",{className:"page-container",children:[e.jsx(Yt,{breadcrumb:!1,headerButtons:()=>e.jsx(I,{style:{marginTop:s.xs?"1.6rem":void 0},children:e.jsx(g,{...r,layout:"inline",children:e.jsx(g.Item,{name:"title",noStyle:!0,children:e.jsx(w,{size:"large",prefix:e.jsx(ge,{className:"anticon tertiary"}),suffix:e.jsx(Ce,{size:"small",spinning:o.isFetching}),placeholder:"Search by name",onChange:m})})})}),contentProps:{style:{marginTop:"28px"}},title:e.jsx(zs,{buttonText:"Add quote",toPath:"quotes"}),children:e.jsxs(E,{...n,pagination:{...n.pagination,showTotal:c=>e.jsx(ut,{total:c,entityName:"quotes"})},rowKey:"id",children:[e.jsx(E.Column,{dataIndex:"title",title:"Title",defaultFilteredValue:ie("title",a),filterDropdown:c=>e.jsx(V,{...c,children:e.jsx(w,{placeholder:"Search Name"})})}),e.jsx(E.Column,{dataIndex:["company","id"],title:"Company",defaultFilteredValue:ie("company.id",a,"in"),filterDropdown:c=>e.jsx(V,{...c,children:e.jsx($,{placeholder:"Search Company",style:{width:220},...u})}),render:(c,x)=>e.jsxs(I,{children:[e.jsx(L,{shape:"square",name:x.company.name,src:x.company.avatarUrl}),e.jsx(p,{style:{whiteSpace:"nowrap"},children:x.company.name})]})}),e.jsx(E.Column,{dataIndex:"total",title:"Total Amount",sorter:!0,render:c=>e.jsx(p,{style:{whiteSpace:"nowrap"},children:K(c)})}),e.jsx(E.Column,{dataIndex:"status",title:"Stage",defaultFilteredValue:ie("status",a,"in"),filterDropdown:c=>e.jsx(V,{...c,children:e.jsx($,{style:{width:"200px"},mode:"multiple",placeholder:"Select Stage",options:Xc})}),render:c=>e.jsx(Pn,{status:c})}),e.jsx(E.Column,{dataIndex:["salesOwner","id"],title:"Participants",filterDropdown:c=>e.jsx(V,{...c,children:e.jsx($,{style:{width:"200px"},placeholder:"Select Sales Owner",...l})}),render:(c,x)=>e.jsx(Ms,{userOne:x.salesOwner,userTwo:x.contact})}),e.jsx(E.Column,{dataIndex:"createdAt",title:"Created at",sorter:!0,defaultSortOrder:st("createdAt",i),render:c=>e.jsx(p,{children:A(c).fromNow()})}),e.jsx(E.Column,{fixed:"right",title:"Actions",dataIndex:"actions",render:(c,x)=>e.jsxs(I,{children:[e.jsx(Gt,{hideText:!0,size:"small",recordItemId:x.id,style:{backgroundColor:"transparent"}}),e.jsx(Ht,{hideText:!0,size:"small",recordItemId:x.id,style:{backgroundColor:"transparent"}}),e.jsx(Ge,{hideText:!0,size:"small",recordItemId:x.id,style:{backgroundColor:"transparent"}})]})})]})}),t]})},ed="_container_1dh9n_1",td="_title_1dh9n_6",sd="_pdf_1dh9n_14",nd="_pdfQuoteInfo_1dh9n_25",ad="_companyInfo_1dh9n_33",rd="_company_1dh9n_33",id="_userInfo_1dh9n_44",od="_user_1dh9n_44",ld="_divider_1dh9n_62",xe={container:ed,title:td,pdf:sd,pdfQuoteInfo:nd,companyInfo:ad,company:rd,userInfo:id,user:od,divider:ld},cd=S.lazy(()=>De(()=>import("./pdf-export-a4843803.js"),["assets/pdf-export-a4843803.js","assets/react-f83171f6.js","assets/@algolia-6bb98d1b.js","assets/@refinedev-e19195c0.js","assets/antd-8dc53e1b.js","assets/rc-util-c5d9a97a.js","assets/react-dom-e9b5ed0c.js","assets/@babel-1b4b41ae.js","assets/@ant-design-b3fb01a5.js","assets/classnames-25d76406.js","assets/resize-observer-polyfill-0f9f8adb.js","assets/dayjs-ccdc21e7.js","assets/swr-b4b4bea7.js","assets/use-sync-external-store-45a4f913.js","assets/@ctrl-fb5a5473.js","assets/rc-resize-observer-e44fcb90.js","assets/@emotion-c0b5c018.js","assets/stylis-5efc5547.js","assets/@antv-0cee95de.js","assets/tslib-133e1b7a.js","assets/detect-browser-4b5d6ec2.js","assets/gl-matrix-54a6b629.js","assets/d3-ease-e4d6dab1.js","assets/d3-interpolate-ca1e460c.js","assets/d3-color-6502c434.js","assets/d3-timer-4c6100d9.js","assets/fecha-59c3c944.js","assets/size-sensor-a627fda7.js","assets/d3-regression-45fb9454.js","assets/d3-hierarchy-187e1b2d.js","assets/lodash-es-7c8d70fb.js","assets/fmin-0c78f753.js","assets/pdfast-a451494d.js","assets/react-content-loader-64a5b8dd.js","assets/rc-motion-d3441b18.js","assets/rc-notification-fe76982d.js","assets/rc-overflow-7a102792.js","assets/rc-picker-08f8db9f.js","assets/@rc-component-cd4aaefc.js","assets/rc-tabs-aa40fa60.js","assets/rc-dropdown-a7e16339.js","assets/rc-menu-479eb022.js","assets/rc-select-d6e555cc.js","assets/rc-virtual-list-75ccf576.js","assets/rc-input-number-47067811.js","assets/rc-input-813e1b90.js","assets/rc-collapse-80ac144a.js","assets/rc-drawer-4623e45d.js","assets/rc-field-form-628030e8.js","assets/async-validator-dee29e8b.js","assets/scroll-into-view-if-needed-582d6ca4.js","assets/compute-scroll-into-view-e3f0ecc2.js","assets/rc-image-a155e2e3.js","assets/rc-dialog-a5b29123.js","assets/rc-tooltip-fb4190ca.js","assets/rc-table-a60f2689.js","assets/rc-tree-c57a14ed.js","assets/rc-checkbox-5033fea8.js","assets/rc-pagination-9f434a85.js","assets/throttle-debounce-87e7e444.js","assets/copy-to-clipboard-3f887352.js","assets/toggle-selection-93f4ad84.js","assets/rc-textarea-ad67d466.js","assets/rc-upload-290ca40f.js","assets/rc-progress-6fd91520.js","assets/sunflower-antd-b7c52e64.js","assets/react-markdown-ecaefd3d.js","assets/vfile-6404f5ee.js","assets/vfile-message-36a63b7e.js","assets/unist-util-stringify-position-c1d0da3a.js","assets/unified-a4a02247.js","assets/bail-6c55de42.js","assets/extend-b3232017.js","assets/trough-cd0b4d6d.js","assets/remark-parse-85ac6e81.js","assets/mdast-util-from-markdown-d6783c52.js","assets/micromark-7d81d632.js","assets/mdast-util-to-string-4033e385.js","assets/remark-rehype-9a2032e2.js","assets/mdast-util-to-hast-8e9d18d8.js","assets/mdurl-bfa3a10b.js","assets/unist-builder-069018de.js","assets/unist-util-visit-parents-a8973bb3.js","assets/unist-util-is-ed1fe220.js","assets/unist-util-generated-8c2ee601.js","assets/mdast-util-definitions-f967f126.js","assets/prop-types-30de2bcf.js","assets/property-information-0004ac0d.js","assets/xtend-2b056f5a.js","assets/react-is-8d9ddb1f.js","assets/space-separated-tokens-d6f14c6f.js","assets/comma-separated-tokens-a05230ef.js","assets/style-to-object-b28dc10f.js","assets/inline-style-parser-e2a37bce.js","assets/remark-gfm-e694efbd.js","assets/micromark-extension-gfm-39dd3ef5.js","assets/micromark-extension-gfm-autolink-literal-edb0f204.js","assets/micromark-extension-gfm-table-29daca91.js","assets/micromark-extension-gfm-task-list-item-d37fdbb4.js","assets/micromark-extension-gfm-strikethrough-dd4f2228.js","assets/mdast-util-gfm-4ff8096f.js","assets/mdast-util-gfm-autolink-literal-ea729c86.js","assets/mdast-util-find-and-replace-195d46af.js","assets/escape-string-regexp-348311e6.js","assets/mdast-util-gfm-strikethrough-bb347af8.js","assets/mdast-util-to-markdown-f2181906.js","assets/repeat-string-d22006ec.js","assets/mdast-util-gfm-table-86d8b2fd.js","assets/markdown-table-c51853ae.js","assets/mdast-util-gfm-task-list-item-bb68c4e9.js","assets/@tanstack-87345ecd.js","assets/lodash-ded28814.js","assets/error-stack-parser-8a325f08.js","assets/stackframe-d613cda2.js","assets/qs-533703aa.js","assets/side-channel-2b67a7a3.js","assets/get-intrinsic-88feedc6.js","assets/es-errors-82fd953f.js","assets/has-symbols-e8f3ca0e.js","assets/has-proto-1353c55e.js","assets/function-bind-61637ca6.js","assets/hasown-bc561cf0.js","assets/call-bind-9ec8ebd8.js","assets/set-function-length-ecd19468.js","assets/define-data-property-d38573ea.js","assets/es-define-property-cfa03815.js","assets/gopd-4c4454f6.js","assets/has-property-descriptors-68e2873e.js","assets/object-inspect-480ee363.js","assets/crypto-js-223de2bb.js","assets/warn-once-02798694.js","assets/pluralize-aac65ede.js","assets/papaparse-42281dbe.js","assets/react-router-dom-3db48442.js","assets/react-router-286b5268.js","assets/@remix-run-8247d2bc.js","assets/graphql-3565279e.js","assets/cross-fetch-e3cbbbc3.js","assets/camelcase-a877ba3b.js","assets/gql-query-builder-55751dde.js","assets/graphql-tag-b0ed4b27.js","assets/@refinedev-50b44a9d.css","assets/@react-pdf-ad8a37e1.js","assets/queue-d3dfa02c.js","assets/inherits-2c87d58f.js","assets/events-f5832a60.js","assets/fontkit-f1ed714c.js","assets/restructure-6f8f6eda.js","assets/fast-deep-equal-6d4638a9.js","assets/unicode-properties-3a0207b5.js","assets/base64-js-50a5cdf9.js","assets/unicode-trie-894e387b.js","assets/tiny-inflate-883f742a.js","assets/dfa-b9f8a3a8.js","assets/clone-e61c0028.js","assets/brotli-56847cf1.js","assets/@swc-1764bf98.js","assets/abs-svg-path-87553aa1.js","assets/parse-svg-path-4ed76410.js","assets/normalize-svg-path-a13571e8.js","assets/svg-arc-to-cubic-bezier-d12fe6e6.js","assets/color-string-0b04a96e.js","assets/color-name-b7949e8c.js","assets/simple-swizzle-58fb3c22.js","assets/pako-1c4281a4.js","assets/jay-peg-bd9fd04f.js","assets/postcss-value-parser-8f4e359f.js","assets/hsl-to-hex-dc4b21a5.js","assets/hsl-to-rgb-for-reals-282984f4.js","assets/media-engine-a14eba61.js","assets/bidi-js-b480259a.js","assets/hyphen-3b638ef5.js","assets/yoga-layout-05693f85.js","assets/emoji-regex-a1456128.js","assets/object-assign-4df68cb4.js","assets/scheduler-f4563fbe.js","assets/axios-a342f982.js","assets/graphql-ws-6dcf2f9d.js","assets/algoliasearch-fa1a6be7.js","assets/react-instantsearch-core-78b5f298.js","assets/instantsearch.js-acc6351b.js","assets/algoliasearch-helper-1f51e904.js","assets/@dnd-kit-915f3bb4.js"])),dd=()=>{const{visible:t,show:s,close:n}=pa(),r=Te(),{data:a,isLoading:i}=Vt({resource:"quotes",id:r.id,liveMode:"off",meta:{gqlQuery:Oc}});if(i||!(a!=null&&a.data))return e.jsx(Fs,{});const{title:o,id:u,status:l,company:d,contact:m,salesOwner:c}=(a==null?void 0:a.data)??{};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:xe.container,children:[e.jsx(Qt,{to:"/quotes",children:e.jsx(C,{icon:e.jsx(es,{}),children:"Quotes"})}),e.jsx("div",{className:xe.divider}),e.jsxs("div",{className:xe.title,children:[e.jsx(p,{size:"xl",style:{fontWeight:500},children:o}),e.jsxs(I,{children:[e.jsx(S.Suspense,{children:e.jsx(cd,{})}),e.jsx(C,{icon:e.jsx(Ne,{}),onClick:()=>s(),children:"Edit"})]})]}),e.jsx(Yc,{style:{marginTop:"32px"},id:u,status:l}),e.jsxs("div",{className:xe.pdf,children:[e.jsxs("div",{className:xe.pdfQuoteInfo,children:[e.jsx(L,{name:d==null?void 0:d.name,src:d==null?void 0:d.avatarUrl,shape:"square",style:{width:"64px",height:"64px"}}),e.jsx("div",{className:xe.companyInfo,children:e.jsxs("div",{className:xe.company,children:[e.jsx(p,{strong:!0,children:d.name}),e.jsx(p,{children:d.country}),e.jsx(p,{children:d.website})]})}),e.jsxs("div",{className:xe.userInfo,children:[e.jsxs("div",{className:xe.user,children:[e.jsx(p,{strong:!0,children:"Prepared by:"}),e.jsx(p,{children:c.name})]}),e.jsxs("div",{className:xe.user,children:[e.jsx(p,{strong:!0,children:"Prepared for:"}),e.jsx(p,{children:m.name})]})]})]}),e.jsx("div",{className:xe.divider}),e.jsx(Pc,{}),e.jsx("div",{className:xe.divider}),e.jsx(Lc,{})]})]}),t&&e.jsx(Vs,{action:"edit",redirect:!1,onCancel:()=>n(),onMutationSuccess:()=>n()})]})},ud=()=>e.jsx(Rn,{type:"register",title:e.jsx(ot,{collapsed:!1})}),md=T`
    mutation KanbanCreateStage($input: CreateOneTaskStageInput!) {
        createOneTaskStage(input: $input) {
            id
            title
            createdAt
        }
    }
`,pd=T`
    mutation KanbanCreateTask($input: CreateOneTaskInput!) {
        createOneTask(input: $input) {
            id
        }
    }
`,xd=T`
    mutation KanbanUpdateStage($input: UpdateOneTaskStageInput!) {
        updateOneTaskStage(input: $input) {
            id
            title
        }
    }
`,gd=T`
    query KanbanGetTask($id: ID!) {
        task(id: $id) {
            id
            title
            completed
            description
            dueDate
            stage {
                id
                title
            }
            users {
                id
                name
                avatarUrl
            }
            checklist {
                title
                checked
            }
        }
    }
`,Nt=T`
    mutation KanbanUpdateTask($input: UpdateOneTaskInput!) {
        updateOneTask(input: $input) {
            id
            title
            completed
            description
            dueDate
            stage {
                id
                title
            }
            users {
                id
                name
                avatarUrl
            }
            checklist {
                title
                checked
            }
        }
    }
`,hd=T`
    query KanbanTaskComments(
        $filter: TaskCommentFilter!
        $sorting: [TaskCommentSort!]
        $paging: OffsetPaging!
    ) {
        taskComments(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                comment
                createdAt
                createdBy {
                    id
                    name
                    avatarUrl
                }
            }
            totalCount
        }
    }
`,jd=T`
    query KanbanTaskStages(
        $filter: TaskStageFilter!
        $sorting: [TaskStageSort!]
        $paging: OffsetPaging!
    ) {
        taskStages(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                title
            }
            totalCount
        }
    }
`,fd=T`
    query KanbanTasks(
        $filter: TaskFilter!
        $sorting: [TaskSort!]
        $paging: OffsetPaging!
    ) {
        tasks(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                title
                description
                dueDate
                completed
                stageId
                checklist {
                    title
                    checked
                }
                users {
                    id
                    name
                    avatarUrl
                }
                comments {
                    totalCount
                }
            }
            totalCount
        }
    }
`,yd=()=>{const[t]=lt(),{list:s}=R(),{formProps:n,modalProps:r,close:a}=be({action:"create",defaultVisible:!0,meta:{gqlMutation:pd}});return e.jsx(oe,{...r,onCancel:()=>{a(),s("tasks","replace")},title:"Add new card",width:512,children:e.jsx(g,{...n,layout:"vertical",onFinish:i=>{var o;(o=n==null?void 0:n.onFinish)==null||o.call(n,{...i,stageId:t.get("stageId")?Number(t.get("stageId")):null,userIds:[]})},children:e.jsx(g.Item,{label:"Title",name:"title",rules:[{required:!0}],children:e.jsx(w,{})})})})},vd=()=>{const t=he(),{list:s}=R(),{formProps:n,modalProps:r,close:a}=be({action:"create",defaultVisible:!0,resource:"taskStages",meta:{gqlMutation:md},onMutationSuccess:()=>{t({invalidates:["list"],resource:"tasks"})},successNotification:()=>({key:"create-stage",type:"success",message:"Successfully created stage",description:"Successful"})});return e.jsx(oe,{...r,onCancel:()=>{a(),s("tasks","replace")},title:"Add new stage",width:512,children:e.jsx(g,{...n,layout:"vertical",children:e.jsx(g.Item,{label:"Title",name:"title",rules:[{required:!0}],children:e.jsx(w,{})})})})},Ys=()=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",borderBottom:"1px solid #d9d9d9"},children:[e.jsx(N.Avatar,{size:"small",shape:"square"}),e.jsx(N.Input,{size:"small",block:!0,style:{height:"22px"}})]}),gs=({accordionKey:t,activeKey:s,setActive:n,fallback:r,icon:a,label:i,children:o,isLoading:u})=>{if(u)return e.jsx(Ys,{});const l=s===t,d=()=>{n(l?void 0:t)};return e.jsxs("div",{style:{display:"flex",padding:"12px 24px",gap:"12px",alignItems:"start",borderBottom:"1px solid #d9d9d9"},children:[e.jsx("div",{style:{marginTop:"1px",flexShrink:0},children:a}),l?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",flex:1},children:[e.jsx(p,{strong:!0,onClick:d,style:{cursor:"pointer"},children:i}),o]}):e.jsx("div",{onClick:d,style:{cursor:"pointer",flex:1},children:r})]})},Rt=({children:t,onClick:s})=>e.jsx(C,{size:"large",icon:e.jsx(Sn,{className:"md"}),style:{margin:"16px",backgroundColor:"white"},onClick:s,children:t??e.jsx(p,{size:"md",type:"secondary",children:"Add new card"})}),Ws=({children:t,onClick:s,style:n,...r})=>e.jsx(C,{type:"dashed",size:"large",icon:e.jsx(Sn,{className:"secondary md"}),style:{marginTop:"16px",marginLeft:"16px",marginRight:"16px",height:"56px",...n},onClick:s,...r,children:t??e.jsx(p,{size:"md",type:"secondary",children:"Add stage"})}),Cd="_container_11x8t_1",Sd="_wrapper_11x8t_11",Bt={container:Cd,wrapper:Sd},Bn=({onDragEnd:t,children:s})=>{const n=Js(ur,{activationConstraint:{distance:5}}),r=Js(mr,{activationConstraint:{distance:5}}),a=cr(n,r),i=o=>{o.over!==null&&t(o)};return e.jsx("div",{className:Bt.wrapper,children:e.jsx("div",{className:Bt.container,children:e.jsx(dr,{onDragEnd:i,sensors:a,children:s})})})},Qn=({children:t})=>e.jsx("div",{className:Bt.wrapper,children:e.jsx("div",{className:Bt.container,children:t})}),bd=({value:t={title:"",checked:!1},onChange:s})=>{const n=a=>{s==null||s({...t,...a})},r=a=>{const i=a.target.value;n({title:i})};return e.jsxs("div",{style:{display:"flex",flex:1},children:[e.jsx(dt,{checked:t==null?void 0:t.checked,onChange:a=>{const i=a.target.checked;n({checked:i})}}),e.jsx(w,{bordered:!1,value:t==null?void 0:t.title,onChange:r,placeholder:"Please enter item title",style:{backgroundColor:"#fff",textDecoration:t.checked?"line-through":"none"}})]})},Id="_container_1koio_1",Td="_solid_1koio_10",_d="_header_1koio_16",wd="_titleContainer_1koio_25",kd="_title_1koio_25",Ad="_count_1koio_42",Ed="_actionContainer_1koio_54",Nd="_columnScrollableContainer_1koio_59",Od="_active_1koio_65",Dd="_childrenWrapper_1koio_70",Pd="_isOver_1koio_78",ae={container:Id,solid:Td,header:_d,titleContainer:wd,title:kd,count:Ad,actionContainer:Ed,columnScrollableContainer:Nd,active:Od,childrenWrapper:Dd,isOver:Pd},nt=({children:t,id:s,title:n,description:r,count:a,data:i,variant:o="default",contextMenuItems:u,onAddClick:l})=>{const{isOver:d,setNodeRef:m,active:c}=Us({id:s,data:i}),x=()=>{l==null||l({id:s})};return e.jsxs("div",{ref:m,className:me(ae.container,ae[o]),children:[e.jsxs("div",{className:ae.header,children:[e.jsxs("div",{className:ae.titleContainer,children:[e.jsxs("div",{className:ae.title,children:[e.jsx(p,{ellipsis:{tooltip:n},size:"xs",strong:!0,style:{textTransform:"uppercase",whiteSpace:"nowrap"},children:n}),!!a&&e.jsx("div",{className:ae.count,children:e.jsx(p,{size:"xs",children:a})})]}),e.jsxs("div",{className:ae.actionContainer,children:[u&&e.jsx(Fe,{trigger:["click"],menu:{items:u,onPointerDown:h=>{h.stopPropagation()},onClick:h=>{h.domEvent.stopPropagation()}},placement:"bottom",arrow:{pointAtCenter:!0},children:e.jsx(C,{type:"text",shape:"circle",icon:e.jsx(Tt,{style:{transform:"rotate(90deg)"}})})}),e.jsx(C,{shape:"circle",icon:e.jsx(ts,{}),onClick:x})]})]}),r]}),e.jsx("div",{className:me(ae.columnScrollableContainer,{[ae.isOver]:d,[ae.active]:c}),children:e.jsx("div",{className:me(ae.childrenWrapper),children:t})})]})},Ut=({children:t,type:s,variant:n="default"})=>e.jsxs("div",{className:me(ae.container,ae[n]),children:[e.jsxs("div",{className:ae.header,children:[e.jsxs("div",{className:ae.titleContainer,children:[e.jsx(N.Button,{size:"small",style:{width:"125px"}}),e.jsx(C,{disabled:!0,type:"text",shape:"circle",icon:e.jsx(Tt,{style:{transform:"rotate(90deg)"}})}),e.jsx(C,{disabled:!0,shape:"circle",icon:e.jsx(ts,{})})]}),s==="deal"&&e.jsx(N.Button,{size:"small",style:{width:"175px"}})]}),e.jsx("div",{className:me(ae.columnScrollableContainer),children:e.jsx("div",{className:me(ae.childrenWrapper),children:t})})]}),$d=({item:t})=>{const s=he(),{formProps:n,setId:r,id:a,saveButtonProps:i}=X({resource:"taskComments",action:"edit",queryOptions:{enabled:!1},onMutationSuccess:()=>{r(void 0),s({invalidates:["list"],resource:"taskComments"})},successNotification:()=>({key:"task-update-comment",message:"Successfully updated comment",description:"Successful",type:"success"})}),{data:o}=Ee(),u=(o==null?void 0:o.id)===t.createdBy.id;return e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx(L,{style:{flexShrink:0},alt:t.createdBy.name,src:t.createdBy.avatarUrl,children:t.createdBy.name.charAt(0)}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(p,{style:{fontWeight:500},children:t.createdBy.name}),e.jsx(p,{size:"xs",style:{color:"#000000a6"},children:A(t.createdAt).format("MMMM D, YYYY - h:ma")})]}),a?e.jsx(g,{...n,initialValues:{comment:t.comment},children:e.jsx(g.Item,{name:"comment",rules:[{required:!0,transform(l){return l==null?void 0:l.trim()},message:"Please enter a comment"}],children:e.jsx(w.TextArea,{autoFocus:!0,style:{backgroundColor:"#fff"}})})}):e.jsx(W.Paragraph,{style:{background:"#fff",borderRadius:"6px",padding:"8px",marginBottom:0},ellipsis:{rows:3,expandable:!0},children:t.comment}),u&&!a&&e.jsxs(I,{size:16,children:[e.jsx(W.Link,{style:{color:"inherit",fontSize:"12px"},onClick:()=>r(t.id),children:"Edit"}),e.jsx(Ge,{recordItemId:t.id,resource:"taskComments",size:"small",type:"link",icon:null,onSuccess:()=>{s({invalidates:["list"],resource:"taskComments"})},successNotification:()=>({key:"task-delete-comment",message:"Successfully deleted comment",description:"Successful",type:"success"}),style:{padding:0,fontSize:"12px",color:"inherit"}})]}),a&&e.jsxs(I,{children:[e.jsx(C,{size:"small",onClick:()=>r(void 0),children:"Cancel"}),e.jsx(C,{size:"small",type:"primary",...i,children:"Save"})]})]})]})},Ud=()=>{var n;const{id:t}=vt(),{data:s}=te({resource:"taskComments",filters:[{field:"task.id",operator:"eq",value:t}],sorters:[{field:"createdAt",order:"desc"}],pagination:{mode:"off"},meta:{gqlQuery:hd}});return e.jsx(I,{size:16,direction:"vertical",children:(n=s==null?void 0:s.data)==null?void 0:n.map(r=>e.jsx($d,{item:r},r.id))})},Fd=({id:t,company:s,date:n,price:r,title:a,user:i,variant:o="default"})=>{const{replace:u}=R(),{mutate:l}=Me(),d=S.useMemo(()=>[{label:"View card",key:"1",icon:e.jsx(It,{}),onClick:()=>{u(`/scrumboard/sales/edit/${t}`)}},{danger:!0,label:"Delete card",key:"2",icon:e.jsx(pe,{}),onClick:()=>{l({resource:"deals",id:t})}}],[]),m=S.useMemo(()=>{const c={Card:{colorBgContainer:"white",colorBorderSecondary:"#F0F0F0"},Typography:{colorText:"rgba(0, 0, 0, 0.85)",colorTextDescription:"rgba(0, 0, 0, 0.65)"}};return o==="won"&&(c.Card.colorBgContainer="#F6FFED",c.Card.colorBorderSecondary="#B7EB8F",c.Typography.colorText="#135200",c.Typography.colorTextDescription="#135200"),o==="lost"&&(c.Card.colorBgContainer="#FFF1F0",c.Card.colorBorderSecondary="#FFA39E",c.Typography.colorText="#820014",c.Typography.colorTextDescription="#820014"),c},[o]);return e.jsx(ss,{theme:{token:{marginXS:0,marginXXS:0,colorPrimaryText:"red",colorTextSecondary:"red"},components:{Typography:{...m.Typography},Card:{...m.Card}}},children:e.jsx(B,{size:"small",bordered:!0,onClick:()=>{u(`/scrumboard/sales/edit/${t}`)},actions:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Le,{title:i.name,children:e.jsx(L,{src:i==null?void 0:i.avatarUrl,name:i==null?void 0:i.name})}),e.jsx(Le,{title:A(n).format("DD MMMM YYYY, HH:MM"),children:e.jsx(p,{size:"xs",type:"secondary",children:A(n).fromNow()})})]}),e.jsx(p,{children:r})]},"1")],children:e.jsx(B.Meta,{avatar:e.jsx(L,{style:{width:"48px",height:"48px"},shape:"square",size:"large",src:s==null?void 0:s.avatarUrl,name:s==null?void 0:s.name}),title:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[e.jsx(p,{style:{fontWeight:400},type:"secondary",ellipsis:{tooltip:a},children:s.name}),e.jsx(Fe,{trigger:["click"],menu:{items:d,onPointerDown:c=>{c.stopPropagation()},onClick:c=>{c.domEvent.stopPropagation()}},placement:"bottom",arrow:{pointAtCenter:!0},children:e.jsx(C,{type:"text",size:"small",shape:"circle",style:{backgroundColor:"white"},icon:e.jsx(Tt,{style:{transform:"rotate(90deg)"}}),onPointerDown:c=>{c.stopPropagation()},onClick:c=>{c.stopPropagation()}})})]}),description:e.jsx(p,{strong:!0,size:"md",children:a})})})})},hs=()=>e.jsx(B,{size:"small",actions:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 12px"},children:[e.jsxs("div",{children:[e.jsx(N.Avatar,{size:"small",shape:"circle",active:!0}),e.jsx(N.Button,{size:"small",active:!0,style:{width:"50px",marginTop:"4px",marginLeft:"8px",height:"16px"}})]}),e.jsx(N.Button,{size:"small",active:!0,style:{width:"100px",marginTop:"4px",height:"16px"}})]},1)],children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"16px",height:"72px"},children:[e.jsx(N.Avatar,{active:!0,style:{width:"48px",height:"48px",borderRadius:"4px"},shape:"square",size:"large"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx(N.Button,{active:!0,size:"small",style:{height:"22px",width:"125px"}}),e.jsx(N.Button,{active:!0,size:"small",style:{marginTop:"8px",height:"22px",width:"125px"}})]})]})}),Pt=S.memo(Fd,(t,s)=>t.id===s.id&&t.title===s.title&&t.price===s.price&&t.date===s.date&&t.user.name===s.user.name&&t.company.name===s.company.name&&t.variant===s.variant),Ld="_container_fer9z_1",zd="_dropArea_fer9z_14",Md="_lost_fer9z_25",qd="_isOver_fer9z_30",Rd="_won_fer9z_37",We={container:Ld,dropArea:zd,lost:Md,isOver:qd,won:Rd},Bd=()=>{const[t,s]=S.useState(!1);return pr({onDragStart:()=>s(!0),onDragEnd:()=>s(!1)}),t?e.jsxs("div",{className:We.container,children:[e.jsx(Qd,{}),e.jsx(Vd,{})]}):null},Qd=()=>{const{setNodeRef:t,over:s}=Us({id:"won"});return e.jsx("div",{ref:t,className:me(We.dropArea,We.won,{[We.isOver]:(s==null?void 0:s.id)==="won"}),children:e.jsx(p,{style:{color:"inherit"},size:"xxxl",children:"WON "})})},Vd=()=>{const{setNodeRef:t,over:s}=Us({id:"lost"});return e.jsx("div",{ref:t,className:me(We.dropArea,We.lost,{[We.isOver]:(s==null?void 0:s.id)==="lost"}),children:e.jsx(p,{style:{color:"inherit"},size:"xxxl",children:"LOST "})})},Yd=({initialValues:t,isLoading:s})=>{var a;const n=he(),{formProps:r}=X({queryOptions:{enabled:!1},redirect:!1,autoSave:{enabled:!0,onFinish:i=>{var o;return{...i,checklist:(o=i.checklist)==null?void 0:o.filter(Boolean)}}},successNotification:!1,onMutationSuccess:()=>{n({invalidates:["list"],resource:"tasks"})},meta:{gqlMutation:Nt}});return S.useEffect(()=>{var i;(i=r.form)==null||i.setFieldsValue(t)},[t.checklist]),s?e.jsx(Ys,{}):e.jsxs("div",{style:{padding:"12px 24px",borderBottom:"1px solid #d9d9d9"},children:[e.jsx(su,{checklist:((a=r.form)==null?void 0:a.getFieldValue("checklist"))??t.checklist}),e.jsx("div",{style:{border:"1px solid #d9d9d9",borderRadius:"8px",marginLeft:"30px"},children:e.jsx(g,{...r,initialValues:t,children:e.jsx(g.List,{name:"checklist",children:(i,{add:o,remove:u})=>e.jsxs(e.Fragment,{children:[i.map(l=>e.jsxs("div",{style:{display:"flex",flex:1,alignItems:"center",padding:"8px",borderBottom:"1px solid #d9d9d9"},children:[e.jsx(g.Item,{...l,noStyle:!0,name:[l.name],children:e.jsx(bd,{})}),e.jsx(C,{type:"text",size:"small",onClick:()=>u(l.name),style:{opacity:"0.15"},icon:e.jsx(pe,{})})]},l.key)),e.jsx(g.Item,{noStyle:!0,children:e.jsx(C,{type:"link",onClick:()=>o(),block:!0,icon:e.jsx(ts,{}),style:{textAlign:"left",marginTop:"8px",marginBottom:"8px"},children:"Add item"})})]})})})})]})},Wd=()=>{const t=he(),{id:s}=vt(),{data:n}=Ee(),{formProps:r,formLoading:a,form:i,onFinish:o}=X({action:"create",resource:"taskComments",queryOptions:{enabled:!1},redirect:!1,mutationMode:"optimistic",onMutationSuccess:()=>{t({invalidates:["list","detail"],resource:"tasks",id:s})},successNotification:()=>({key:"task-comment",message:"Successfully added comment",description:"Successful",type:"success"})}),u=async l=>{if(!s)return;if(!l.comment.trim()){i.resetFields();return}try{await o({...l,taskId:s})}catch{}i.resetFields()};return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(L,{style:{flexShrink:0},src:n==null?void 0:n.avatarUrl,name:n==null?void 0:n.name}),e.jsx(g,{...r,style:{width:"100%"},onFinish:u,children:e.jsx(g.Item,{name:"comment",noStyle:!0,rules:[{required:!0,transform(l){return l==null?void 0:l.trim()},message:"Please enter a comment"}],children:e.jsx(w,{placeholder:"Write a comment",addonAfter:a&&e.jsx(Os,{})})})})]})},Hd=S.lazy(()=>De(()=>import("./@uiw-034b265c.js"),["assets/@uiw-034b265c.js","assets/@babel-1b4b41ae.js","assets/react-f83171f6.js","assets/@algolia-6bb98d1b.js","assets/micromark-util-combine-extensions-34ef5cdc.js","assets/micromark-util-chunked-6f054bfc.js","assets/micromark-util-character-b44aa8a7.js","assets/micromark-extension-gfm-footnote-f8d4e9d7.js","assets/micromark-factory-space-1d8c7640.js","assets/micromark-util-normalize-identifier-dfdf0387.js","assets/micromark-core-commonmark-8b4646b7.js","assets/micromark-util-classify-character-9e93f1e0.js","assets/micromark-util-resolve-all-8a85a8df.js","assets/decode-named-character-reference-29ded5ae.js","assets/micromark-util-subtokenize-d9357da7.js","assets/micromark-factory-destination-5cbd3f54.js","assets/micromark-factory-label-13b42ae9.js","assets/micromark-factory-title-868a47c6.js","assets/micromark-factory-whitespace-1751da97.js","assets/micromark-util-html-tag-name-eaa6d7c0.js","assets/ccount-97b3fed9.js","assets/mdast-util-gfm-footnote-ac38b117.js","assets/micromark-util-decode-string-02bf9559.js","assets/micromark-util-decode-numeric-character-reference-bd25dc10.js","assets/rehype-raw-e68e8740.js","assets/hast-util-raw-d699ab4f.js","assets/html-void-elements-99229dcc.js","assets/web-namespaces-a6665c10.js","assets/zwitch-18fef54d.js","assets/hast-util-from-parse5-2e467fc5.js","assets/vfile-location-71013d3a.js","assets/hastscript-e888e985.js","assets/hast-util-parse-selector-2e5db8ec.js","assets/unist-util-visit-f72c27b5.js","assets/unist-util-position-793764a5.js","assets/hast-util-to-parse5-11afe826.js","assets/prop-types-30de2bcf.js","assets/hast-util-whitespace-aa13952a.js","assets/inline-style-parser-e2a37bce.js","assets/extend-b3232017.js","assets/micromark-util-sanitize-uri-493ba26b.js","assets/trim-lines-00010efb.js","assets/rehype-prism-plus-f2b4f0b5.js","assets/hast-util-to-string-00227f59.js","assets/parse-numeric-range-446232fd.js","assets/refractor-4e990fc6.js","assets/parse-entities-886a4bc9.js","assets/character-entities-legacy-d39742d7.js","assets/character-reference-invalid-da0c882b.js","assets/is-decimal-dfcce753.js","assets/is-hexadecimal-f403e296.js","assets/is-alphanumerical-4b9c73ef.js","assets/is-alphabetical-ea837323.js","assets/unist-util-filter-7d8ef162.js","assets/rehype-rewrite-8277dea6.js","assets/hast-util-select-74f394f3.js","assets/direction-ad776bdc.js","assets/hast-util-has-property-acd5f273.js","assets/bcp-47-match-575b2c5d.js","assets/nth-check-75195840.js","assets/boolbase-a031e425.js","assets/css-selector-parser-ca05af30.js","assets/rehype-attr-030cb18c.js","assets/rehype-slug-7f392561.js","assets/github-slugger-15b5d832.js","assets/hast-util-heading-rank-1ca6eaab.js","assets/rehype-ignore-c90cffa8.js","assets/rehype-autolink-headings-484b3924.js","assets/hast-util-is-element-4fe6b149.js","assets/rehype-7c152115.js","assets/rehype-parse-f20a9ed4.js","assets/rehype-stringify-c8ae307e.js","assets/hast-util-to-html-02689770.js","assets/stringify-entities-5742d472.js","assets/character-entities-html4-26dda978.js","assets/index-0a14a46d.css"])),Gd=({initialValues:t,cancelForm:s})=>{const{formProps:n,saveButtonProps:r}=X({queryOptions:{enabled:!1},redirect:!1,onMutationSuccess:()=>{s()},meta:{gqlMutation:Nt}});return e.jsxs(e.Fragment,{children:[e.jsx(g,{...n,initialValues:t,children:e.jsx(S.Suspense,{children:e.jsx(g.Item,{noStyle:!0,name:"description",children:e.jsx(Hd,{preview:"edit","data-color-mode":"light",height:250})})})}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"end",marginTop:"12px"},children:e.jsxs(I,{children:[e.jsx(C,{type:"default",onClick:s,children:"Cancel"}),e.jsx(C,{...r,type:"primary",children:"Save"})]})})]})},Kd=({initialValues:t,cancelForm:s})=>{const{formProps:n,saveButtonProps:r}=X({queryOptions:{enabled:!1},redirect:!1,onMutationSuccess:()=>{s()},meta:{gqlQuery:Nt}});return e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(g,{...n,initialValues:t,children:e.jsx(g.Item,{noStyle:!0,name:"dueDate",getValueProps:a=>a?{value:A(a)}:{value:void 0},children:e.jsx(wt,{format:"YYYY-MM-DD HH:mm",showTime:{showSecond:!1,format:"HH:mm"},style:{backgroundColor:"#fff"}})})}),e.jsxs(I,{children:[e.jsx(C,{type:"default",onClick:s,children:"Cancel"}),e.jsx(C,{...r,type:"primary",children:"Save"})]})]})},Zd=T`
    query TaskStagesSelect(
        $filter: TaskStageFilter!
        $sorting: [TaskStageSort!]
        $paging: OffsetPaging!
    ) {
        taskStages(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                title
            }
        }
    }
`,Xd=({initialValues:t,isLoading:s})=>{var i;const n=he(),{formProps:r}=X({queryOptions:{enabled:!0},autoSave:{enabled:!0,debounce:0,onFinish:o=>{var u;return{...o,stage:void 0,stageId:(u=o.stage)==null?void 0:u.id}}},onMutationSuccess:()=>{n({invalidates:["list"],resource:"tasks"})}}),{selectProps:a}=qe({resource:"taskStages",meta:{gqlQuery:Zd}});return S.useEffect(()=>{var o;(o=r.form)==null||o.setFieldsValue(t)},[t.completed,t.stage]),s?e.jsx(Ys,{}):e.jsx("div",{style:{padding:"12px 24px",borderBottom:"1px solid #d9d9d9"},children:e.jsxs(g,{layout:"inline",style:{justifyContent:"space-between",alignItems:"center"},...r,initialValues:t,children:[e.jsxs(I,{size:5,children:[e.jsx(Es,{}),e.jsx(g.Item,{noStyle:!0,name:["stage","id"],children:e.jsx($,{...a,popupMatchSelectWidth:!1,options:(i=a.options)==null?void 0:i.concat([{label:"Unassigned",value:null}]),bordered:!1,showSearch:!1,placeholder:"Select a stage",onSearch:void 0,size:"small"})})]}),e.jsx(g.Item,{noStyle:!0,name:"completed",valuePropName:"checked",children:e.jsx(dt,{children:"Mark as complete"})})]})})},Jd=({value:t,onChange:s})=>{const n=r=>{s==null||s(r)};return e.jsx(p,{editable:{onChange:n},style:{width:"98%"},children:t})},eu=({initialValues:t,isLoading:s})=>{const n=he(),{formProps:r}=X({queryOptions:{enabled:!1},redirect:!1,warnWhenUnsavedChanges:!1,autoSave:{enabled:!0},onMutationSuccess:()=>{n({invalidates:["list"],resource:"tasks"})},meta:{gqlMutation:Nt}});return S.useEffect(()=>{var a;(a=r.form)==null||a.setFieldsValue(t)},[t.title]),s?e.jsx(N.Input,{size:"small",style:{width:"95%",height:"22px"},block:!0}):e.jsx(g,{...r,initialValues:t,children:e.jsx(g.Item,{noStyle:!0,name:"title",children:e.jsx(Jd,{})})})},tu=({initialValues:t,cancelForm:s})=>{const{formProps:n,saveButtonProps:r}=X({queryOptions:{enabled:!1},redirect:!1,onMutationSuccess:()=>{s()},meta:{gqlMutation:Nt}}),{selectProps:a}=je();return e.jsxs("div",{style:{display:"flex",alignItems:"end",justifyContent:"space-between",gap:"12px"},children:[e.jsx(g,{...n,style:{width:"100%"},initialValues:t,children:e.jsx(g.Item,{noStyle:!0,name:"userIds",children:e.jsx($,{...a,className:"kanban-users-form-select",dropdownStyle:{padding:"0px"},style:{width:"100%"},mode:"multiple"})})}),e.jsxs(I,{children:[e.jsx(C,{type:"default",onClick:s,children:"Cancel"}),e.jsx(C,{...r,type:"primary",children:"Save"})]})]})},su=({checklist:t=[]})=>{const s=t.filter(r=>r==null?void 0:r.checked).length,n=t.length;return e.jsxs(I,{size:15,align:"start",style:{marginBottom:"12px"},children:[e.jsx(bn,{}),e.jsx(p,{strong:!0,children:"Checklist "}),e.jsxs(p,{type:"secondary",children:[s,"/",n]})]})},nu=({description:t})=>t?e.jsx(W.Paragraph,{ellipsis:{rows:8},children:e.jsx(xa,{value:t})}):e.jsx(W.Link,{children:"Add task description"}),au=({dueData:t})=>{if(t){const s=On({date:t,defaultColor:"processing"}),n=()=>{switch(s){case"error":return"Overdue";case"warning":return"Due soon";default:return"Processing"}};return e.jsxs(I,{size:[0,8],children:[e.jsx(Se,{color:s,children:n()}),e.jsx(p,{children:A(t).format("MMMM D, YYYY - h:ma")})]})}return e.jsx(W.Link,{children:"Add due date"})},ru=({users:t=[]})=>t.length>0?e.jsx(I,{size:[0,8],wrap:!0,children:t.map(s=>e.jsx($n,{user:s},s.id))}):e.jsx(W.Link,{children:"Assign to users"}),at=({children:t,id:s,data:n})=>{const{attributes:r,listeners:a,setNodeRef:i,active:o}=xr({id:s,data:n});return e.jsxs("div",{style:{position:"relative"},children:[e.jsx("div",{ref:i,...a,...r,style:{opacity:o?o.id===s?1:.5:1,borderRadius:"8px",position:"relative",cursor:"grab"},children:t}),(o==null?void 0:o.id)===s&&e.jsx(gr,{zIndex:1e3,children:e.jsx("div",{style:{borderRadius:"8px",boxShadow:"0px 9px 28px 8px rgba(0, 0, 0, 0.05), 0px 3px 6px -4px rgba(0, 0, 0, 0.12), 0px 6px 16px 0px rgba(0, 0, 0, 0.08)",cursor:"grabbing"},children:t})})]})},iu=()=>{const{list:t}=R();return e.jsx(Ge,{type:"link",onSuccess:()=>{t("tasks","replace")},children:"Delete card"})},ou=({id:t,title:s,checkList:n,comments:r,dueDate:a,users:i})=>{const{token:o}=Oe.useToken(),{edit:u}=R(),{mutate:l}=Me(),d=S.useMemo(()=>[{label:"View card",key:"1",icon:e.jsx(It,{}),onClick:()=>{u("tasks",t,"replace")}},{danger:!0,label:"Delete card",key:"2",icon:e.jsx(pe,{}),onClick:()=>{l({resource:"tasks",id:t,meta:{operation:"task"}})}}],[]),m=S.useMemo(()=>{if(!a)return null;const x=A(a);return{color:On({date:a}),text:x.format("MMM D")}},[a]),c=S.useMemo(()=>{if(!(n&&n.length>0))return null;const h=n.length,j=n==null?void 0:n.filter(y=>y.checked).length,f={color:"default",text:`${j}/${h}`,allCompleted:!1};return j===h&&(f.color="success",f.allCompleted=!0),f},[n]);return e.jsx(ss,{theme:{components:{Tag:{colorText:o.colorTextSecondary},Card:{headerBg:"transparent"}}},children:e.jsx(B,{size:"small",title:e.jsx(p,{ellipsis:{tooltip:s},children:s}),onClick:()=>{u("tasks",t,"replace")},extra:e.jsx(Fe,{trigger:["click"],menu:{items:d,onPointerDown:x=>{x.stopPropagation()},onClick:x=>{x.domEvent.stopPropagation()}},placement:"bottom",arrow:{pointAtCenter:!0},children:e.jsx(C,{type:"text",shape:"circle",icon:e.jsx(Tt,{style:{transform:"rotate(90deg)"}}),onPointerDown:x=>{x.stopPropagation()},onClick:x=>{x.stopPropagation()}})}),children:e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"8px"},children:[e.jsx(Ls,{style:{marginRight:"4px"}}),!!(r!=null&&r.totalCount)&&e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[e.jsx(Qa,{style:{color:o.colorTextSecondary,fontSize:"12px"}}),e.jsx(p,{size:"xs",type:"secondary",children:r.totalCount})]}),m&&e.jsx(Se,{icon:e.jsx(yn,{style:{fontSize:"12px"}}),style:{padding:"0 4px",marginInlineEnd:"0",backgroundColor:m.color==="default"?"transparent":"unset"},color:m.color,bordered:m.color!=="default",children:m.text}),c&&e.jsx(Se,{icon:e.jsx(bn,{style:{fontSize:"12px"}}),style:{padding:"0 4px",marginInlineEnd:"0",backgroundColor:c.color==="default"?"transparent":"unset"},color:c.color,bordered:c.color!=="default",children:c.text}),!!(i!=null&&i.length)&&e.jsx(I,{size:4,wrap:!0,direction:"horizontal",align:"center",style:{display:"flex",justifyContent:"flex-end",marginLeft:"auto",marginRight:"0"},children:i.map(x=>e.jsx(Le,{title:x.name,children:e.jsx(L,{name:x.name,src:x.avatarUrl})},x.id))})]})})})},Vn=()=>e.jsxs(B,{size:"small",bodyStyle:{display:"flex",justifyContent:"center",gap:"8px"},title:e.jsx(N.Button,{active:!0,size:"small",style:{width:"200px",height:"22px"}}),children:[e.jsx(N.Button,{active:!0,size:"small",style:{width:"200px"}}),e.jsx(N.Avatar,{active:!0,size:"small"})]}),on=S.memo(ou,(t,s)=>{var n,r,a,i;return t.id===s.id&&t.title===s.title&&t.dueDate===s.dueDate&&t.comments.totalCount===s.comments.totalCount&&((n=t.checkList)==null?void 0:n.length)===((r=s.checkList)==null?void 0:r.length)&&((a=t.users)==null?void 0:a.length)===((i=s.users)==null?void 0:i.length)}),lu=()=>{const[t,s]=S.useState(),{list:n}=R(),{modalProps:r,close:a}=cn({modalProps:{open:!0}}),{queryResult:{data:i,isLoading:o}}=Wt({meta:{gqlQuery:gd}}),{description:u,completed:l,stage:d,dueDate:m,users:c,checklist:x,title:h}=(i==null?void 0:i.data)??{};return e.jsxs(oe,{...r,className:"kanban-update-modal",onCancel:()=>{a(),n("tasks","replace")},title:e.jsx(eu,{initialValues:{title:h},isLoading:o??!0}),width:586,footer:e.jsx(iu,{}),children:[e.jsx(Xd,{initialValues:{completed:l??!1,stage:d},isLoading:o}),e.jsx(gs,{accordionKey:"description",activeKey:t,setActive:s,fallback:e.jsx(nu,{description:u}),isLoading:o,icon:e.jsx(Va,{}),label:"Description",children:e.jsx(Gd,{initialValues:{description:u},cancelForm:()=>s(void 0)})}),e.jsx(gs,{accordionKey:"due-date",activeKey:t,setActive:s,fallback:e.jsx(au,{dueData:m}),isLoading:o,icon:e.jsx(Ya,{}),label:"Due date",children:e.jsx(Kd,{initialValues:{dueDate:m??void 0},cancelForm:()=>s(void 0)})}),e.jsx(gs,{accordionKey:"users",activeKey:t,setActive:s,fallback:e.jsx(ru,{users:c}),isLoading:o,icon:e.jsx(Wa,{}),label:"Users",children:e.jsx(tu,{initialValues:{userIds:c==null?void 0:c.map(j=>({label:j.name,value:j.id}))},cancelForm:()=>s(void 0)})}),e.jsx(Yd,{isLoading:o,initialValues:{checklist:x}}),e.jsxs("div",{style:{backgroundColor:"#f0f2f5",padding:"24px",display:"flex",flexDirection:"column",gap:"48px",borderBottom:"1px solid #d9d9d9"},children:[e.jsx(Wd,{}),e.jsx(Ud,{})]})]})},cu=()=>{const t=he(),{list:s}=R(),{formProps:n,modalProps:r,close:a}=be({action:"edit",defaultVisible:!0,resource:"taskStages",meta:{gqlMutation:xd},onMutationSuccess:()=>{t({invalidates:["list"],resource:"tasks"})},successNotification:()=>({key:"edit-stage",type:"success",message:"Successfully updated stage",description:"Successful"})});return e.jsx(oe,{...r,onCancel:()=>{a(),s("tasks","replace")},title:"Edit stage",width:512,children:e.jsx(g,{...n,layout:"vertical",children:e.jsx(g.Item,{label:"Title",name:"title",rules:[{required:!0}],children:e.jsx(w,{})})})})},du=({children:t})=>{var G,Y,z,b;const{create:s,edit:n,replace:r}=R(),{data:a,isLoading:i}=te({resource:"taskStages",pagination:{mode:"off"},sorters:[{field:"createdAt",order:"asc"}],meta:{gqlQuery:jd}}),{data:o,isLoading:u}=te({resource:"tasks",sorters:[{field:"dueDate",order:"asc"}],queryOptions:{enabled:!!a},pagination:{mode:"off"},meta:{gqlQuery:fd}}),l=S.useMemo(()=>{if(!(o!=null&&o.data)||!(a!=null&&a.data))return{unassignedStage:[],stages:[]};const k=o.data.filter(q=>q.stageId===null),P=a.data.map(q=>({...q,tasks:o.data.filter(Z=>{var H;return((H=Z.stageId)==null?void 0:H.toString())===q.id})}));return{unassignedStage:k,stages:P}},[o,a]),{mutate:d}=ct(),{mutate:m}=un(),{mutate:c}=Me(),x=k=>{var H,re;let P=(H=k.over)==null?void 0:H.id;const q=k.active.id;((re=k.active.data.current)==null?void 0:re.stageId)!==P&&(P==="unassigned"&&(P=null),d({resource:"tasks",id:q,values:{stageId:P},successNotification:!1,mutationMode:"optimistic"}))},h=()=>{s("taskStages","replace")},j=k=>{n("taskStages",k.stageId)},f=k=>{c({resource:"taskStage",id:k.stageId,successNotification:()=>({key:"delete-stage",type:"success",message:"Successfully deleted stage",description:"Successful"})})},y=k=>{const P=k.stageId==="unassigned"?"create":`create?stageId=${k.stageId}`;r(P)},_=k=>{m({resource:"tasks",ids:k.taskIds,values:{stageId:null},successNotification:!1})},D=k=>{const P=k.tasks.length>0;return[{label:"Edit status",key:"1",icon:e.jsx(Ne,{}),onClick:()=>j({stageId:k.id})},{label:"Clear all cards",key:"2",icon:e.jsx(In,{}),disabled:!P,onClick:()=>_({taskIds:k.tasks.map(Z=>Z.id)})},{danger:!0,label:"Delete status",key:"3",icon:e.jsx(pe,{}),disabled:P,onClick:()=>f({stageId:k.id})}]},M=u||i;return M?e.jsx(uu,{}):e.jsxs(e.Fragment,{children:[e.jsxs(Bn,{onDragEnd:x,children:[e.jsxs(nt,{id:"unassigned",title:"unassigned",count:((G=l==null?void 0:l.unassignedStage)==null?void 0:G.length)||0,onAddClick:()=>y({stageId:"unassigned"}),children:[(Y=l.unassignedStage)==null?void 0:Y.map(k=>e.jsx(at,{id:k.id,data:{...k,stageId:"unassigned"},children:e.jsx(on,{...k})},k.id)),!((z=l.unassignedStage)!=null&&z.length)&&e.jsx(Rt,{onClick:()=>y({stageId:"unassigned"})})]}),(b=l.stages)==null?void 0:b.map(k=>{const P=D(k);return e.jsxs(nt,{id:k.id,title:k.title,count:k.tasks.length,contextMenuItems:P,onAddClick:()=>y({stageId:k.id}),children:[M&&e.jsx(Vn,{}),!M&&k.tasks.map(q=>e.jsx(at,{id:q.id,data:{...q,stageId:k.id},children:e.jsx(on,{...q})},q.id)),!k.tasks.length&&e.jsx(Rt,{onClick:()=>y({stageId:k.id})})]},k.id)}),e.jsx(Ws,{onClick:h})]}),t]})},uu=()=>e.jsx(Qn,{children:Array.from({length:6}).map((n,r)=>e.jsx(Ut,{type:"project",children:Array.from({length:4}).map((a,i)=>e.jsx(Vn,{},i))},r))}),Yn=T`
    query SalesCompaniesSelect(
        $filter: CompanyFilter!
        $sorting: [CompanySort!]
        $paging: OffsetPaging!
    ) {
        companies(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                name
                avatarUrl
                contacts {
                    nodes {
                        name
                        id
                        avatarUrl
                    }
                }
            }
        }
    }
`,mu=T`
    mutation SalesCreateDealStage($input: CreateOneDealStageInput!) {
        createOneDealStage(input: $input) {
            id
        }
    }
`,pu=T`
    mutation SalesCreateContact($input: CreateOneContactInput!) {
        createOneContact(input: $input) {
            id
        }
    }
`,xu=T`
    mutation SalesUpdateDealStage($input: UpdateOneDealStageInput!) {
        updateOneDealStage(input: $input) {
            id
            title
        }
    }
`,gu=T`
    mutation SalesUpdateDeal($input: UpdateOneDealInput!) {
        updateOneDeal(input: $input) {
            id
            title
            stageId
            value
            dealOwnerId
            company {
                id
                contacts {
                    nodes {
                        id
                        name
                        avatarUrl
                    }
                }
            }
            dealContact {
                id
            }
        }
    }
`,hu=T`
    mutation SalesFinalizeDeal($input: UpdateOneDealInput!) {
        updateOneDeal(input: $input) {
            id
            notes
            closeDateYear
            closeDateMonth
            closeDateDay
        }
    }
`,ju=T`
    query SalesDealStages(
        $filter: DealStageFilter!
        $sorting: [DealStageSort!]
        $paging: OffsetPaging
    ) {
        dealStages(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                title
                dealsAggregate {
                    sum {
                        value
                    }
                }
            }
            totalCount
        }
    }
`,fu=T`
    query SalesDeals(
        $filter: DealFilter!
        $sorting: [DealSort!]
        $paging: OffsetPaging!
    ) {
        deals(filter: $filter, sorting: $sorting, paging: $paging) {
            nodes {
                id
                title
                value
                createdAt
                stageId
                company {
                    id
                    name
                    avatarUrl
                }
                dealOwner {
                    id
                    name
                    avatarUrl
                }
            }
        }
    }
`,yu=({children:t})=>{var D,M,G,Y,z;const[s]=lt(),{pathname:n}=kt(),{list:r,replace:a}=R(),{formProps:i,modalProps:o,close:u}=be({action:"create",defaultVisible:!0});S.useEffect(()=>{var P,q;const b=s.get("stageId"),k=s.get("companyId");b&&((P=i.form)==null||P.setFieldsValue({stageId:b})),k&&k!=="null"&&((q=i.form)==null||q.setFieldsValue({companyId:k}))},[s]);const{selectProps:l,queryResult:d}=qe({resource:"companies",optionLabel:"name",meta:{gqlQuery:Yn}}),{selectProps:m}=Bs(),{selectProps:c,queryResult:x}=je(),{data:h}=Ee(),{mutateAsync:j}=ga(),f=g.useWatch("companyId",i.form);S.useEffect(()=>{var b;(b=i.form)==null||b.setFieldValue("dealContactId",void 0)},[f]);const y=()=>{var P,q,Z,H,re,le;if(!f)return null;const b=(q=(P=d.data)==null?void 0:P.data)==null?void 0:q.find(Xe=>Xe.id===f);if(((H=(Z=b==null?void 0:b.contacts)==null?void 0:Z.nodes)==null?void 0:H.length)!==void 0&&b.contacts.nodes.length>0){const Xe=(le=(re=b==null?void 0:b.contacts)==null?void 0:re.nodes)==null?void 0:le.map(Je=>({label:e.jsx(ve,{name:Je.name,avatarUrl:Je.avatarUrl??void 0}),value:Je.id}));return e.jsx(g.Item,{label:"Deal contact",name:"dealContactId",rules:[{required:!0}],children:e.jsx($,{options:Xe})})}return e.jsxs(ee,{gutter:12,children:[e.jsx(F,{span:12,children:e.jsx(g.Item,{label:"Contact name",name:"contactName",rules:[{required:!0}],children:e.jsx(w,{addonBefore:e.jsx(rt,{}),placeholder:"Contact name"})})}),e.jsx(F,{span:12,children:e.jsx(g.Item,{label:"Contact email",name:"contactEmail",rules:[{required:!0}],children:e.jsx(w,{addonBefore:e.jsx(Ke,{}),placeholder:"Contact email"})})})]})},_=n==="/scrumboard/sales/create/company/create";return e.jsxs(e.Fragment,{children:[e.jsx(oe,{...o,style:{display:_?"none":"inherit"},onCancel:()=>{u(),r("deals","replace")},title:"Add new deal",width:512,children:e.jsxs(g,{...i,layout:"vertical",onFinish:async b=>{var k,P;if(b.contactName&&b.contactEmail){const{data:q}=await j({resource:"contacts",values:{name:b.contactName,email:b.contactEmail,salesOwnerId:h==null?void 0:h.id,companyId:f},meta:{gqlMutation:pu}});delete b.contactName,delete b.contactEmail,q&&((k=i.onFinish)==null||k.call(i,{...b,dealContactId:q.id,dealOwnerId:h==null?void 0:h.id}))}else(P=i.onFinish)==null||P.call(i,b)},children:[e.jsx(g.Item,{label:"Deal title",name:"title",rules:[{required:!0}],children:e.jsx(w,{placeholder:"Please enter deal title"})}),e.jsx(g.Item,{label:"Company",name:"companyId",rules:[{required:!0}],extra:e.jsxs(W.Link,{style:{marginTop:8,display:"block"},onClick:()=>a("company/create?to=/scrumboard/sales/create"),children:[e.jsx(Ie,{})," Add new company"]}),children:e.jsx($,{placeholder:"Please select company",...l,options:((M=(D=d.data)==null?void 0:D.data)==null?void 0:M.map(b=>({value:b.id,label:e.jsx(ve,{name:b.name,shape:"square",avatarUrl:b.avatarUrl??void 0})})))??[]})}),y(),e.jsxs(ee,{gutter:12,children:[e.jsx(F,{span:12,children:e.jsx(g.Item,{label:"Stage",name:"stageId",children:e.jsx($,{placeholder:"Please select stage",...m,showSearch:!1,options:(G=m.options)==null?void 0:G.concat({label:"UNASSIGNED",value:null})})})}),e.jsx(F,{span:12,children:e.jsx(g.Item,{rules:[{required:!0}],label:"Deal value",name:"value",children:e.jsx(Ue,{min:0,addonBefore:e.jsx(_t,{}),placeholder:"0,00",formatter:b=>`${b}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")})})})]}),e.jsx(g.Item,{label:"Deal owner",name:"dealOwnerId",rules:[{required:!0}],children:e.jsx($,{placeholder:"Please select user",...c,options:((z=(Y=x.data)==null?void 0:Y.data)==null?void 0:z.map(b=>({value:b.id,label:e.jsx(ve,{name:b.name,avatarUrl:b.avatarUrl??void 0})})))??[]})})]})}),t]})},vu=()=>{const t=he(),{list:s}=R(),{formProps:n,modalProps:r,close:a}=be({action:"create",defaultVisible:!0,resource:"dealStages",meta:{gqlMutation:mu},onMutationSuccess:()=>{t({invalidates:["list"],resource:"deals"})},successNotification:()=>({key:"create-stage",type:"success",message:"Successfully created stage",description:"Successful"})});return e.jsx(oe,{...r,onCancel:()=>{a(),s("deals","replace")},title:"Add new stage",width:512,children:e.jsx(g,{...n,layout:"vertical",children:e.jsx(g.Item,{label:"Title",name:"title",rules:[{required:!0}],children:e.jsx(w,{})})})})},Cu=()=>{var f,y,_,D,M,G,Y;const{list:t}=R(),{formProps:s,modalProps:n,close:r,queryResult:a}=be({action:"edit",defaultVisible:!0,meta:{gqlMutation:gu}}),{selectProps:i,queryResult:o}=qe({resource:"companies",optionLabel:"name",meta:{gqlQuery:Yn}}),{selectProps:u}=Bs(),{selectProps:l,queryResult:d}=je(),m=(f=a==null?void 0:a.data)==null?void 0:f.data,c=g.useWatch("companyId",s.form);S.useEffect(()=>{var z,b;((z=m==null?void 0:m.company)==null?void 0:z.id)!==c&&((b=s.form)==null||b.setFieldValue(["dealContactId"],void 0))},[c]);const{selectProps:x,queryResult:h}=Qs({filters:[{field:"company.id",operator:"eq",value:c}]}),j=()=>{var b,k,P,q,Z,H;if(o.isLoading)return null;if(((P=(k=(b=m==null?void 0:m.company)==null?void 0:b.contacts)==null?void 0:k.nodes)==null?void 0:P.length)!==void 0&&(m==null?void 0:m.company.contacts.nodes.length)>0){const re=(Z=(q=h==null?void 0:h.data)==null?void 0:q.data)==null?void 0:Z.map(le=>({label:e.jsx(ve,{name:le.name,avatarUrl:le.avatarUrl??void 0}),value:le.id}));return e.jsx(g.Item,{label:"Deal contact",name:["dealContactId"],trigger:"",rules:[{required:!0}],initialValue:(H=m==null?void 0:m.dealContact)==null?void 0:H.id,dependencies:["companyId"],preserve:!1,children:e.jsx($,{...x,options:re})})}return null};return e.jsx(oe,{...n,onCancel:()=>{r(),t("deals","replace")},title:"Edit deal",width:512,children:e.jsxs(g,{...s,layout:"vertical",preserve:!1,children:[e.jsx(g.Item,{label:"Deal title",name:"title",rules:[{required:!0}],children:e.jsx(w,{placeholder:"Please enter deal title"})}),e.jsx(g.Item,{label:"Company",initialValue:(y=m==null?void 0:m.company)==null?void 0:y.id,name:["companyId"],rules:[{required:!0}],dependencies:["dealContactId"],children:e.jsx($,{placeholder:"Please select company",...i,options:((D=(_=o.data)==null?void 0:_.data)==null?void 0:D.map(z=>({value:z.id,label:e.jsx(ve,{name:z.name,shape:"square",avatarUrl:z.avatarUrl??void 0})})))??[]})}),j(),e.jsxs(ee,{gutter:12,children:[e.jsx(F,{span:12,children:e.jsx(g.Item,{label:"Stage",name:"stageId",children:e.jsx($,{placeholder:"Please select stage",...u,showSearch:!1,options:(M=u.options)==null?void 0:M.concat({label:"UNASSIGNED",value:null})})})}),e.jsx(F,{span:12,children:e.jsx(g.Item,{label:"Deal value",name:"value",children:e.jsx(Ue,{min:0,addonBefore:e.jsx(_t,{}),placeholder:"0,00",formatter:z=>`${z}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")})})})]}),e.jsx(g.Item,{label:"Deal owner",name:"dealOwnerId",rules:[{required:!0}],children:e.jsx($,{placeholder:"Please select user",...l,options:((Y=(G=d.data)==null?void 0:G.data)==null?void 0:Y.map(z=>({value:z.id,label:e.jsx(ve,{name:z.name,avatarUrl:z.avatarUrl??void 0})})))??[]})})]})})},Su=()=>{const t=he(),{list:s}=R(),{formProps:n,modalProps:r,close:a}=be({action:"edit",defaultVisible:!0,resource:"dealStages",meta:{gqlMutation:xu},onMutationSuccess:()=>{t({invalidates:["list"],resource:"deals"})},successNotification:()=>({key:"edit-stage",type:"success",message:"Successfully updated stage",description:"Successful"})});return e.jsx(oe,{...r,onCancel:()=>{s("deals","replace"),a()},title:"Edit stage",width:512,children:e.jsx(g,{...n,layout:"vertical",children:e.jsx(g.Item,{label:"Title",name:"title",rules:[{required:!0}],children:e.jsx(w,{})})})})},bu=()=>{var o;const t=he(),{list:s}=R(),{formProps:n,modalProps:r,close:a,queryResult:i}=be({action:"edit",defaultVisible:!0,meta:{gqlMutation:hu},onMutationSuccess:()=>{t({invalidates:["list"],resource:"deals"})},successNotification:()=>({key:"edit-deal",type:"success",message:"Successfully updated deal",description:"Successful"})});return S.useEffect(()=>{var m,c,x,h,j,f,y;const u=((c=(m=i==null?void 0:i.data)==null?void 0:m.data)==null?void 0:c.closeDateMonth)??new Date().getMonth(),l=((h=(x=i==null?void 0:i.data)==null?void 0:x.data)==null?void 0:h.closeDateDay)??new Date().getDay(),d=((f=(j=i==null?void 0:i.data)==null?void 0:j.data)==null?void 0:f.closeDateYear)??new Date().getFullYear();(y=n.form)==null||y.setFieldsValue({closeDate:A(new Date(d,u-1,l))})},[(o=i==null?void 0:i.data)==null?void 0:o.data]),e.jsx(oe,{...r,onCancel:()=>{a(),s("deals","replace")},title:"Add more details",width:512,children:e.jsxs(g,{...n,layout:"vertical",onFinish:u=>{var l;(l=n.onFinish)==null||l.call(n,{notes:u.notes,closeDateDay:A(u.closeDate).get("date"),closeDateMonth:A(u.closeDate).get("month")+1,closeDateYear:A(u.closeDate).get("year")})},children:[e.jsx(g.Item,{label:"Notes",name:"notes",rules:[{required:!0}],children:e.jsx(w.TextArea,{rows:6})}),e.jsx(g.Item,{label:"Closed date",name:"closeDate",rules:[{required:!0}],getValueProps:u=>u?{value:u}:{value:void 0},children:e.jsx(wt,{})})]})})},Iu=new Date(new Date().setMonth(new Date().getMonth()-1)),Tu=({children:t})=>{var Y,z,b,k,P,q,Z,H,re,le,Xe,Je,Hs,Gs,Ks;const{replace:s,edit:n,create:r}=R(),{data:a,isLoading:i}=te({resource:"dealStages",pagination:{mode:"off"},sorters:[{field:"createdAt",order:"asc"}],meta:{gqlQuery:ju}}),{data:o,isLoading:u}=te({resource:"deals",sorters:[{field:"createdAt",order:"asc"}],filters:[{field:"createdAt",operator:"gte",value:Iu}],queryOptions:{enabled:!!a},pagination:{mode:"off"},meta:{gqlQuery:fu}}),l=S.useMemo(()=>{if(!(a!=null&&a.data)||!(o!=null&&o.data))return{stageUnassigned:null,stageAll:[],stageWon:null,stageLost:null};const v=a==null?void 0:a.data,Q=o==null?void 0:o.data,_e=Q.filter(de=>de.stageId===null),we=v.map(de=>({...de,deals:Q.filter(et=>et.stageId===de.id).sort((et,Ot)=>new Date(et.createdAt).getTime()-new Date(Ot.createdAt).getTime())})),Re=we.find(de=>de.title==="WON"),Be=we.find(de=>de.title==="LOST"),se=we.filter(de=>de.title!=="WON"&&de.title!=="LOST");return{stageUnassigned:_e,stageAll:se,stageWon:Re,stageLost:Be}},[a,o]),{mutate:d}=ct(),{mutate:m}=un(),{mutate:c}=Me(),{unassignedStageTotalValue:x}=S.useMemo(()=>{var Q;let v=0;return(Q=l==null?void 0:l.stageUnassigned)==null||Q.forEach(_e=>{v+=_e.value||0}),{unassignedStageTotalValue:v}},[l.stageUnassigned]),h=v=>{var Re,Be,se,de;let Q=(Re=v.over)==null?void 0:Re.id;const _e=v.active.id;((Be=v.active.data.current)==null?void 0:Be.stageId)!==Q&&(Q==="won"&&(Q=(se=l.stageWon)==null?void 0:se.id),Q==="lost"&&(Q=(de=l==null?void 0:l.stageLost)==null?void 0:de.id),Q==="unassigned"&&(Q=null),d({resource:"deals",id:_e,values:{stageId:Q},successNotification:!1,mutationMode:"optimistic"},{onSuccess:()=>{var Ot;const et=(Ot=v.over)==null?void 0:Ot.id;(et==="won"||et==="lost")&&n("finalize-deals",_e,"replace")}}))},j=()=>{r("dealStages","replace")},f=v=>{n("dealStages",v.stageId)},y=v=>{c({resource:"dealStage",id:v.stageId,successNotification:()=>({key:"delete-stage",type:"success",message:"Successfully deleted stage",description:"Successful"})})},_=v=>{const Q=v.stageId==="unassigned"?"create":`create?stageId=${v.stageId}`;s(Q)},D=v=>{m({resource:"deals",ids:v.dealsIds,values:{stageId:null},successNotification:!1})},M=v=>{const Q=v.deals.length>0;return[{label:"Edit status",key:"1",icon:e.jsx(Ne,{}),onClick:()=>f({stageId:v.id})},{label:"Clear all cards",key:"2",icon:e.jsx(In,{}),disabled:!Q,onClick:()=>D({dealsIds:v.deals.map(we=>we.id)})},{danger:!0,label:"Delete status",key:"3",icon:e.jsx(pe,{}),disabled:Q,onClick:()=>y({stageId:v.id})}]};return i||u?e.jsx(_u,{}):e.jsxs(e.Fragment,{children:[e.jsxs(Bn,{onDragEnd:h,children:[e.jsxs(nt,{id:"unassigned",title:"unassigned",count:((Y=l.stageUnassigned)==null?void 0:Y.length)||0,description:e.jsx(p,{size:"md",disabled:x===0,children:K(x)}),onAddClick:()=>_({stageId:"unassigned"}),children:[(z=l.stageUnassigned)==null?void 0:z.map(v=>e.jsx(at,{id:v.id,data:{...v,stageId:"unassigned"},children:e.jsx(Pt,{id:v.id,title:v.title,company:{name:v.company.name,avatarUrl:v.company.avatarUrl},user:{name:v.dealOwner.name},date:v.createdAt,price:K(v.value||0)},v.id)},v.id)),!((b=l.stageUnassigned)!=null&&b.length)&&e.jsx(Rt,{onClick:()=>_({stageId:"unassigned"})})]}),l.stageAll.map(v=>{var we,Re,Be;const Q=((Be=(Re=(we=v.dealsAggregate)==null?void 0:we[0])==null?void 0:Re.sum)==null?void 0:Be.value)||0,_e=M(v);return e.jsxs(nt,{id:v.id,title:v.title,description:e.jsx(p,{size:"md",disabled:Q===0,children:K(Q)}),count:v.deals.length,contextMenuItems:_e,onAddClick:()=>_({stageId:v.id}),children:[v.deals.map(se=>e.jsx(at,{id:se.id,data:{...se,stageId:v.id},children:e.jsx(Pt,{id:se.id,title:se.title,company:{name:se.company.name,avatarUrl:se.company.avatarUrl},user:{name:se.dealOwner.name,avatarUrl:se.dealOwner.avatarUrl},date:se.createdAt,price:K(se.value||0)},se.id)},se.id)),!v.deals.length&&e.jsx(Rt,{onClick:()=>_({stageId:v.id})})]},v.id)}),e.jsx(Ws,{onClick:j}),l.stageWon&&e.jsx(nt,{id:l.stageWon.id,title:l.stageWon.title,description:e.jsx(p,{size:"md",disabled:((q=(P=(k=l.stageWon.dealsAggregate)==null?void 0:k[0])==null?void 0:P.sum)==null?void 0:q.value)===0,children:K(((re=(H=(Z=l.stageWon.dealsAggregate)==null?void 0:Z[0])==null?void 0:H.sum)==null?void 0:re.value)||0)}),count:l.stageWon.deals.length,variant:"solid",children:l.stageWon.deals.map(v=>{var Q;return e.jsx(at,{id:v.id,data:{...v,stageId:(Q=l.stageWon)==null?void 0:Q.id},children:e.jsx(Pt,{id:v.id,title:v.title,company:{name:v.company.name,avatarUrl:v.company.avatarUrl},user:{name:v.dealOwner.name,avatarUrl:v.dealOwner.avatarUrl},date:v.createdAt,price:K(v.value||0),variant:"won"},v.id)},v.id)})},l.stageWon.id),l.stageLost&&e.jsx(nt,{id:l.stageLost.id,title:l.stageLost.title,description:e.jsx(p,{size:"md",disabled:((Je=(Xe=(le=l.stageLost.dealsAggregate)==null?void 0:le[0])==null?void 0:Xe.sum)==null?void 0:Je.value)===0,children:K(((Ks=(Gs=(Hs=l.stageLost.dealsAggregate)==null?void 0:Hs[0])==null?void 0:Gs.sum)==null?void 0:Ks.value)||0)}),count:l.stageLost.deals.length,variant:"solid",children:l.stageLost.deals.map(v=>{var Q;return e.jsx(at,{id:v.id,data:{...v,stageId:(Q=l.stageLost)==null?void 0:Q.id},children:e.jsx(Pt,{id:v.id,title:v.title,company:{name:v.company.name,avatarUrl:v.company.avatarUrl},user:{name:v.dealOwner.name,avatarUrl:v.dealOwner.avatarUrl},date:v.createdAt,price:K(v.value||0),variant:"lost"},v.id)},v.id)})},l.stageLost.id),e.jsx(Bd,{})]}),t]})},_u=()=>e.jsxs(Qn,{children:[Array.from({length:5}).map((n,r)=>e.jsx(Ut,{type:"deal",children:Array.from({length:4}).map((a,i)=>e.jsx(hs,{},i))},r)),e.jsx(Ws,{disabled:!0}),e.jsx(Ut,{type:"deal",variant:"solid",children:Array.from({length:4}).map((n,r)=>e.jsx(hs,{},r))}),e.jsx(Ut,{type:"deal",variant:"solid",children:Array.from({length:4}).map((n,r)=>e.jsx(hs,{},r))})]}),wu=()=>e.jsx(dn,{type:"updatePassword",title:e.jsx(ot,{collapsed:!1})});A.extend(Za);A.extend(Xa);A.extend(Ja);A.extend(er);const ku=()=>{const{loading:t}=fr();return t?e.jsx(Fs,{}):e.jsx(Oi,{children:e.jsx(Hn,{children:e.jsx(ss,{theme:hr,children:e.jsx(ar,{children:e.jsxs(ha,{children:[e.jsxs(ja,{authProvider:kn,dataProvider:ht,liveProvider:_r,routerProvider:fa,resources:jr,notificationProvider:ya,options:{liveMode:"auto",syncWithLocation:!0,warnWhenUnsavedChanges:!0},children:[e.jsxs(lr,{children:[e.jsxs(O,{element:e.jsx(Xs,{fallback:e.jsx(va,{to:"/login/student"}),children:e.jsx(Ni,{children:e.jsx(ue,{})})},"authenticated-layout"),children:[e.jsx(O,{index:!0,element:e.jsx(Ic,{})}),e.jsxs(O,{path:"/calendar",element:e.jsx(yo,{children:e.jsx(ue,{})}),children:[e.jsx(O,{index:!0,element:null}),e.jsx(O,{path:"show/:id",element:e.jsx(fo,{})}),e.jsx(O,{path:"edit/:id",element:e.jsx(jo,{})}),e.jsx(O,{path:"create",element:e.jsx(xo,{})})]}),e.jsxs(O,{path:"/scrumboard",element:e.jsx(ue,{}),children:[e.jsxs(O,{path:"kanban",element:e.jsx(du,{children:e.jsx(ue,{})}),children:[e.jsx(O,{path:"create",element:e.jsx(yd,{})}),e.jsx(O,{path:"edit/:id",element:e.jsx(lu,{})}),e.jsx(O,{path:"stages/create",element:e.jsx(vd,{})}),e.jsx(O,{path:"stages/edit/:id",element:e.jsx(cu,{})})]}),e.jsxs(O,{path:"sales",element:e.jsx(Tu,{children:e.jsx(ue,{})}),children:[e.jsx(O,{path:"create",element:e.jsx(yu,{children:e.jsx(ue,{})}),children:e.jsx(O,{path:"company/create",element:e.jsx(xt,{isOverModal:!0})})}),e.jsx(O,{path:"edit/:id",element:e.jsx(Cu,{})}),e.jsx(O,{path:"stages/create",element:e.jsx(vu,{})}),e.jsx(O,{path:"stages/edit/:id",element:e.jsx(Su,{})}),e.jsx(O,{path:":id/finalize",element:e.jsx(bu,{})})]})]}),e.jsx(O,{path:"/companies",element:e.jsx(rl,{children:e.jsx(ue,{})}),children:e.jsx(O,{path:"create",element:e.jsx(xt,{})})}),e.jsx(O,{path:"/companies/edit/:id",element:e.jsx(al,{})}),e.jsxs(O,{path:"/contacts",element:e.jsx(zl,{children:e.jsx(ue,{})}),children:[e.jsx(O,{index:!0,element:null}),e.jsx(O,{path:"show/:id",element:e.jsx(Kl,{})}),e.jsx(O,{path:"create",element:e.jsx(ol,{children:e.jsx(ue,{})}),children:e.jsx(O,{path:"company-create",element:e.jsx(xt,{isOverModal:!0})})})]}),e.jsxs(O,{path:"/quotes",element:e.jsx(Jc,{children:e.jsx(ue,{})}),children:[e.jsx(O,{path:"create",element:e.jsx(Kc,{children:e.jsx(ue,{})}),children:e.jsx(O,{path:"company-create",element:e.jsx(xt,{isOverModal:!0})})}),e.jsx(O,{path:"edit/:id",element:e.jsx(Zc,{children:e.jsx(ue,{})}),children:e.jsx(O,{path:"company-create",element:e.jsx(xt,{isOverModal:!0})})})]}),e.jsx(O,{path:"/quotes/show/:id",element:e.jsx(dd,{})}),e.jsxs(O,{path:"/administration",element:e.jsx(ue,{}),children:[e.jsx(O,{path:"settings",element:e.jsx(Qi,{})}),e.jsx(O,{path:"audit-log",element:e.jsx(Mi,{})})]}),e.jsx(O,{path:"*",element:e.jsx(Ca,{})})]}),e.jsxs(O,{element:e.jsx(Xs,{fallback:e.jsx(ue,{}),children:e.jsx(Sa,{resource:"dashboard"})},"authenticated-auth"),children:[e.jsx(O,{path:"/login/student",element:e.jsx(Ec,{})}),e.jsx(O,{path:"/login/lecturer",element:e.jsx(ud,{})}),e.jsx(O,{path:"/forgot-password",element:e.jsx(Tc,{})}),e.jsx(O,{path:"/update-password",element:e.jsx(wu,{})})]})]}),e.jsx(ba,{}),e.jsx(Ia,{})]}),e.jsx(Ta,{})]})})})})})};Wn.createRoot(document.getElementById("root")).render(e.jsx(Ss.StrictMode,{children:e.jsx(ku,{})}));export{Oc as Q,K as c};
