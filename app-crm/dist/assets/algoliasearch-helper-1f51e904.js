import{e as ue,a as Oe}from"./@algolia-6bb98d1b.js";function Qe(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}var fe=Qe,Ae=ue,we=fe;function T(e,t){this.main=e,this.fn=t,this.lastResults=null}we(T,Ae);T.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)};T.prototype.getModifiedState=function(e){return this.fn(e)};var be=T;function De(e){return typeof e!="string"?e:String(e).replace(/^-/,"\\-")}function Te(e){return typeof e!="string"?e:e.replace(/^\\-/,"-")}var J={escapeFacetValue:De,unescapeFacetValue:Te};function Se(e){return typeof e=="object"&&e!==null?Z(Array.isArray(e)?[]:{},e):e}function b(e){return typeof e=="function"||Array.isArray(e)||Object.prototype.toString.call(e)==="[object Object]"}function Z(e,t){if(e===t)return e;for(var i in t)if(!(!Object.prototype.hasOwnProperty.call(t,i)||i==="__proto__"||i==="constructor")){var r=t[i],n=e[i];typeof n<"u"&&typeof r>"u"||(b(n)&&b(r)?e[i]=Z(n,r):e[i]=Se(r))}return e}function Ne(e){b(e)||(e={});for(var t=1,i=arguments.length;t<i;t++){var r=arguments[t];b(r)&&Z(e,r)}return e}var S=Ne;function Ce(e){return e&&Object.keys(e).length>0}var L=Ce;function $e(e,t){if(e===null)return{};var i={},r=Object.keys(e),n,s;for(s=0;s<r.length;s++)n=r[s],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}var G=$e,$=S;function B(e){return Object.keys(e).sort().reduce(function(t,i){return t[i]=e[i],t},{})}var P={_getQueries:function(t,i){var r=[];return r.push({indexName:t,params:P._getHitsSearchParams(i)}),i.getRefinedDisjunctiveFacets().forEach(function(n){r.push({indexName:t,params:P._getDisjunctiveFacetSearchParams(i,n)})}),i.getRefinedHierarchicalFacets().forEach(function(n){var s=i.getHierarchicalFacetByName(n),a=i.getHierarchicalRefinement(n),u=i._getHierarchicalFacetSeparator(s);if(a.length>0&&a[0].split(u).length>1){var c=a[0].split(u).slice(0,-1).reduce(function(o,h,d){return o.concat({attribute:s.attributes[d],value:d===0?h:[o[o.length-1].value,h].join(u)})},[]);c.forEach(function(f,o){var h=P._getDisjunctiveFacetSearchParams(i,f.attribute,o===0);function d(v){return s.attributes.some(function(F){return F===v.split(":")[0]})}var m=(h.facetFilters||[]).reduce(function(v,F){if(Array.isArray(F)){var R=F.filter(function(y){return!d(y)});R.length>0&&v.push(R)}return typeof F=="string"&&!d(F)&&v.push(F),v},[]),g=c[o-1];o>0?h.facetFilters=m.concat(g.attribute+":"+g.value):h.facetFilters=m.length>0?m:void 0,r.push({indexName:t,params:h})})}}),r},_getHitsSearchParams:function(e){var t=e.facets.concat(e.disjunctiveFacets).concat(P._getHitsHierarchicalFacetsAttributes(e)).sort(),i=P._getFacetFilters(e),r=P._getNumericFilters(e),n=P._getTagFilters(e),s={facets:t.indexOf("*")>-1?["*"]:t,tagFilters:n};return i.length>0&&(s.facetFilters=i),r.length>0&&(s.numericFilters=r),B($({},e.getQueryParams(),s))},_getDisjunctiveFacetSearchParams:function(e,t,i){var r=P._getFacetFilters(e,t,i),n=P._getNumericFilters(e,t),s=P._getTagFilters(e),a={hitsPerPage:0,page:0,analytics:!1,clickAnalytics:!1};s.length>0&&(a.tagFilters=s);var u=e.getHierarchicalFacetByName(t);return u?a.facets=P._getDisjunctiveHierarchicalFacetAttribute(e,u,i):a.facets=t,n.length>0&&(a.numericFilters=n),r.length>0&&(a.facetFilters=r),B($({},e.getQueryParams(),a))},_getNumericFilters:function(e,t){if(e.numericFilters)return e.numericFilters;var i=[];return Object.keys(e.numericRefinements).forEach(function(r){var n=e.numericRefinements[r]||{};Object.keys(n).forEach(function(s){var a=n[s]||[];t!==r&&a.forEach(function(u){if(Array.isArray(u)){var c=u.map(function(f){return r+s+f});i.push(c)}else i.push(r+s+u)})})}),i},_getTagFilters:function(e){return e.tagFilters?e.tagFilters:e.tagRefinements.join(",")},_getFacetFilters:function(e,t,i){var r=[],n=e.facetsRefinements||{};Object.keys(n).sort().forEach(function(c){var f=n[c]||[];f.slice().sort().forEach(function(o){r.push(c+":"+o)})});var s=e.facetsExcludes||{};Object.keys(s).sort().forEach(function(c){var f=s[c]||[];f.sort().forEach(function(o){r.push(c+":-"+o)})});var a=e.disjunctiveFacetsRefinements||{};Object.keys(a).sort().forEach(function(c){var f=a[c]||[];if(!(c===t||!f||f.length===0)){var o=[];f.slice().sort().forEach(function(h){o.push(c+":"+h)}),r.push(o)}});var u=e.hierarchicalFacetsRefinements||{};return Object.keys(u).sort().forEach(function(c){var f=u[c]||[],o=f[0];if(o!==void 0){var h=e.getHierarchicalFacetByName(c),d=e._getHierarchicalFacetSeparator(h),m=e._getHierarchicalRootPath(h),g,v;if(t===c){if(o.indexOf(d)===-1||!m&&i===!0||m&&m.split(d).length===o.split(d).length)return;m?(v=m.split(d).length-1,o=m):(v=o.split(d).length-2,o=o.slice(0,o.lastIndexOf(d))),g=h.attributes[v]}else v=o.split(d).length-1,g=h.attributes[v];g&&r.push([g+":"+o])}}),r},_getHitsHierarchicalFacetsAttributes:function(e){var t=[];return e.hierarchicalFacets.reduce(function(r,n){var s=e.getHierarchicalRefinement(n.name)[0];if(!s)return r.push(n.attributes[0]),r;var a=e._getHierarchicalFacetSeparator(n),u=s.split(a).length,c=n.attributes.slice(0,u+1);return r.concat(c)},t)},_getDisjunctiveHierarchicalFacetAttribute:function(e,t,i){var r=e._getHierarchicalFacetSeparator(t);if(i===!0){var n=e._getHierarchicalRootPath(t),s=0;return n&&(s=n.split(r).length),[t.attributes[s]]}var a=e.getHierarchicalRefinement(t.name)[0]||"",u=a.split(r).length-1;return t.attributes.slice(0,u+1)},getSearchForFacetQuery:function(e,t,i,r){var n=r.isDisjunctiveFacet(e)?r.clearRefinements(e):r,s={facetQuery:t,facetName:e};return typeof i=="number"&&(s.maxFacetHits=i),B($({},P._getHitsSearchParams(n),s))}},Be=P,X=function(){var t=Array.prototype.slice.call(arguments);return t.reduceRight(function(i,r){return Object.keys(Object(r)).forEach(function(n){r[n]!==void 0&&(i[n]!==void 0&&delete i[n],i[n]=r[n])}),i},{})},N=function(t,i){if(Array.isArray(t)){for(var r=0;r<t.length;r++)if(i(t[r]))return t[r]}};function Ie(e,t){return e.filter(function(i,r){return t.indexOf(i)>-1&&e.indexOf(i)===r})}var Ve=Ie;function oe(e){if(typeof e=="number")return e;if(typeof e=="string")return parseFloat(e);if(Array.isArray(e))return e.map(oe);throw new Error("The value should be a number, a parsable string or an array of those.")}var ke=oe,qe=function(t){return t===null?!1:/^[a-zA-Z0-9_-]{1,64}$/.test(t)},Me=X,We=L,Ue=G,O={addRefinement:function(t,i,r){if(O.isRefined(t,i,r))return t;var n=""+r,s=t[i]?t[i].concat(n):[n],a={};return a[i]=s,Me({},a,t)},removeRefinement:function(t,i,r){if(r===void 0)return O.clearRefinement(t,function(s,a){return i===a});var n=""+r;return O.clearRefinement(t,function(s,a){return i===a&&n===s})},toggleRefinement:function(t,i,r){if(r===void 0)throw new Error("toggleRefinement should be used with a value");return O.isRefined(t,i,r)?O.removeRefinement(t,i,r):O.addRefinement(t,i,r)},clearRefinement:function(t,i,r){if(i===void 0)return We(t)?{}:t;if(typeof i=="string")return Ue(t,[i]);if(typeof i=="function"){var n=!1,s=Object.keys(t).reduce(function(a,u){var c=t[u]||[],f=c.filter(function(o){return!i(o,u,r)});return f.length!==c.length&&(n=!0),a[u]=f,a},{});return n?s:t}},isRefined:function(t,i,r){var n=!!t[i]&&t[i].length>0;if(r===void 0||!n)return n;var s=""+r;return t[i].indexOf(s)!==-1}},ze=O,I=X,he=N,ie=Ve,W=S,U=L,re=G,V=ke,Je=qe,p=ze;function Y(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every(function(i,r){return Y(t[r],i)}):e===t}function Ze(e,t){return he(e,function(i){return Y(i,t)})}function j(e){var t=e?j._parseNumbers(e):{};t.userToken!==void 0&&!Je(t.userToken)&&console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=t.facets||[],this.disjunctiveFacets=t.disjunctiveFacets||[],this.hierarchicalFacets=t.hierarchicalFacets||[],this.facetsRefinements=t.facetsRefinements||{},this.facetsExcludes=t.facetsExcludes||{},this.disjunctiveFacetsRefinements=t.disjunctiveFacetsRefinements||{},this.numericRefinements=t.numericRefinements||{},this.tagRefinements=t.tagRefinements||[],this.hierarchicalFacetsRefinements=t.hierarchicalFacetsRefinements||{};var i=this;Object.keys(t).forEach(function(r){var n=j.PARAMETERS.indexOf(r)!==-1,s=t[r]!==void 0;!n&&s&&(i[r]=t[r])})}j.PARAMETERS=Object.keys(new j);j._parseNumbers=function(e){if(e instanceof j)return e;var t={},i=["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"];if(i.forEach(function(n){var s=e[n];if(typeof s=="string"){var a=parseFloat(s);t[n]=isNaN(a)?s:a}}),Array.isArray(e.insideBoundingBox)&&(t.insideBoundingBox=e.insideBoundingBox.map(function(n){return Array.isArray(n)?n.map(function(s){return parseFloat(s)}):n})),e.numericRefinements){var r={};Object.keys(e.numericRefinements).forEach(function(n){var s=e.numericRefinements[n]||{};r[n]={},Object.keys(s).forEach(function(a){var u=s[a],c=u.map(function(f){return Array.isArray(f)?f.map(function(o){return typeof o=="string"?parseFloat(o):o}):typeof f=="string"?parseFloat(f):f});r[n][a]=c})}),t.numericRefinements=r}return W(e,t)};j.make=function(t){var i=new j(t),r=t.hierarchicalFacets||[];return r.forEach(function(n){if(n.rootPath){var s=i.getHierarchicalRefinement(n.name);s.length>0&&s[0].indexOf(n.rootPath)!==0&&(i=i.clearRefinements(n.name)),s=i.getHierarchicalRefinement(n.name),s.length===0&&(i=i.toggleHierarchicalFacetRefinement(n.name,n.rootPath))}}),i};j.validate=function(e,t){var i=t||{};return e.tagFilters&&i.tagRefinements&&i.tagRefinements.length>0?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):e.tagRefinements.length>0&&i.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&i.numericRefinements&&U(i.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):U(e.numericRefinements)&&i.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null};j.prototype={constructor:j,clearRefinements:function(t){var i={numericRefinements:this._clearNumericRefinements(t),facetsRefinements:p.clearRefinement(this.facetsRefinements,t,"conjunctiveFacet"),facetsExcludes:p.clearRefinement(this.facetsExcludes,t,"exclude"),disjunctiveFacetsRefinements:p.clearRefinement(this.disjunctiveFacetsRefinements,t,"disjunctiveFacet"),hierarchicalFacetsRefinements:p.clearRefinement(this.hierarchicalFacetsRefinements,t,"hierarchicalFacet")};return i.numericRefinements===this.numericRefinements&&i.facetsRefinements===this.facetsRefinements&&i.facetsExcludes===this.facetsExcludes&&i.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&i.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(i)},clearTags:function(){return this.tagFilters===void 0&&this.tagRefinements.length===0?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(t){return t===this.index?this:this.setQueryParameters({index:t})},setQuery:function(t){return t===this.query?this:this.setQueryParameters({query:t})},setPage:function(t){return t===this.page?this:this.setQueryParameters({page:t})},setFacets:function(t){return this.setQueryParameters({facets:t})},setDisjunctiveFacets:function(t){return this.setQueryParameters({disjunctiveFacets:t})},setHitsPerPage:function(t){return this.hitsPerPage===t?this:this.setQueryParameters({hitsPerPage:t})},setTypoTolerance:function(t){return this.typoTolerance===t?this:this.setQueryParameters({typoTolerance:t})},addNumericRefinement:function(e,t,i){var r=V(i);if(this.isNumericRefined(e,t,r))return this;var n=W({},this.numericRefinements);return n[e]=W({},n[e]),n[e][t]?(n[e][t]=n[e][t].slice(),n[e][t].push(r)):n[e][t]=[r],this.setQueryParameters({numericRefinements:n})},getConjunctiveRefinements:function(e){return this.isConjunctiveFacet(e)?this.facetsRefinements[e]||[]:[]},getDisjunctiveRefinements:function(e){return this.isDisjunctiveFacet(e)?this.disjunctiveFacetsRefinements[e]||[]:[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){return this.isConjunctiveFacet(e)?this.facetsExcludes[e]||[]:[]},removeNumericRefinement:function(e,t,i){var r=i;return r!==void 0?this.isNumericRefined(e,t,r)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(n,s){return s===e&&n.op===t&&Y(n.val,V(r))})}):this:t!==void 0?this.isNumericRefined(e,t)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(n,s){return s===e&&n.op===t})}):this:this.isNumericRefined(e)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(n,s){return s===e})}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(t){if(t===void 0)return U(this.numericRefinements)?{}:this.numericRefinements;if(typeof t=="string")return re(this.numericRefinements,[t]);if(typeof t=="function"){var i=!1,r=this.numericRefinements,n=Object.keys(r).reduce(function(s,a){var u=r[a],c={};return u=u||{},Object.keys(u).forEach(function(f){var o=u[f]||[],h=[];o.forEach(function(d){var m=t({val:d,op:f},a,"numeric");m||h.push(d)}),h.length!==o.length&&(i=!0),c[f]=h}),s[a]=c,s},{});return i?n:this.numericRefinements}},addFacet:function(t){return this.isConjunctiveFacet(t)?this:this.setQueryParameters({facets:this.facets.concat([t])})},addDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([t])})},addHierarchicalFacet:function(t){if(this.isHierarchicalFacet(t.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+t.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([t])})},addFacetRefinement:function(t,i){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return p.isRefined(this.facetsRefinements,t,i)?this:this.setQueryParameters({facetsRefinements:p.addRefinement(this.facetsRefinements,t,i)})},addExcludeRefinement:function(t,i){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return p.isRefined(this.facetsExcludes,t,i)?this:this.setQueryParameters({facetsExcludes:p.addRefinement(this.facetsExcludes,t,i)})},addDisjunctiveFacetRefinement:function(t,i){if(!this.isDisjunctiveFacet(t))throw new Error(t+" is not defined in the disjunctiveFacets attribute of the helper configuration");return p.isRefined(this.disjunctiveFacetsRefinements,t,i)?this:this.setQueryParameters({disjunctiveFacetsRefinements:p.addRefinement(this.disjunctiveFacetsRefinements,t,i)})},addTagRefinement:function(t){if(this.isTagRefined(t))return this;var i={tagRefinements:this.tagRefinements.concat(t)};return this.setQueryParameters(i)},removeFacet:function(t){return this.isConjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({facets:this.facets.filter(function(i){return i!==t})}):this},removeDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter(function(i){return i!==t})}):this},removeHierarchicalFacet:function(t){return this.isHierarchicalFacet(t)?this.clearRefinements(t).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter(function(i){return i.name!==t})}):this},removeFacetRefinement:function(t,i){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return p.isRefined(this.facetsRefinements,t,i)?this.setQueryParameters({facetsRefinements:p.removeRefinement(this.facetsRefinements,t,i)}):this},removeExcludeRefinement:function(t,i){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return p.isRefined(this.facetsExcludes,t,i)?this.setQueryParameters({facetsExcludes:p.removeRefinement(this.facetsExcludes,t,i)}):this},removeDisjunctiveFacetRefinement:function(t,i){if(!this.isDisjunctiveFacet(t))throw new Error(t+" is not defined in the disjunctiveFacets attribute of the helper configuration");return p.isRefined(this.disjunctiveFacetsRefinements,t,i)?this.setQueryParameters({disjunctiveFacetsRefinements:p.removeRefinement(this.disjunctiveFacetsRefinements,t,i)}):this},removeTagRefinement:function(t){if(!this.isTagRefined(t))return this;var i={tagRefinements:this.tagRefinements.filter(function(r){return r!==t})};return this.setQueryParameters(i)},toggleRefinement:function(t,i){return this.toggleFacetRefinement(t,i)},toggleFacetRefinement:function(t,i){if(this.isHierarchicalFacet(t))return this.toggleHierarchicalFacetRefinement(t,i);if(this.isConjunctiveFacet(t))return this.toggleConjunctiveFacetRefinement(t,i);if(this.isDisjunctiveFacet(t))return this.toggleDisjunctiveFacetRefinement(t,i);throw new Error("Cannot refine the undeclared facet "+t+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(t,i){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:p.toggleRefinement(this.facetsRefinements,t,i)})},toggleExcludeFacetRefinement:function(t,i){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:p.toggleRefinement(this.facetsExcludes,t,i)})},toggleDisjunctiveFacetRefinement:function(t,i){if(!this.isDisjunctiveFacet(t))throw new Error(t+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:p.toggleRefinement(this.disjunctiveFacetsRefinements,t,i)})},toggleHierarchicalFacetRefinement:function(t,i){if(!this.isHierarchicalFacet(t))throw new Error(t+" is not defined in the hierarchicalFacets attribute of the helper configuration");var r=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(t)),n={},s=this.hierarchicalFacetsRefinements[t]!==void 0&&this.hierarchicalFacetsRefinements[t].length>0&&(this.hierarchicalFacetsRefinements[t][0]===i||this.hierarchicalFacetsRefinements[t][0].indexOf(i+r)===0);return s?i.indexOf(r)===-1?n[t]=[]:n[t]=[i.slice(0,i.lastIndexOf(r))]:n[t]=[i],this.setQueryParameters({hierarchicalFacetsRefinements:I({},n,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration.");var i={};return i[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:I({},i,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(e){if(!this.isHierarchicalFacetRefined(e))return this;var t={};return t[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:I({},t,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(t){return this.isTagRefined(t)?this.removeTagRefinement(t):this.addTagRefinement(t)},isDisjunctiveFacet:function(e){return this.disjunctiveFacets.indexOf(e)>-1},isHierarchicalFacet:function(e){return this.getHierarchicalFacetByName(e)!==void 0},isConjunctiveFacet:function(e){return this.facets.indexOf(e)>-1},isFacetRefined:function(t,i){return this.isConjunctiveFacet(t)?p.isRefined(this.facetsRefinements,t,i):!1},isExcludeRefined:function(t,i){return this.isConjunctiveFacet(t)?p.isRefined(this.facetsExcludes,t,i):!1},isDisjunctiveFacetRefined:function(t,i){return this.isDisjunctiveFacet(t)?p.isRefined(this.disjunctiveFacetsRefinements,t,i):!1},isHierarchicalFacetRefined:function(t,i){if(!this.isHierarchicalFacet(t))return!1;var r=this.getHierarchicalRefinement(t);return i?r.indexOf(i)!==-1:r.length>0},isNumericRefined:function(t,i,r){if(r===void 0&&i===void 0)return!!this.numericRefinements[t];var n=this.numericRefinements[t]&&this.numericRefinements[t][i]!==void 0;if(r===void 0||!n)return n;var s=V(r),a=Ze(this.numericRefinements[t][i],s)!==void 0;return n&&a},isTagRefined:function(t){return this.tagRefinements.indexOf(t)!==-1},getRefinedDisjunctiveFacets:function(){var t=this,i=ie(Object.keys(this.numericRefinements).filter(function(r){return Object.keys(t.numericRefinements[r]).length>0}),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter(function(r){return t.disjunctiveFacetsRefinements[r].length>0}).concat(i).concat(this.getRefinedHierarchicalFacets()).sort()},getRefinedHierarchicalFacets:function(){var t=this;return ie(this.hierarchicalFacets.map(function(i){return i.name}),Object.keys(this.hierarchicalFacetsRefinements).filter(function(i){return t.hierarchicalFacetsRefinements[i].length>0})).sort()},getUnrefinedDisjunctiveFacets:function(){var e=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter(function(t){return e.indexOf(t)===-1})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","hierarchicalFacets","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements"],getQueryParams:function(){var t=this.managedParameters,i={},r=this;return Object.keys(this).forEach(function(n){var s=r[n];t.indexOf(n)===-1&&s!==void 0&&(i[n]=s)}),i},setQueryParameter:function(t,i){if(this[t]===i)return this;var r={};return r[t]=i,this.setQueryParameters(r)},setQueryParameters:function(t){if(!t)return this;var i=j.validate(this,t);if(i)throw i;var r=this,n=j._parseNumbers(t),s=Object.keys(this).reduce(function(u,c){return u[c]=r[c],u},{}),a=Object.keys(n).reduce(function(u,c){var f=u[c]!==void 0,o=n[c]!==void 0;return f&&!o?re(u,[c]):(o&&(u[c]=n[c]),u)},s);return new this.constructor(a)},resetPage:function(){return this.page===void 0?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return typeof e.showParentLevel=="boolean"?e.showParentLevel:!0},getHierarchicalFacetByName:function(e){return he(this.hierarchicalFacets,function(t){return t.name===e})},getHierarchicalFacetBreadcrumb:function(e){if(!this.isHierarchicalFacet(e))return[];var t=this.getHierarchicalRefinement(e)[0];if(!t)return[];var i=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),r=t.split(i);return r.map(function(n){return n.trim()})},toString:function(){return JSON.stringify(this,null,2)}};var le=j,Le=function(t){return Array.isArray(t)?t.filter(Boolean):[]},Ge=function(t,i){if(!Array.isArray(t))return-1;for(var r=0;r<t.length;r++)if(i(t[r]))return r;return-1},Xe=N,de=function(t,i){var r=(i||[]).map(function(n){return n.split(":")});return t.reduce(function(s,a){var u=a.split(":"),c=Xe(r,function(f){return f[0]===u[0]});return u.length>1||!c?(s[0].push(u[0]),s[1].push(u[1]),s):(s[0].push(c[0]),s[1].push(c[1]),s)},[[],[]])};function Ye(e,t){if(e!==t){var i=e!==void 0,r=e===null,n=t!==void 0,s=t===null;if(!s&&e>t||r&&n||!i)return 1;if(!r&&e<t||s&&i||!n)return-1}return 0}function Ke(e,t,i){if(!Array.isArray(e))return[];Array.isArray(i)||(i=[]);var r=e.map(function(n,s){return{criteria:t.map(function(a){return n[a]}),index:s,value:n}});return r.sort(function(s,a){for(var u=-1;++u<s.criteria.length;){var c=Ye(s.criteria[u],a.criteria[u]);if(c)return u>=i.length?c:i[u]==="desc"?-c:c}return s.index-a.index}),r.map(function(n){return n.value})}var me=Ke,et=at,ve=J,tt=N,it=de,rt=me,nt=ve.escapeFacetValue,st=ve.unescapeFacetValue;function at(e){return function(i,r){var n=e.hierarchicalFacets[r],s=e.hierarchicalFacetsRefinements[n.name]&&e.hierarchicalFacetsRefinements[n.name][0]||"",a=e._getHierarchicalFacetSeparator(n),u=e._getHierarchicalRootPath(n),c=e._getHierarchicalShowParentLevel(n),f=it(e._getHierarchicalFacetSortBy(n)),o=i.every(function(m){return m.exhaustive}),h=ct(f,a,u,c,s),d=i;return u&&(d=i.slice(u.split(a).length)),d.reduce(h,{name:e.hierarchicalFacets[r].name,count:null,isRefined:!0,path:null,escapedValue:null,exhaustive:o,data:null})}}function ct(e,t,i,r,n){return function(a,u,c){var f=a;if(c>0){var o=0;for(f=a;o<c;){var h=f&&Array.isArray(f.data)?f.data:[];f=tt(h,function(m){return m.isRefined}),o++}}if(f){var d=Object.keys(u.data).map(function(m){return[m,u.data[m]]}).filter(function(m){var g=m[0];return ut(g,f.path||i,n,t,i,r)});f.data=rt(d.map(function(m){var g=m[0],v=m[1];return ft(v,g,t,st(n),u.exhaustive)}),e[0],e[1])}return a}}function ut(e,t,i,r,n,s){return n&&(e.indexOf(n)!==0||n===e)?!1:!n&&e.indexOf(r)===-1||n&&e.split(r).length-n.split(r).length===1||e.indexOf(r)===-1&&i.indexOf(r)===-1||i.indexOf(e)===0||e.indexOf(t+r)===0&&(s||e.indexOf(i)===0)}function ft(e,t,i,r,n){var s=t.split(i);return{name:s[s.length-1].trim(),path:t,escapedValue:nt(t),count:e,isRefined:r===t||r.indexOf(t+i)===0,exhaustive:n,data:null}}var k=Le,D=X,ge=J,x=N,A=Ge,ot=de,ne=S,pe=me,se=ge.escapeFacetValue,Re=ge.unescapeFacetValue,ht=et;function ae(e){var t={};return e.forEach(function(i,r){t[i]=r}),t}function q(e,t,i){t&&t[i]&&(e.stats=t[i])}function lt(e,t){return x(e,function(r){var n=r.attributes||[];return n.indexOf(t)>-1})}function H(e,t,i){var r=t[0];this._rawResults=t;var n=this;Object.keys(r).forEach(function(h){n[h]=r[h]});var s=ne({persistHierarchicalRootCount:!1},i);Object.keys(s).forEach(function(h){n[h]=s[h]}),this.processingTimeMS=t.reduce(function(h,d){return d.processingTimeMS===void 0?h:h+d.processingTimeMS},0),this.disjunctiveFacets=[],this.hierarchicalFacets=e.hierarchicalFacets.map(function(){return[]}),this.facets=[];var a=e.getRefinedDisjunctiveFacets(),u=ae(e.facets),c=ae(e.disjunctiveFacets),f=1,o=r.facets||{};Object.keys(o).forEach(function(h){var d=o[h],m=lt(e.hierarchicalFacets,h);if(m){var g=m.attributes.indexOf(h),v=A(e.hierarchicalFacets,function(E){return E.name===m.name});n.hierarchicalFacets[v][g]={attribute:h,data:d,exhaustive:r.exhaustiveFacetsCount}}else{var F=e.disjunctiveFacets.indexOf(h)!==-1,R=e.facets.indexOf(h)!==-1,y;F&&(y=c[h],n.disjunctiveFacets[y]={name:h,data:d,exhaustive:r.exhaustiveFacetsCount},q(n.disjunctiveFacets[y],r.facets_stats,h)),R&&(y=u[h],n.facets[y]={name:h,data:d,exhaustive:r.exhaustiveFacetsCount},q(n.facets[y],r.facets_stats,h))}}),this.hierarchicalFacets=k(this.hierarchicalFacets),a.forEach(function(h){var d=t[f],m=d&&d.facets?d.facets:{},g=e.getHierarchicalFacetByName(h);Object.keys(m).forEach(function(v){var F=m[v],R;if(g){R=A(e.hierarchicalFacets,function(_){return _.name===g.name});var y=A(n.hierarchicalFacets[R],function(_){return _.attribute===v});if(y===-1)return;n.hierarchicalFacets[R][y].data=ne({},n.hierarchicalFacets[R][y].data,F)}else{R=c[v];var E=r.facets&&r.facets[v]||{};n.disjunctiveFacets[R]={name:v,data:D({},F,E),exhaustive:d.exhaustiveFacetsCount},q(n.disjunctiveFacets[R],d.facets_stats,v),e.disjunctiveFacetsRefinements[v]&&e.disjunctiveFacetsRefinements[v].forEach(function(_){!n.disjunctiveFacets[R].data[_]&&e.disjunctiveFacetsRefinements[v].indexOf(Re(_))>-1&&(n.disjunctiveFacets[R].data[_]=0)})}}),f++}),e.getRefinedHierarchicalFacets().forEach(function(h){var d=e.getHierarchicalFacetByName(h),m=e._getHierarchicalFacetSeparator(d),g=e.getHierarchicalRefinement(h);g.length===0||g[0].split(m).length<2||t.slice(f).forEach(function(v){var F=v&&v.facets?v.facets:{};Object.keys(F).forEach(function(R){var y=F[R],E=A(e.hierarchicalFacets,function(C){return C.name===d.name}),_=A(n.hierarchicalFacets[E],function(C){return C.attribute===R});if(_!==-1){var ee={};if(g.length>0&&!n.persistHierarchicalRootCount){var te=g[0].split(m)[0];ee[te]=n.hierarchicalFacets[E][_].data[te]}n.hierarchicalFacets[E][_].data=D(ee,y,n.hierarchicalFacets[E][_].data)}}),f++})}),Object.keys(e.facetsExcludes).forEach(function(h){var d=e.facetsExcludes[h],m=u[h];n.facets[m]={name:h,data:o[h],exhaustive:r.exhaustiveFacetsCount},d.forEach(function(g){n.facets[m]=n.facets[m]||{name:h},n.facets[m].data=n.facets[m].data||{},n.facets[m].data[g]=0})}),this.hierarchicalFacets=this.hierarchicalFacets.map(ht(e)),this.facets=k(this.facets),this.disjunctiveFacets=k(this.disjunctiveFacets),this._state=e}H.prototype.getFacetByName=function(e){function t(i){return i.name===e}return x(this.facets,t)||x(this.disjunctiveFacets,t)||x(this.hierarchicalFacets,t)};function dt(e,t){function i(o){return o.name===t}if(e._state.isConjunctiveFacet(t)){var r=x(e.facets,i);return r?Object.keys(r.data).map(function(o){var h=se(o);return{name:o,escapedValue:h,count:r.data[o],isRefined:e._state.isFacetRefined(t,h),isExcluded:e._state.isExcludeRefined(t,o)}}):[]}else if(e._state.isDisjunctiveFacet(t)){var n=x(e.disjunctiveFacets,i);return n?Object.keys(n.data).map(function(o){var h=se(o);return{name:o,escapedValue:h,count:n.data[o],isRefined:e._state.isDisjunctiveFacetRefined(t,h)}}):[]}else if(e._state.isHierarchicalFacet(t)){var s=x(e.hierarchicalFacets,i);if(!s)return s;var a=e._state.getHierarchicalFacetByName(t),u=e._state._getHierarchicalFacetSeparator(a),c=Re(e._state.getHierarchicalRefinement(t)[0]||"");c.indexOf(a.rootPath)===0&&(c=c.replace(a.rootPath+u,""));var f=c.split(u);return f.unshift(t),Fe(s,f,0),s}}function Fe(e,t,i){e.isRefined=e.name===(t[i]&&t[i].trim()),e.data&&e.data.forEach(function(r){Fe(r,t,i+1)})}function ye(e,t,i,r){if(r=r||0,Array.isArray(t))return e(t,i[r]);if(!t.data||t.data.length===0)return t;var n=t.data.map(function(u){return ye(e,u,i,r+1)}),s=e(n,i[r]),a=D({data:s},t);return a}H.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"];function mt(e,t){return t.sort(e)}function vt(e,t){var i=[],r=[],n=t.order||[],s=n.reduce(function(c,f,o){return c[f]=o,c},{});e.forEach(function(c){var f=c.path||c.name;s[f]!==void 0?i[s[f]]=c:r.push(c)}),i=i.filter(function(c){return c});var a=t.sortRemainingBy,u;return a==="hidden"?i:(a==="alpha"?u=[["path","name"],["asc","asc"]]:u=[["count"],["desc"]],i.concat(pe(r,u[0],u[1])))}function gt(e,t){return e.renderingContent&&e.renderingContent.facetOrdering&&e.renderingContent.facetOrdering.values&&e.renderingContent.facetOrdering.values[t]}H.prototype.getFacetValues=function(e,t){var i=dt(this,e);if(i){var r=D({},t,{sortBy:H.DEFAULT_SORT,facetOrdering:!(t&&t.sortBy)}),n=this,s;if(Array.isArray(i))s=[e];else{var a=n._state.getHierarchicalFacetByName(i.name);s=a.attributes}return ye(function(u,c){if(r.facetOrdering){var f=gt(n,c);if(f)return vt(u,f)}if(Array.isArray(r.sortBy)){var o=ot(r.sortBy,H.DEFAULT_SORT);return pe(u,o[0],o[1])}else if(typeof r.sortBy=="function")return mt(r.sortBy,u);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},i,s)}};H.prototype.getFacetStats=function(e){if(this._state.isConjunctiveFacet(e))return ce(this.facets,e);if(this._state.isDisjunctiveFacet(e))return ce(this.disjunctiveFacets,e)};function ce(e,t){var i=x(e,function(r){return r.name===t});return i&&i.stats}H.prototype.getRefinements=function(){var e=this._state,t=this,i=[];return Object.keys(e.facetsRefinements).forEach(function(r){e.facetsRefinements[r].forEach(function(n){i.push(M(e,"facet",r,n,t.facets))})}),Object.keys(e.facetsExcludes).forEach(function(r){e.facetsExcludes[r].forEach(function(n){i.push(M(e,"exclude",r,n,t.facets))})}),Object.keys(e.disjunctiveFacetsRefinements).forEach(function(r){e.disjunctiveFacetsRefinements[r].forEach(function(n){i.push(M(e,"disjunctive",r,n,t.disjunctiveFacets))})}),Object.keys(e.hierarchicalFacetsRefinements).forEach(function(r){e.hierarchicalFacetsRefinements[r].forEach(function(n){i.push(pt(e,r,n,t.hierarchicalFacets))})}),Object.keys(e.numericRefinements).forEach(function(r){var n=e.numericRefinements[r];Object.keys(n).forEach(function(s){n[s].forEach(function(a){i.push({type:"numeric",attributeName:r,name:a,numericValue:a,operator:s})})})}),e.tagRefinements.forEach(function(r){i.push({type:"tag",attributeName:"_tags",name:r})}),i};function M(e,t,i,r,n){var s=x(n,function(c){return c.name===i}),a=s&&s.data&&s.data[r]?s.data[r]:0,u=s&&s.exhaustive||!1;return{type:t,attributeName:i,name:r,count:a,exhaustive:u}}function pt(e,t,i,r){var n=e.getHierarchicalFacetByName(t),s=e._getHierarchicalFacetSeparator(n),a=i.split(s),u=x(r,function(d){return d.name===t}),c=a.reduce(function(d,m){var g=d&&x(d.data,function(v){return v.name===m});return g!==void 0?g:d},u),f=c&&c.count||0,o=c&&c.exhaustive||!1,h=c&&c.path||"";return{type:"hierarchical",attributeName:t,name:h,count:f,exhaustive:o}}var je=H,Pe="3.16.3",Rt=ue,Ft=be,yt=J.escapeFacetValue,jt=fe,Pt=S,_t=L,xt=G,Q=Be,K=le,z=je,_e=Pe;function l(e,t,i,r){typeof e.addAlgoliaAgent=="function"&&e.addAlgoliaAgent("JS Helper ("+_e+")"),this.setClient(e);var n=i||{};n.index=t,this.state=K.make(n),this.lastResults=null,this._queryId=0,this._lastQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0,this._searchResultsOptions=r}jt(l,Rt);l.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this};l.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this};l.prototype.getQuery=function(){var e=this.state;return Q._getHitsSearchParams(e)};l.prototype.searchOnce=function(e,t){var i=e?this.state.setQueryParameters(e):this.state,r=Q._getQueries(i.index,i),n=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:i}),t){this.client.search(r).then(function(s){n._currentNbQueries--,n._currentNbQueries===0&&n.emit("searchQueueEmpty"),t(null,new z(i,s.results),i)}).catch(function(s){n._currentNbQueries--,n._currentNbQueries===0&&n.emit("searchQueueEmpty"),t(s,null,i)});return}return this.client.search(r).then(function(s){return n._currentNbQueries--,n._currentNbQueries===0&&n.emit("searchQueueEmpty"),{content:new z(i,s.results),state:i,_originalResponse:s}},function(s){throw n._currentNbQueries--,n._currentNbQueries===0&&n.emit("searchQueueEmpty"),s})};l.prototype.findAnswers=function(e){console.warn("[algoliasearch-helper] answers is no longer supported");var t=this.state,i=this.derivedHelpers[0];if(!i)return Promise.resolve([]);var r=i.getModifiedState(t),n=Pt({attributesForPrediction:e.attributesForPrediction,nbHits:e.nbHits},{params:xt(Q._getHitsSearchParams(r),["attributesToSnippet","hitsPerPage","restrictSearchableAttributes","snippetEllipsisText"])}),s="search for answers was called, but this client does not have a function client.initIndex(index).findAnswers";if(typeof this.client.initIndex!="function")throw new Error(s);var a=this.client.initIndex(r.index);if(typeof a.findAnswers!="function")throw new Error(s);return a.findAnswers(r.query,e.queryLanguages,n)};l.prototype.searchForFacetValues=function(e,t,i,r){var n=typeof this.client.searchForFacetValues=="function",s=typeof this.client.initIndex=="function";if(!n&&!s&&typeof this.client.search!="function")throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues");var a=this.state.setQueryParameters(r||{}),u=a.isDisjunctiveFacet(e),c=Q.getSearchForFacetQuery(e,t,i,a);this._currentNbQueries++;var f=this,o;return n?o=this.client.searchForFacetValues([{indexName:a.index,params:c}]):s?o=this.client.initIndex(a.index).searchForFacetValues(c):(delete c.facetName,o=this.client.search([{type:"facet",facet:e,indexName:a.index,params:c}]).then(function(d){return d.results[0]})),this.emit("searchForFacetValues",{state:a,facet:e,query:t}),o.then(function(d){return f._currentNbQueries--,f._currentNbQueries===0&&f.emit("searchQueueEmpty"),d=Array.isArray(d)?d[0]:d,d.facetHits.forEach(function(m){m.escapedValue=yt(m.value),m.isRefined=u?a.isDisjunctiveFacetRefined(e,m.escapedValue):a.isFacetRefined(e,m.escapedValue)}),d},function(h){throw f._currentNbQueries--,f._currentNbQueries===0&&f.emit("searchQueueEmpty"),h})};l.prototype.setQuery=function(e){return this._change({state:this.state.resetPage().setQuery(e),isPageReset:!0}),this};l.prototype.clearRefinements=function(e){return this._change({state:this.state.resetPage().clearRefinements(e),isPageReset:!0}),this};l.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this};l.prototype.addDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this};l.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)};l.prototype.addHierarchicalFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(e,t),isPageReset:!0}),this};l.prototype.addNumericRefinement=function(e,t,i){return this._change({state:this.state.resetPage().addNumericRefinement(e,t,i),isPageReset:!0}),this};l.prototype.addFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addFacetRefinement(e,t),isPageReset:!0}),this};l.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)};l.prototype.addFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().addExcludeRefinement(e,t),isPageReset:!0}),this};l.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)};l.prototype.addTag=function(e){return this._change({state:this.state.resetPage().addTagRefinement(e),isPageReset:!0}),this};l.prototype.removeNumericRefinement=function(e,t,i){return this._change({state:this.state.resetPage().removeNumericRefinement(e,t,i),isPageReset:!0}),this};l.prototype.removeDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this};l.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)};l.prototype.removeHierarchicalFacetRefinement=function(e){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(e),isPageReset:!0}),this};l.prototype.removeFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeFacetRefinement(e,t),isPageReset:!0}),this};l.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)};l.prototype.removeFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().removeExcludeRefinement(e,t),isPageReset:!0}),this};l.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)};l.prototype.removeTag=function(e){return this._change({state:this.state.resetPage().removeTagRefinement(e),isPageReset:!0}),this};l.prototype.toggleFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(e,t),isPageReset:!0}),this};l.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)};l.prototype.toggleRefinement=function(e,t){return this.toggleFacetRefinement(e,t)};l.prototype.toggleFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().toggleFacetRefinement(e,t),isPageReset:!0}),this};l.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)};l.prototype.toggleTag=function(e){return this._change({state:this.state.resetPage().toggleTagRefinement(e),isPageReset:!0}),this};l.prototype.nextPage=function(){var e=this.state.page||0;return this.setPage(e+1)};l.prototype.previousPage=function(){var e=this.state.page||0;return this.setPage(e-1)};function xe(e){if(e<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(e),isPageReset:!1}),this}l.prototype.setCurrentPage=xe;l.prototype.setPage=xe;l.prototype.setIndex=function(e){return this._change({state:this.state.resetPage().setIndex(e),isPageReset:!0}),this};l.prototype.setQueryParameter=function(e,t){return this._change({state:this.state.resetPage().setQueryParameter(e,t),isPageReset:!0}),this};l.prototype.setState=function(e){return this._change({state:K.make(e),isPageReset:!1}),this};l.prototype.overrideStateWithoutTriggeringChangeEvent=function(e){return this.state=new K(e),this};l.prototype.hasRefinements=function(e){return _t(this.state.getNumericRefinements(e))?!0:this.state.isConjunctiveFacet(e)?this.state.isFacetRefined(e):this.state.isDisjunctiveFacet(e)?this.state.isDisjunctiveFacetRefined(e):this.state.isHierarchicalFacet(e)?this.state.isHierarchicalFacetRefined(e):!1};l.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)};l.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)};l.prototype.hasTag=function(e){return this.state.isTagRefined(e)};l.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)};l.prototype.getIndex=function(){return this.state.index};function Ee(){return this.state.page}l.prototype.getCurrentPage=Ee;l.prototype.getPage=Ee;l.prototype.getTags=function(){return this.state.tagRefinements};l.prototype.getRefinements=function(e){var t=[];if(this.state.isConjunctiveFacet(e)){var i=this.state.getConjunctiveRefinements(e);i.forEach(function(a){t.push({value:a,type:"conjunctive"})});var r=this.state.getExcludeRefinements(e);r.forEach(function(a){t.push({value:a,type:"exclude"})})}else if(this.state.isDisjunctiveFacet(e)){var n=this.state.getDisjunctiveRefinements(e);n.forEach(function(a){t.push({value:a,type:"disjunctive"})})}var s=this.state.getNumericRefinements(e);return Object.keys(s).forEach(function(a){var u=s[a];t.push({value:u,operator:a,type:"numeric"})}),t};l.prototype.getNumericRefinement=function(e,t){return this.state.getNumericRefinement(e,t)};l.prototype.getHierarchicalFacetBreadcrumb=function(e){return this.state.getHierarchicalFacetBreadcrumb(e)};l.prototype._search=function(e){var t=this.state,i=[],r=[];e.onlyWithDerivedHelpers||(r=Q._getQueries(t.index,t),i.push({state:t,queriesCount:r.length,helper:this}),this.emit("search",{state:t,results:this.lastResults}));var n=this.derivedHelpers.map(function(u){var c=u.getModifiedState(t),f=c.index?Q._getQueries(c.index,c):[];return i.push({state:c,queriesCount:f.length,helper:u}),u.emit("search",{state:c,results:u.lastResults}),f}),s=Array.prototype.concat.apply(r,n),a=this._queryId++;if(this._currentNbQueries++,!s.length)return Promise.resolve({results:[]}).then(this._dispatchAlgoliaResponse.bind(this,i,a));try{this.client.search(s).then(this._dispatchAlgoliaResponse.bind(this,i,a)).catch(this._dispatchAlgoliaError.bind(this,a))}catch(u){this.emit("error",{error:u})}};l.prototype._dispatchAlgoliaResponse=function(e,t,i){var r=this;if(!(t<this._lastQueryIdReceived)){this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,this._currentNbQueries===0&&this.emit("searchQueueEmpty");var n=i.results.slice();e.forEach(function(s){var a=s.state,u=s.queriesCount,c=s.helper,f=n.splice(0,u);if(!a.index){c.emit("result",{results:null,state:a});return}c.lastResults=new z(a,f,r._searchResultsOptions),c.emit("result",{results:c.lastResults,state:a})})}};l.prototype._dispatchAlgoliaError=function(e,t){e<this._lastQueryIdReceived||(this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this.emit("error",{error:t}),this._currentNbQueries===0&&this.emit("searchQueueEmpty"))};l.prototype.containsRefinement=function(e,t,i,r){return e||t.length!==0||i.length!==0||r.length!==0};l.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&this.state.disjunctiveRefinements[e].length>0};l.prototype._change=function(e){var t=e.state,i=e.isPageReset;t!==this.state&&(this.state=t,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:i}))};l.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this};l.prototype.setClient=function(e){return this.client===e?this:(typeof e.addAlgoliaAgent=="function"&&e.addAlgoliaAgent("JS Helper ("+_e+")"),this.client=e,this)};l.prototype.getClient=function(){return this.client};l.prototype.derive=function(e){var t=new Ft(this,e);return this.derivedHelpers.push(t),t};l.prototype.detachDerivedHelper=function(e){var t=this.derivedHelpers.indexOf(e);if(t===-1)throw new Error("Derived helper already detached");this.derivedHelpers.splice(t,1)};l.prototype.hasPendingRequests=function(){return this._currentNbQueries>0};var Et=l,He=Et,Ht=le,Ot=je;function w(e,t,i,r){return new He(e,t,i,r)}w.version=Pe;w.AlgoliaSearchHelper=He;w.SearchParameters=Ht;w.SearchResults=Ot;var Qt=w;const wt=Oe(Qt);export{wt as a};
