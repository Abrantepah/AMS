import{m as k}from"./mdast-util-find-and-replace-195d46af.js";import{u as p,d as v}from"./micromark-7d81d632.js";var c={},w=x;function x(i,t){var n=String(i),r=0,e;if(typeof t!="string")throw new Error("Expected character");for(e=n.indexOf(t);e!==-1;)r++,e=n.indexOf(t,e+t.length);return r}var h=w,g=k,A=p,m=v;c.transforms=[W];c.enter={literalAutolink:C,literalAutolinkEmail:u,literalAutolinkHttp:u,literalAutolinkWww:u};c.exit={literalAutolink:P,literalAutolinkEmail:L,literalAutolinkHttp:y,literalAutolinkWww:E};function C(i){this.enter({type:"link",title:null,url:"",children:[]},i)}function u(i){this.config.enter.autolinkProtocol.call(this,i)}function y(i){this.config.exit.autolinkProtocol.call(this,i)}function E(i){this.config.exit.data.call(this,i),this.stack[this.stack.length-1].url="http://"+this.sliceSerialize(i)}function L(i){this.config.exit.autolinkEmail.call(this,i)}function P(i){this.exit(i)}function W(i){g(i,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/i,_],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/,I]],{ignore:["link","linkReference"]})}function _(i,t,n,r,e){var f="",l,a;return!d(e)||(/^w/i.test(t)&&(n=t+n,t="",f="http://"),!$(n))||(l=O(n+r),!l[0])?!1:(a={type:"link",title:null,url:f+t+l[0],children:[{type:"text",value:t+l[0]}]},l[1]&&(a=[a,{type:"text",value:l[1]}]),a)}function I(i,t,n,r){return!d(r,!0)||/[_-]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function $(i){var t=i.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function O(i){var t=/[!"&'),.:;<>?\]}]+$/.exec(i),n,r,e;if(t)for(i=i.slice(0,t.index),t=t[0],n=t.indexOf(")"),r=h(i,"("),e=h(i,")");n!==-1&&r>e;)i+=t.slice(0,n+1),t=t.slice(n+1),n=t.indexOf(")"),e++;return[i,t]}function d(i,t){var n=i.input.charCodeAt(i.index-1);return(n!==n||m(n)||A(n))&&(!t||n!==47)}var z={},o="phrasing",s=["autolink","link","image","label"];z.unsafe=[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:o,notInConstruct:s},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:o,notInConstruct:s},{character:":",before:"[ps]",after:"\\/",inConstruct:o,notInConstruct:s}];export{c as f,z as t};
