var d=[].slice,m=y;function y(u,a){var i;return p;function p(){var r=d.call(arguments,0),l=u.length>r.length,e;l&&r.push(n);try{e=u.apply(null,r)}catch(o){if(l&&i)throw o;return n(o)}l||(e&&typeof e.then=="function"?e.then(t,n):e instanceof Error?n(e):t(e))}function n(){i||(i=!0,a.apply(null,arguments))}function t(r){n(null,r)}}var v=m,x=h;h.wrap=v;var s=[].slice;function h(){var u=[],a={};return a.run=i,a.use=p,a;function i(){var n=-1,t=s.call(arguments,0,-1),r=arguments[arguments.length-1];if(typeof r!="function")throw new Error("Expected function as last argument, not "+r);l.apply(null,[null].concat(t));function l(e){var o=u[++n],g=s.call(arguments,0),f=g.slice(1),w=t.length,c=-1;if(e){r(e);return}for(;++c<w;)(f[c]===null||f[c]===void 0)&&(f[c]=t[c]);t=f,o?v(o,l).apply(null,t):r.apply(null,[null].concat(t))}}function p(n){if(typeof n!="function")throw new Error("Expected `fn` to be a function, not "+n);return u.push(n),a}}export{x as t};
