import{a as c}from"./react-DH8gkkhY.js";import{g as ye}from"./@ant-design-OtiXosd2.js";function E(){return E=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},E.apply(this,arguments)}function Oe(e,r){if(e==null)return{};var n={},t=Object.keys(e),a,i;for(i=0;i<t.length;i++)a=t[i],!(r.indexOf(a)>=0)&&(n[a]=e[a]);return n}var xe=["bottom","height","left","right","top","width"],$e=function(r,n){return r===void 0&&(r={}),n===void 0&&(n={}),xe.some(function(t){return r[t]!==n[t]})},R=new Map,oe,Me=function e(){var r=[];R.forEach(function(n,t){var a=t.getBoundingClientRect();$e(a,n.rect)&&(n.rect=a,r.push(n))}),r.forEach(function(n){n.callbacks.forEach(function(t){return t(n.rect)})}),oe=window.requestAnimationFrame(e)};function Ce(e,r){return{observe:function(){var t=R.size===0;R.has(e)?R.get(e).callbacks.push(r):R.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[r]}),t&&Me()},unobserve:function(){var t=R.get(e);if(t){var a=t.callbacks.indexOf(r);a>=0&&t.callbacks.splice(a,1),t.callbacks.length||R.delete(e),R.size||cancelAnimationFrame(oe)}}}}var L=typeof window<"u"?c.useLayoutEffect:c.useEffect;function ke(e,r){r===void 0&&(r={width:0,height:0});var n=c.useState(e.current),t=n[0],a=n[1],i=c.useReducer(we,r),v=i[0],d=i[1],y=c.useRef(!1);return L(function(){e.current!==t&&a(e.current)}),L(function(){if(t&&!y.current){y.current=!0;var m=t.getBoundingClientRect();d({rect:m})}},[t]),c.useEffect(function(){if(t){var m=Ce(t,function(k){d({rect:k})});return m.observe(),function(){m.unobserve()}}},[t]),v}function we(e,r){var n=r.rect;return e.height!==n.height||e.width!==n.width?n:e}var Te=function(){return 50},Fe=function(r){return r},Ie=function(r,n){var t=n?"offsetWidth":"offsetHeight";return r[t]},fe=function(r){for(var n=Math.max(r.start-r.overscan,0),t=Math.min(r.end+r.overscan,r.size-1),a=[],i=n;i<=t;i++)a.push(i);return a};function je(e){var r,n=e.size,t=n===void 0?0:n,a=e.estimateSize,i=a===void 0?Te:a,v=e.overscan,d=v===void 0?1:v,y=e.paddingStart,m=y===void 0?0:y,k=e.paddingEnd,le=k===void 0?0:k,$=e.parentRef,w=e.horizontal,O=e.scrollToFn,ve=e.useObserver,de=e.initialRect,W=e.onScrollElement,H=e.scrollOffsetFn,V=e.keyExtractor,D=V===void 0?Fe:V,G=e.measureSize,J=G===void 0?Ie:G,Q=e.rangeExtractor,U=Q===void 0?fe:Q,me=w?"width":"height",T=w?"scrollLeft":"scrollTop",p=c.useRef({scrollOffset:0,measurements:[]}),X=c.useState(0),he=X[0],Y=X[1];p.current.scrollOffset=he;var ge=ve||ke,pe=ge($,de),Se=pe[me];p.current.outerSize=Se;var M=c.useCallback(function(s){$.current&&($.current[T]=s)},[$,T]),Z=O||M;O=c.useCallback(function(s){Z(s,M)},[M,Z]);var ee=c.useState({}),re=ee[0],A=ee[1],ze=c.useCallback(function(){return A({})},[]),F=c.useRef([]),x=c.useMemo(function(){var s=F.current.length>0?Math.min.apply(Math,F.current):0;F.current=[];for(var f=p.current.measurements.slice(0,s),u=s;u<t;u++){var l=D(u),o=re[l],S=f[u-1]?f[u-1].end:m,h=typeof o=="number"?o:i(u),g=S+h;f[u]={index:u,start:S,size:h,end:g,key:l}}return f},[i,re,m,t,D]),te=(((r=x[t-1])==null?void 0:r.end)||m)+le;p.current.measurements=x,p.current.totalSize=te;var C=W?W.current:$.current,K=c.useRef(H);K.current=H,L(function(){if(!C){Y(0);return}var s=function(u){var l=K.current?K.current(u):C[T];Y(l)};return s(),C.addEventListener("scroll",s,{capture:!1,passive:!0}),function(){C.removeEventListener("scroll",s)}},[C,T]);var ne=Ae(p.current),ae=ne.start,se=ne.end,P=c.useMemo(function(){return U({start:ae,end:se,overscan:d,size:x.length})},[ae,se,d,x.length,U]),ue=c.useRef(J);ue.current=J;var Re=c.useMemo(function(){for(var s=[],f=function(S,h){var g=P[S],I=x[g],b=E(E({},I),{},{measureRef:function(j){if(j){var N=ue.current(j,w);if(N!==b.size){var ce=p.current.scrollOffset;b.start<ce&&M(ce+(N-b.size)),F.current.push(g),A(function(Ee){var q;return E(E({},Ee),{},(q={},q[b.key]=N,q))})}}}});s.push(b)},u=0,l=P.length;u<l;u++)f(u);return s},[P,M,w,x]),ie=c.useRef(!1);L(function(){ie.current&&A({}),ie.current=!0},[i]);var _=c.useCallback(function(s,f){var u=f===void 0?{}:f,l=u.align,o=l===void 0?"start":l,S=p.current,h=S.scrollOffset,g=S.outerSize;o==="auto"&&(s<=h?o="start":s>=h+g?o="end":o="start"),o==="start"?O(s):o==="end"?O(s-g):o==="center"&&O(s-g/2)},[O]),B=c.useCallback(function(s,f){var u=f===void 0?{}:f,l=u.align,o=l===void 0?"auto":l,S=Oe(u,["align"]),h=p.current,g=h.measurements,I=h.scrollOffset,b=h.outerSize,z=g[Math.max(0,Math.min(s,t-1))];if(z){if(o==="auto")if(z.end>=I+b)o="end";else if(z.start<=I)o="start";else return;var j=o==="center"?z.start+z.size/2:o==="end"?z.end:z.start;_(j,E({align:o},S))}},[_,t]),be=c.useCallback(function(){for(var s=arguments.length,f=new Array(s),u=0;u<s;u++)f[u]=arguments[u];B.apply(void 0,f),requestAnimationFrame(function(){B.apply(void 0,f)})},[B]);return{virtualItems:Re,totalSize:te,scrollToOffset:_,scrollToIndex:be,measure:ze}}var Le=function(r,n,t,a){for(;r<=n;){var i=(r+n)/2|0,v=t(i);if(v<a)r=i+1;else if(v>a)n=i-1;else return i}return r>0?r-1:0};function Ae(e){for(var r=e.measurements,n=e.outerSize,t=e.scrollOffset,a=r.length-1,i=function(m){return r[m].start},v=Le(0,a,i,t),d=v;d<a&&r[d].end<t+n;)d++;return{start:v,end:d}}const Ke=Object.freeze(Object.defineProperty({__proto__:null,defaultRangeExtractor:fe,useVirtual:je},Symbol.toStringTag,{value:"Module"})),Be=ye(Ke);export{Be as r};
