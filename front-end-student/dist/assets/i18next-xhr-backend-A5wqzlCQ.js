import{_ as p,a as h,b as v,f as u}from"./@babel-BaQnMuoD.js";var c=[],y=c.forEach,P=c.slice;function g(a){return y.call(P.call(arguments,1),function(n){if(n)for(var t in n)a[t]===void 0&&(a[t]=n[t])}),a}function d(a,n){if(n&&u(n)==="object"){var t="",e=encodeURIComponent;for(var s in n)t+="&"+e(s)+"="+e(n[s]);if(!t)return a;a=a+(a.indexOf("?")!==-1?"&":"?")+t.slice(1)}return a}function m(a,n,t,e,s){e&&u(e)==="object"&&(s||(e._t=new Date),e=d("",e).slice(1)),n.queryStringParams&&(a=d(a,n.queryStringParams));try{var i;XMLHttpRequest?i=new XMLHttpRequest:i=new ActiveXObject("MSXML2.XMLHTTP.3.0"),i.open(e?"POST":"GET",a,1),n.crossDomain||i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.withCredentials=!!n.withCredentials,e&&i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.overrideMimeType&&i.overrideMimeType("application/json");var o=n.customHeaders;if(o=typeof o=="function"?o():o,o)for(var r in o)i.setRequestHeader(r,o[r]);i.onreadystatechange=function(){i.readyState>3&&t&&t(i.responseText,i)},i.send(e)}catch(f){console&&console.log(f)}}function M(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,parsePayload:function(n,t,e){return v({},t,e||"")},crossDomain:!1,ajax:m}}var j=function(){function a(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};h(this,a),this.init(n,t),this.type="backend"}return p(a,[{key:"init",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.services=t,this.options=g(e,this.options||{},M())}},{key:"readMulti",value:function(t,e,s){var i=this.options.loadPath;typeof this.options.loadPath=="function"&&(i=this.options.loadPath(t,e));var o=this.services.interpolator.interpolate(i,{lng:t.join("+"),ns:e.join("+")});this.loadUrl(o,s)}},{key:"read",value:function(t,e,s){var i=this.options.loadPath;typeof this.options.loadPath=="function"&&(i=this.options.loadPath([t],[e]));var o=this.services.interpolator.interpolate(i,{lng:t,ns:e});this.loadUrl(o,s)}},{key:"loadUrl",value:function(t,e){var s=this;this.options.ajax(t,this.options,function(i,o){if(o.status>=500&&o.status<600)return e("failed loading "+t,!0);if(o.status>=400&&o.status<500)return e("failed loading "+t,!1);var r,f;try{r=s.options.parse(i,t)}catch{f="failed parsing "+t+" to json"}if(f)return e(f,!1);e(null,r)})}},{key:"create",value:function(t,e,s,i){var o=this;typeof t=="string"&&(t=[t]);var r=this.options.parsePayload(e,s,i);t.forEach(function(f){var l=o.services.interpolator.interpolate(o.options.addPath,{lng:f,ns:e});o.options.ajax(l,o.options,function(w,H){},r)})}}]),a}();j.type="backend";export{j as B};
