import{F as E}from"./antd-BUi1be_c.js";import{r as m}from"./react-DeXQEnMH.js";import{_ as I}from"./tslib-rrx6G-_s.js";var x=function(c){var a=m.useState(!1),R=a[0],v=a[1],F=m.useState({}),p=F[0],w=F[1],l=c.defaultFormValues,V=c.form,S=c.submit,g=m.useState({}),d=g[0],C=g[1],u=m.useState(!1),b=u[0],i=u[1],L=m.useState(),k=L[0],_=L[1],s=3;E.useForm&&(s=4);var o=V;if(!V)if(s===4)o=E.useForm()[0];else throw new Error('"form" need in antd@3');var h=function(t){return C(t),i(!0),new Promise(function(f,e){s===4?o.validateFields().then(function(){f(Promise.resolve(S(t)).then(function(r){return i(!1),_(r),r}).catch(function(r){throw i(!1),r}))}).catch(function(r){i(!1),e(r)}):o.validateFields(function(r){r?(i(!1),e(r)):f(Promise.resolve(S(t)).then(function(n){return i(!1),_(n),n}).catch(function(n){throw i(!1),n}))})})};m.useEffect(function(){var t=!1;if(l){var f;return typeof l=="function"?(v(!0),f=l()):f=l,Promise.resolve(f).then(function(e){if(!t){var r=I({},e);Object.keys(e).forEach(function(n){r[n]=o.isFieldTouched(n)?o.getFieldValue(n):e[n]}),v(!1),w(e),o.setFieldsValue(r)}}).catch(function(){t||v(!1)}),function(){t=!0}}},[]);var P=s===4?{form:o,onFinish:h,initialValues:p}:{onSubmit:function(t){t.preventDefault(),h(o.getFieldsValue(s===4?!0:void 0))}};return{form:o,formProps:P,defaultFormValuesLoading:R,formValues:d,initialValues:p,formResult:k,formLoading:b,submit:function(t){return o.setFieldsValue(t),h(o.getFieldsValue(s===4?!0:void 0))}}},M=function(c){var a=c||{},R=a.form,v=a.defaultFormValues,F=a.defaultCurrent,p=F===void 0?0:F,w=a.submit,l=a.total,V=a.isBackValidate,S=V===void 0?!0:V,g=m.useState(p),d=g[0],C=g[1],u=x({form:R,submit:w,defaultFormValues:v}),b=u.form,i=u.formProps,L=u.formLoading,k=u.defaultFormValuesLoading,_=u.formValues,s=u.initialValues,o=u.formResult,h=u.submit,P=function(e){var r=e;e>l-1&&(r=l-1),e<0&&(r=0),C(r)},t=function(e){return e===d?!0:e<d&&!S?(P(e),!0):b.validateFields().then(function(r){return P(e),r})},f=function(e){return t(e)};return{current:d,gotoStep:t,stepsProps:{current:d,onChange:f},formProps:i,formLoading:L,defaultFormValuesLoading:k,formValues:_,initialValues:s,formResult:o,form:b,submit:h}};export{M as a,x as u};
