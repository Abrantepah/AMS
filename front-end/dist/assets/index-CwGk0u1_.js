import{j as e,r as N,a as Je}from"./react-DeXQEnMH.js";import{c as Tt}from"./react-dom-C-Hl01Sv.js";import{J as de,H as V,F as rt,c as Lt,Y as It,Z as Te,t as ce,d as Bt,r as Le,a as Nt,b as E,h as Et,s as At,m as qt,e as ue,o as Ke,x as Ft,n as zt,f as Dt,g as Rt,A as je,i as O,j as D,M as Ie,k as ot,R as v,l as P,v as $t,p as st,q as nt,W as it,u as pe,w as at,y as Ot,z as Wt,B as Vt,C as lt,D as _t,E as Ht,L as Mt,X as dt,Q as Ut,G as Qt,I as Gt,K as Jt,N as Kt,O as Yt,S as Xt,P as fe,T as Zt,U as er,V as tr,_ as rr,$ as or,a0 as sr}from"./@refinedev-BURQR2j0.js";import{t as k,L as F,S as Q,T as p,a as X,G as ee,M as Y,b as R,d as ct,s as Ye,A as nr,R as M,j as q,n as ir,I as $,C as z,f as Be,o as B,p as g,q as S,D as Z,r as le,F as C,u as ut,e as Se,U as ar,v as lr}from"./antd-BUi1be_c.js";import{L as dr,D as pt,R as cr,a as ur,U as ke,B as pr,aA as j,E as xe,C as xr,h as ve,aB as mr,aC as hr,aD as gr,aE as yr,aF as jr,aG as fr}from"./@ant-design-DX5lgJrN.js";import{L as Xe,u as xt,B as vr}from"./react-router-dom-DdqSygFK.js";import{d as Ne,W as Cr,a as wr,L as br}from"./dayjs-DyExRdQ_.js";import{d as Pr}from"./lodash-D-JJ_ee0.js";import{T as Sr,c as G}from"./antd-style-Cx9GojVy.js";import{n as kr}from"./@emotion-BEa3DOAP.js";import{u as _,b as Ee,f as Tr,g as I,O as ie}from"./react-router-DoHWAEFR.js";import{u as mt,i as Lr}from"./react-i18next-NzkprvdM.js";import{i as Ir}from"./i18next-D2qIsiwT.js";import{B as Br}from"./i18next-xhr-backend-BmLsv0GH.js";import{B as Nr}from"./i18next-browser-languagedetector-Df6wip1c.js";import"./scheduler-CzFDRTuY.js";import"./kbar-B3NWNjal.js";import"./fast-equals-DGtgJ43U.js";import"./tiny-invariant-CCEyh0dg.js";import"./fuse.js-CWED4z1g.js";import"./@radix-ui-TSLt_CsS.js";import"./@babel-twuf1KuW.js";import"./react-virtual-Q_yJbvAl.js";import"./sunflower-antd-JFTAs89T.js";import"./tslib-rrx6G-_s.js";import"./react-markdown-TR4SqdVP.js";import"./vfile-fzL750Th.js";import"./vfile-message-Yxcn4erv.js";import"./unist-util-stringify-position-DoPE_uaZ.js";import"./unified-DX0a-VcR.js";import"./bail-SStH00At.js";import"./extend-jtEkKnIJ.js";import"./trough-jSDOhjDI.js";import"./remark-parse-ly6Tk_Kz.js";import"./mdast-util-from-markdown-CzVY6DM7.js";import"./micromark-CzzHGSuL.js";import"./mdast-util-to-string-C0X7pjc9.js";import"./remark-rehype-B7K5eLTG.js";import"./mdast-util-to-hast-BruFuaQU.js";import"./mdurl-C8CUtoe4.js";import"./unist-builder-tpcLhTJa.js";import"./unist-util-visit-parents-Cg8WeLrx.js";import"./unist-util-is-DwpaFvQX.js";import"./unist-util-generated-C8XodnwN.js";import"./mdast-util-definitions-C_7RTOdj.js";import"./prop-types-BKNjMPK8.js";import"./property-information-Cytp7ONK.js";import"./xtend-CeaPpq3n.js";import"./space-separated-tokens-CMBzgJJ4.js";import"./comma-separated-tokens-DgTuumFk.js";import"./style-to-object-BJgLatKQ.js";import"./inline-style-parser-D--Rb2MU.js";import"./remark-gfm-DzZ6J81Z.js";import"./micromark-extension-gfm-C2pub1qt.js";import"./micromark-extension-gfm-autolink-literal-bX9_pU3b.js";import"./micromark-extension-gfm-table-CWMNnI7g.js";import"./micromark-extension-gfm-task-list-item-D_63skcW.js";import"./micromark-extension-gfm-strikethrough-BPcHxx-h.js";import"./mdast-util-gfm-sKjnyyop.js";import"./mdast-util-gfm-autolink-literal-BlrXkJGm.js";import"./mdast-util-find-and-replace-BIfOqU6k.js";import"./escape-string-regexp-BdPwSnSr.js";import"./mdast-util-gfm-strikethrough-CsZDDlv_.js";import"./mdast-util-to-markdown-CNf13Pp0.js";import"./repeat-string-CuhouN3Z.js";import"./mdast-util-gfm-table-MDCrFMD8.js";import"./markdown-table-CS3BmPel.js";import"./mdast-util-gfm-task-list-item-tYGaKol0.js";import"./error-stack-parser-DkmFR2Q5.js";import"./stackframe-yTHhDZ2b.js";import"./lodash-es-7KURb3zo.js";import"./qs-ciKtYD0p.js";import"./side-channel-BBBGKFpG.js";import"./get-intrinsic-B1Ut8WxJ.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-B8G-TZ45.js";import"./hasown-B9bXSDSU.js";import"./call-bind-Aj7T_c8u.js";import"./set-function-length-Ct5B6P4y.js";import"./define-data-property-CUxyvwXF.js";import"./es-define-property-28jGrh5V.js";import"./gopd-O61WwtTx.js";import"./has-property-descriptors-Cvfij9iw.js";import"./object-inspect-DHJ12d2l.js";import"./warn-once-DUq4dfZ1.js";import"./pluralize-r4e0Fyes.js";import"./papaparse-DH7jNH-b.js";import"./@tanstack-vXx_9BlV.js";import"./use-sync-external-store-YgCWVIe5.js";import"./@remix-run-D2Wyhr0w.js";import"./query-string-SCOpAa9y.js";import"./strict-uri-encode-DdzwWRIL.js";import"./decode-uri-component-CROxjmim.js";import"./split-on-first-BNP3K2Fc.js";import"./filter-obj-DG2z_hf8.js";import"./axios-Cm0UX6qg.js";import"./rc-util-Dg-Jfa6i.js";import"./classnames-BFJNR4kU.js";import"./rc-resize-observer-DmxcSgq6.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./rc-motion-DnRgflKg.js";import"./rc-overflow-B4vd_Lcs.js";import"./rc-tabs-CG93wEet.js";import"./rc-dropdown-B-0ymzTz.js";import"./@rc-component-D-g_OhNh.js";import"./rc-menu-Bd73HZgX.js";import"./rc-select-Dd_YhDS1.js";import"./rc-virtual-list-O1eIH0Cv.js";import"./rc-input-number-CN5u0_JZ.js";import"./rc-input-BV2Es9BS.js";import"./@ctrl-DOFZgDuz.js";import"./rc-drawer-WV46o3zG.js";import"./rc-field-form-CueF3vxi.js";import"./async-validator-DKvM95Vc.js";import"./scroll-into-view-if-needed-BZeNfFF0.js";import"./compute-scroll-into-view-DWa9QgjM.js";import"./rc-image-BwoFSs4m.js";import"./rc-dialog-kOFOXVAd.js";import"./rc-notification-BSrL2FGP.js";import"./rc-tooltip-BkGq-Q5l.js";import"./rc-segmented-BqEwBFaZ.js";import"./rc-table-D_ulW1-j.js";import"./rc-tree-D6L05L8f.js";import"./rc-checkbox-BI66T-NF.js";import"./rc-pagination-CJQH9jf1.js";import"./throttle-debounce-CWhimLW_.js";import"./rc-textarea-B3iBZQaG.js";import"./copy-to-clipboard-DBvqw_ha.js";import"./toggle-selection-BHUZwh74.js";import"./rc-upload-D9gCRDB8.js";import"./rc-picker-C9LDsqdr.js";import"./rc-progress-CzxqkeTt.js";import"./swr-DpQNgYzA.js";import"./stylis-TWPHNfLu.js";import"./use-merge-value-pnXfaoUy.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function l(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=l(o);fetch(o.href,n)}})();const ae="/assets/ams_logo-CXlI1sfo.svg",Er=({isSticky:r,sticky:s})=>{const{token:l}=k.useToken(),i=de(),{data:o}=V({v3LegacyAuthProviderCompatible:!!(i!=null&&i.isLegacy)});if(!(o&&(o.name||o.avatar)))return null;const a={backgroundColor:l.colorBgElevated,display:"flex",justifyContent:"flex-end",alignItems:"center",padding:"0px 24px",height:"64px"};return rt(s,r)&&(a.position="sticky",a.top=0,a.zIndex=1),e.jsx(F.Header,{style:a,children:e.jsx(Q,{children:e.jsxs(Q,{size:"middle",children:[(o==null?void 0:o.name)&&e.jsx(p.Text,{strong:!0,children:o.name}),(o==null?void 0:o.avatar)&&e.jsx(X,{src:o==null?void 0:o.avatar,alt:o==null?void 0:o.name})]})})})},Ar={borderTopLeftRadius:0,borderBottomLeftRadius:0,position:"fixed",top:64,zIndex:999},qr=({Title:r,render:s,meta:l,fixed:i,activeItemDisabled:o=!1})=>{const{token:n}=k.useToken(),{siderCollapsed:a,setSiderCollapsed:x,mobileSiderOpen:u,setMobileSiderOpen:d}=Lt(),h=It(),c=Te(),f=ce(),{warnWhen:w,setWarnWhen:t}=Bt(),{Link:y}=Le(),m=c==="legacy"?y:f,T=Nt(),b=E(),{menuItems:L,selectedKey:W,defaultOpenKeys:U}=Et({meta:l}),J=ee.useBreakpoint(),{hasDashboard:te}=At(),A=de(),{mutate:re}=qt({v3LegacyAuthProviderCompatible:!!(A!=null&&A.isLegacy)}),me=typeof J.lg>"u"?!1:!J.lg,oe=r??T??ue,$e=(se,ne)=>se.map(H=>{const{icon:He,label:Me,route:bt,key:Pt,name:Ue,children:he,parentName:St,meta:ge,options:ye}=H;if(he.length>0)return e.jsx(Ke,{resource:Ue.toLowerCase(),action:"list",params:{resource:H},children:e.jsx(Y.SubMenu,{icon:He??e.jsx(ke,{onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),title:Me,children:$e(he,ne)},H.key)},H.key);const Qe=Pt===ne,kt=!(rt(ge==null?void 0:ge.parent,ye==null?void 0:ye.parent,St)!==void 0&&he.length===0),Ge=o&&Qe?{pointerEvents:"none"}:{};return e.jsx(Ke,{resource:Ue.toLowerCase(),action:"list",params:{resource:H},children:e.jsxs(Y.Item,{icon:He??(kt&&e.jsx(ke,{onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0})),style:Ge,children:[e.jsx(m,{to:bt??"",style:Ge,children:Me}),!a&&Qe&&e.jsx("div",{className:"ant-menu-tree-arrow"})]},H.key)},H.key)}),vt=()=>{w?window.confirm(b("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."))&&(t(!1),re()):re()},Oe=h&&e.jsx(Y.Item,{onClick:()=>vt(),icon:e.jsx(dr,{onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),children:b("buttons.logout","Logout")},"logout"),We=te?e.jsxs(Y.Item,{icon:e.jsx(pt,{onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),children:[e.jsx(m,{to:"/",children:b("dashboard.title","Dashboard")}),!a&&W==="/"&&e.jsx("div",{className:"ant-menu-tree-arrow"})]},"dashboard"):null,Ve=$e(L,W),Ct=()=>s?s({dashboard:We,items:Ve,logout:Oe,collapsed:a}):e.jsxs(e.Fragment,{children:[We,Ve,Oe]}),_e=()=>e.jsx(Y,{selectedKeys:W?[W]:[],defaultOpenKeys:U,mode:"inline",style:{paddingTop:"8px",border:"none",overflow:"auto",height:"calc(100% - 72px)"},onClick:()=>{d(!1)},children:Ct()}),wt=()=>e.jsxs(e.Fragment,{children:[e.jsx(ct,{open:u,onClose:()=>d(!1),placement:"left",closable:!1,width:200,bodyStyle:{padding:0},maskClosable:!0,children:e.jsx(F,{children:e.jsxs(F.Sider,{style:{height:"100vh",backgroundColor:n.colorBgContainer,borderRight:`1px solid ${n.colorBgElevated}`},children:[e.jsx("div",{style:{width:"200px",padding:"0 16px",display:"flex",justifyContent:"flex-start",alignItems:"center",height:"64px",backgroundColor:n.colorBgElevated},children:e.jsx(oe,{collapsed:!1})}),_e()]})})}),e.jsx(R,{style:Ar,size:"large",onClick:()=>d(!0),icon:e.jsx(pr,{onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0})})]});if(me)return wt();const K={backgroundColor:n.colorBgContainer,borderRight:`1px solid ${n.colorBgElevated}`};return i&&(K.position="fixed",K.top=0,K.height="100vh",K.zIndex=999),e.jsxs(e.Fragment,{children:[i&&e.jsx("div",{style:{width:a?"80px":"200px",transition:"all 0.2s"}}),e.jsxs(F.Sider,{style:K,collapsible:!0,collapsed:a,onCollapse:(se,ne)=>{ne==="clickTrigger"&&x(se)},collapsedWidth:80,breakpoint:"lg",trigger:e.jsx(R,{type:"text",style:{borderRadius:0,height:"100%",width:"100%",backgroundColor:n.colorBgElevated},children:a?e.jsx(cr,{style:{color:n.colorPrimary},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}):e.jsx(ur,{style:{color:n.colorPrimary},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0})}),children:[e.jsx("div",{style:{width:a?"80px":"200px",padding:a?"0":"0 16px",display:"flex",justifyContent:a?"center":"flex-start",alignItems:"center",height:"64px",backgroundColor:n.colorBgElevated,fontSize:"14px"},children:e.jsx(oe,{collapsed:a})}),_e()]})]})},Ze=({children:r,Header:s,Sider:l,Title:i,Footer:o,OffLayoutArea:n,initialSiderCollapsed:a})=>{const x=ee.useBreakpoint(),u=l??qr,d=s??Er,h=typeof x.sm>"u"?!0:x.sm,c=!!u({Title:i});return e.jsx(Ft,{initialSiderCollapsed:a,children:e.jsxs(F,{style:{minHeight:"100vh"},hasSider:c,children:[e.jsx(u,{Title:i}),e.jsxs(F,{children:[e.jsx(d,{}),e.jsxs(F.Content,{children:[e.jsx("div",{style:{minHeight:360,padding:h?24:12},children:r}),n&&e.jsx(n,{})]}),o&&e.jsx(o,{})]})]})})},Fr=()=>{localStorage.setItem("auto_login","false")},Ce="attendance-auth",zr={login:async({reference:r,password:s})=>{if(r&&s){const l=await fetch("https://knust-ams.up.railway.app/api/lecturer-login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:s})}),i=await l.json();if(l.status===200)return localStorage.setItem(Ce,JSON.stringify({id:i.id,reference:i.reference,name:i.name,user:i.user,department:i.department})),{success:!0,redirectTo:"/"}}return{success:!1,error:{message:"Lecturer Login failed",name:"Invalid ID or password"}}},updatePassword:async()=>(Ye.success({message:"Updated Password",description:"Password updated successfully"}),{success:!0}),forgotPassword:async({email:r})=>(Ye.success({message:"Reset Password",description:`Reset password link sent to "${r}"`}),{success:!0}),logout:async()=>(Fr(),localStorage.clear(),document.cookie.split(";").forEach(r=>{document.cookie=r.replace(/^ +/,"").replace(/=.*/,"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/")}),{success:!0,redirectTo:"/lecturer-login"}),onError:async r=>{var s;return((s=r.response)==null?void 0:s.status)===401?{logout:!0}:{error:r}},check:async()=>localStorage.getItem(Ce)?{authenticated:!0}:{authenticated:!1,error:{message:"Check failed",name:"Token not found"},logout:!0,redirectTo:"/login"},getPermissions:async()=>null,getIdentity:async()=>{const r=localStorage.getItem(Ce);if(r){const s=JSON.parse(r);return{id:s.id,name:s.name,email:s.email,avatar:s.avatar,index:s.index}}return null}},ht=N.createContext(void 0),Dr=localStorage.getItem("theme")||"light",Rr=({theme:r,children:s})=>{const[l,i]=N.useState(Dr),o=n=>{localStorage.setItem("theme",n);const a=document.querySelector("html");a==null||a.setAttribute("data-theme",n),i(n)};return N.useEffect(()=>{const n=document.querySelector("html");n==null||n.setAttribute("data-theme",l)},[]),e.jsx(ht.Provider,{value:{mode:l,setMode:o},children:e.jsx(nr,{theme:{...zt.Orange,algorithm:l==="light"?k.defaultAlgorithm:k.darkAlgorithm,...r},children:e.jsx(Sr,{appearance:l,children:s})})})},gt=()=>{const r=N.useContext(ht);if(r===void 0)throw new Error("useConfigProvider must be used within a ConfigProvider");return r},$r=G(({token:r})=>({headerTitle:{display:"flex",justifyContent:"space-between",fontSize:"14px",fontWeight:"bold",borderBottom:"1px"},inputSuffix:{width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:r.colorBgTextHover,color:r.colorTextDisabled,borderRadius:"4px",fontSize:"12px"},inputPrefix:{color:r.colorTextPlaceholder,marginRight:"4px"},languageSwitchText:{color:r.colorTextSecondary},languageSwitchIcon:{color:r.colorTextTertiary,width:"10px"},themeSwitch:{display:"flex",alignItems:"center",justifyContent:"center",height:"32px",width:"32px",borderRadius:"50%",cursor:"pointer",backgroundColor:r.colorBgTextHover},userName:{display:"flex !important",color:r.colorTextHeading,fontSize:"14px"}})),{Header:Or}=F,{useToken:Wr}=k,{Text:we}=p,{useBreakpoint:Vr}=ee,et=()=>{const{token:r}=Wr(),{styles:s}=$r();gt();const{i18n:l}=mt(),i=Dt(),o=Rt(),{data:n}=V(),a=Vr(),x=E();i();const u=t=>e.jsxs("div",{className:s.headerTitle,children:[e.jsx(we,{style:{fontSize:"16px"},children:t}),e.jsx(Xe,{to:`/${t.toLowerCase()}`,children:x("search.more")})]}),d=(t,y,m)=>({value:t,label:e.jsxs(Xe,{to:m,style:{display:"flex",alignItems:"center"},children:[y&&e.jsx(X,{size:32,src:y,style:{minWidth:"32px",marginRight:"16px"}}),e.jsx(we,{children:t})]})}),[h,c]=N.useState(""),[f,w]=N.useState([]);return je({resource:"orders",config:{filters:[{field:"q",operator:"contains",value:h}]},queryOptions:{enabled:!1,onSuccess:t=>{const y=t.data.map(m=>{var T,b,L;return d(`${m.store.title} / #${m.orderNumber}`,((L=(b=(T=m==null?void 0:m.products)==null?void 0:T[0].images)==null?void 0:b[0])==null?void 0:L.url)||"/images/default-order-img.png",`/orders/show/${m.id}`)});y.length>0&&w(m=>[...m,{label:u(x("orders.orders")),options:y}])}}}),je({resource:"stores",config:{filters:[{field:"q",operator:"contains",value:h}]},queryOptions:{enabled:!1,onSuccess:t=>{const y=t.data.map(m=>d(m.title,"",`/stores/edit/${m.id}`));y.length>0&&w(m=>[...m,{label:u(x("stores.stores")),options:y}])}}}),je({resource:"couriers",config:{filters:[{field:"q",operator:"contains",value:h}]},queryOptions:{enabled:!1,onSuccess:t=>{const y=t.data.map(m=>d(`${m.name} ${m.surname}`,m.avatar[0].url,`/couriers/show/${m.id}`));y.length>0&&w(m=>[...m,{label:u(x("couriers.couriers")),options:y}])}}}),N.useEffect(()=>{},[h]),[...l.languages||[]].sort().map(t=>({key:t,onClick:()=>o(t),icon:e.jsx("span",{style:{marginRight:8},children:e.jsx(X,{size:16,src:`/images/flags/${t}.svg`})}),label:t==="en"?"English":"German"})),e.jsx(Or,{style:{backgroundColor:r.colorBgElevated,padding:"0 24px"},children:e.jsxs(M,{align:"middle",style:{justifyContent:a.sm?"space-between":"end"},children:[e.jsx(q,{xs:0,sm:8,md:12,children:e.jsx(ir,{style:{width:"100%",maxWidth:"550px"},options:f,filterOption:!1,onSearch:Pr(t=>c(t),300),children:e.jsx($,{size:"large",placeholder:x("search.placeholder"),suffix:e.jsx("div",{className:s.inputSuffix,children:"/"}),prefix:e.jsx(j,{className:s.inputPrefix,onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0})})})}),e.jsx(q,{children:e.jsx(Q,{size:a.md?32:16,align:"center",children:e.jsxs(Q,{size:a.md?16:8,align:"center",children:[e.jsx(we,{ellipsis:!0,className:s.userName,children:n==null?void 0:n.name}),e.jsx(X,{size:"large",src:n==null?void 0:n.avatar,alt:n==null?void 0:n.name})]})})})]})})},_r="/assets/knust-mobile-VbPX6VIz.svg",Hr=kr.div`
    height: 72px;
    display: flex;
    justify-content: center;
    align-items: center;
`,tt=({collapsed:r})=>{k.useToken();const s=ce();return e.jsx(Hr,{children:e.jsx(s,{to:"/",children:r?e.jsx("img",{src:_r,style:{width:"30px"},alt:"logo_mobile"}):e.jsx(Q,{size:12,children:e.jsx("img",{src:ae,alt:"logo",style:{width:"130px"}})})})})},yt=G(({token:r})=>({card:{position:"relative",height:"100%",display:"flex",flexDirection:"column",":hover":{".viewButton":{display:"block !important"}}},viewButton:{position:"absolute",display:"none !important",width:"max-content !important",top:"50%",left:0,marginLeft:"50%",transform:"translate(-50%, -50%)",padding:"5px 12px 5px 12px",zIndex:1,backgroundColor:r.colorBgContainer}})),Mr=()=>{var u;const r=O(),{pathname:s}=_(),{showUrl:l}=D(),{data:i}=V();k.useToken();const{styles:o,cx:n}=yt(),{queryResult:a}=Ie({resource:"generateCode",id:i==null?void 0:i.id}),x=((u=a.data)==null?void 0:u.data.courses)??[];return e.jsx(e.Fragment,{children:e.jsx(M,{gutter:[8,8],style:{marginTop:"10px"},children:x.map(d=>e.jsx(q,{xl:{span:24},lg:10,md:10,sm:24,xs:24,children:e.jsx(z,{hoverable:!0,bordered:!1,className:o.card,styles:{body:{padding:16},cover:{position:"relative"},actions:{marginTop:"auto"}},onClick:()=>r({to:`${l("courses",d.id)}`,query:{to:s},options:{keepQuery:!0},type:"replace"}),cover:e.jsx(e.Fragment,{children:e.jsx(Be,{onClick:()=>r({to:`${l("courses",d.id)}`,query:{to:s},options:{keepQuery:!0},type:"replace"}),className:n(o.viewButton,"viewButton"),icon:e.jsx(xe,{onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),children:"View"})}),children:e.jsx(z.Meta,{title:e.jsx(B,{children:e.jsx(p.Title,{level:5,ellipsis:{rows:1,tooltip:d.name},children:d.name})}),description:d.code})},d.id)}))})})},Ur=r=>{const{mode:s}=gt();return e.jsx(z,{styles:{header:{backgroundColor:s==="light"?"#FAFAFA":"#1F1F1F",padding:"16px"},body:{...(r==null?void 0:r.bodyStyles)||{}}},title:e.jsxs(Q,{align:"center",size:8,children:[r.icon,e.jsx(p.Text,{style:{fontWeight:400},children:r.title})]}),children:r.children})},be=r=>e.jsx(z,{styles:{header:{padding:"16px 16px 10px 16px",minHeight:"max-content",borderBottom:0,cursor:"pointer"},body:{padding:"24px 16px 24px 24px",cursor:"pointer",...(r==null?void 0:r.bodyStyles)||{}}},title:e.jsxs(B,{align:"center",justify:"space-between",children:[e.jsxs(B,{gap:8,children:[r.icon,e.jsx(p.Text,{style:{fontWeight:400},children:r.title})]}),r==null?void 0:r.rightSlot]}),onClick:r.handleClick,children:r.children}),Ae=({total:r,entityName:s})=>{const l=E(),{token:i}=k.useToken();return e.jsxs("div",{style:{marginLeft:"16px",marginRight:"auto"},children:[e.jsx(p.Text,{style:{color:i.colorTextSecondary},children:r})," ",e.jsx(p.Text,{style:{color:i.colorTextTertiary},children:l(`${s}`)})]})},Qr=()=>{var h;const{token:r}=k.useToken(),s=E(),{data:l}=V(),i=O(),{pathname:o}=_(),{showUrl:n}=D(),{tableProps:a,filters:x,sorters:u}=ot({resource:`generateCode/${l==null?void 0:l.id}`,filters:{initial:[{field:"name",operator:"contains",value:""},{field:"code",operator:"in",value:[]},{field:"year",operator:"in",value:[]}]}}),d=((h=a.dataSource)==null?void 0:h.courses)??[];return e.jsxs(g,{...a,dataSource:d,children:[e.jsx(g.Column,{title:e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:"ID #"}),dataIndex:"id",width:80,render:c=>e.jsxs(p.Text,{style:{whiteSpace:"nowrap"},children:["#",c]}),filterIcon:c=>e.jsx(j,{style:{color:c?r.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),filterDropdown:c=>e.jsx(v,{...c,children:e.jsx(S,{addonBefore:"#",style:{width:"100%"},placeholder:s("Filter courses")})})},"id"),e.jsx(g.Column,{title:s("Course Name"),dataIndex:"name",filterIcon:c=>e.jsx(j,{style:{color:c?r.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("name",x,"contains"),filterDropdown:c=>e.jsx(v,{...c,children:e.jsx($,{placeholder:s("course name")})}),render:c=>e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:c})},"name"),e.jsx(g.Column,{title:s("Code"),dataIndex:"code",filterIcon:c=>e.jsx(j,{style:{color:c?r.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("description",x,"contains"),filterDropdown:c=>e.jsx(v,{...c,children:e.jsx($,{placeholder:s("course code")})}),render:c=>e.jsx(p.Paragraph,{ellipsis:{rows:1,tooltip:!0},style:{maxWidth:"400px",marginBottom:0},children:c})},"code"),e.jsx(g.Column,{title:s("Year"),dataIndex:"year",align:"right",sorter:!0,defaultSortOrder:$t("price",u),render:c=>e.jsx(st,{value:c,style:{width:"80px",fontVariantNumeric:"tabular-nums",whiteSpace:"nowrap"}})},"year"),e.jsx(g.Column,{title:s("Details"),fixed:"right",align:"center",render:(c,f)=>e.jsx(R,{icon:e.jsx(xe,{onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),onClick:()=>i({to:`${n("courses",f.id)}`,query:{to:o},options:{keepQuery:!0},type:"replace"})})},"actions")]})},Gr=()=>{var h;const{styles:r,cx:s}=yt();k.useToken();const{data:l}=V();E();const i=O(),{pathname:o}=_(),{showUrl:n}=D(),{listProps:a,filters:x,setFilters:u}=nt({resource:`generateCode/${l==null?void 0:l.id}`}),d=((h=a.dataSource)==null?void 0:h.courses)??[];return console.log(d),e.jsxs(e.Fragment,{children:[e.jsx(Z,{style:{margin:"16px 0px"}}),e.jsx(le,{...a,pagination:{...d.pagination,showTotal:c=>e.jsx(Ae,{total:c,entityName:"courses"})},dataSource:d,grid:{gutter:[16,16],column:4,xxl:4,xl:4,lg:3,md:2,sm:1,xs:1},renderItem:c=>e.jsx(le.Item,{style:{height:"100%"},children:e.jsx(z,{hoverable:!0,bordered:!1,className:r.card,styles:{body:{padding:"50px 20px"},cover:{position:"relative"},actions:{marginTop:"auto"}},onClick:()=>i({to:`${n("courses",c.id)}`,query:{to:o},options:{keepQuery:!0},type:"replace"}),cover:e.jsx(e.Fragment,{children:e.jsx(Be,{onClick:()=>i({to:`${n("courses",c.id)}`,query:{to:o},options:{keepQuery:!0},type:"replace"}),className:s(r.viewButton,"viewButton"),icon:e.jsx(xe,{onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),children:"View"})}),children:e.jsx(z.Meta,{title:e.jsxs(B,{children:[e.jsx(p.Title,{level:5,ellipsis:{rows:1,tooltip:c.name},children:c.name}),e.jsx(st,{value:c.year,style:{paddingLeft:"8px",marginLeft:"auto"}})]}),description:c.code})},`data-${c.id}`)})})]})},jt=r=>{const{token:s}=k.useToken();return e.jsxs(ct,{...r,styles:{body:{backgroundColor:s.colorBgLayout,borderLeft:`1px solid ${s.colorBorderSecondary}`,padding:"0"},header:{display:"none"}},children:[e.jsxs("div",{style:{height:"64px",display:"flex",alignItems:"center",backgroundColor:s.colorBgContainer},children:[r.title&&e.jsx(p.Title,{style:{fontWeight:400,marginLeft:"16px",marginBottom:0},level:5,children:r.title}),e.jsx(R,{type:"text",style:{display:"flex",marginLeft:"auto",marginRight:"16px",alignItems:"center",justifyContent:"center",padding:0,color:s.colorTextTertiary},icon:e.jsx(xr,{onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),onClick:r==null?void 0:r.onClose})]}),r.children]})};G(({token:r})=>({formItem:{".ant-input-disabled, .ant-input-number-disabled, .ant-select-outlined.ant-select-disabled .ant-select-selector, .ant-input-number-outlined.ant-input-number-disabled input[disabled]":{borderColor:"transparent !important",backgroundColor:"transparent !important",color:r.colorText,userSelect:"text",cursor:"text",resize:"none"},".ant-select-outlined.ant-select .ant-select-arrow":{display:"none"}}}));G(({token:r})=>({formItem:{height:"40px",display:"flex",alignItems:"center",width:"100%",".ant-input-disabled":{borderColor:"transparent",backgroundColor:"transparent",color:r.colorText,userSelect:"text",cursor:"text"}},title:{".ant-input-disabled":{fontSize:r.fontSizeHeading3,padding:0,margin:0}},default:{}}));const Jr=()=>{var u;const{token:r}=k.useToken(),{t:s}=mt();it();const{data:l}=V(),i=O(),{listUrl:o}=D(),n=_(),{queryResult:a}=Ie({resource:"generateCode",id:l==null?void 0:l.id}),x=((u=a.data)==null?void 0:u.data.courses)??[];return e.jsx(pe,{title:s("dashboard.overview.title"),headerButtons:d=>N.createElement(at,{...d.createButtonProps,key:"create",size:"large",onClick:()=>i({to:`${o("courses")}`,query:{to:n},options:{keepQuery:!0},type:"replace"})},s("Add course")),children:e.jsxs(M,{gutter:[16,32],children:[e.jsx(q,{md:24,children:e.jsxs(M,{gutter:[30,30],children:[e.jsx(q,{xl:{span:8},lg:10,md:10,sm:24,xs:24,children:e.jsx(be,{icon:e.jsx(ve,{style:{fontSize:14,color:r.colorPrimary},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),bodyStyles:{textAlign:"right",paddingRight:"30px"},title:s("Active Courses"),handleClick:()=>i({to:`${o("courses")}`,query:{to:n},options:{keepQuery:!0},type:"replace"}),children:e.jsx(p,{style:{fontSize:50,fontWeight:700},children:x.length})})}),e.jsx(q,{xl:{span:8},lg:10,md:10,sm:24,xs:24,children:e.jsx(be,{icon:e.jsx(ve,{style:{fontSize:14,color:r.colorPrimary},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),bodyStyles:{textAlign:"right",paddingRight:"30px"},title:s("Total Sessions Recorded"),handleClick:()=>i({to:`${o("courses")}`,query:{to:n},options:{keepQuery:!0},type:"replace"}),children:e.jsx(p,{style:{fontSize:50,fontWeight:700},children:"14"})})}),e.jsx(q,{xl:{span:8},lg:10,md:10,sm:24,xs:24,children:e.jsx(be,{icon:e.jsx(ve,{style:{fontSize:14,color:r.colorPrimary},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),title:s("Completed Courses"),bodyStyles:{textAlign:"right",paddingRight:"30px"},handleClick:()=>i({to:`${o("courses")}`,query:{to:n},options:{keepQuery:!0},type:"replace"}),children:e.jsx(p,{style:{fontSize:50,fontWeight:700},children:"0"})})})]})}),e.jsx(q,{xl:24,lg:24,md:24,sm:24,xs:24,children:e.jsx(Ur,{bodyStyles:{padding:"1px 0px 0px 0px"},icon:e.jsx(mr,{style:{fontSize:14,color:r.colorPrimary},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),title:s("Recently Accessed Courses"),children:e.jsx(Mr,{})})})]})})},Kr=()=>e.jsx(Jr,{}),qe={},Fe={maxWidth:"400px",margin:"auto",padding:"32px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.02), 0px 1px 6px -1px rgba(0, 0, 0, 0.02), 0px 1px 2px rgba(0, 0, 0, 0.03)"},ze={borderBottom:0,padding:0},De={padding:0,marginTop:"32px"},Re={textAlign:"center",marginBottom:0,fontSize:"24px",lineHeight:"32px",fontWeight:700,overflowWrap:"break-word",hyphens:"manual",textOverflow:"unset",whiteSpace:"pre-wrap"},Yr=({providers:r,forgotPasswordLink:s,rememberMe:l,contentProps:i,wrapperProps:o,renderContent:n,formProps:a,title:x,hideForm:u})=>{const{token:d}=k.useToken(),[h]=C.useForm(),c=E();Te(),ce(),Le();const f=de(),{mutate:w,isLoading:t}=Ot({v3LegacyAuthProviderCompatible:!!(f!=null&&f.isLegacy)}),y=x===!1?null:e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"32px",fontSize:"20px"},children:x??e.jsx(ue,{collapsed:!1})}),m=e.jsx(p.Title,{level:3,style:{color:d.colorPrimaryTextHover,...Re},children:c("Lecturer Login")}),T=()=>r&&r.length>0?e.jsxs(e.Fragment,{children:[r.map(L=>e.jsx(R,{type:"default",block:!0,icon:L.icon,style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",marginBottom:"8px"},onClick:()=>w({providerName:L.name}),children:L.label},L.name)),!u&&e.jsx(Z,{children:e.jsx(p.Text,{style:{color:d.colorTextLabel},children:c("pages.login.divider","or")})})]}):null,b=e.jsxs(z,{title:e.jsx(e.Fragment,{children:m}),headStyle:ze,bodyStyle:De,style:{...Fe,backgroundColor:d.colorBgElevated},...i??{},children:[T(),!u&&e.jsxs(C,{layout:"vertical",form:h,onFinish:L=>w(L),requiredMark:!1,initialValues:{remember:!1},...a,children:[e.jsx(C.Item,{name:"reference",label:c("Staff ID"),rules:[{required:!0},{message:c("Invalid reference number")}],children:e.jsx($,{size:"large",placeholder:c("Staff ID")})}),e.jsx(C.Item,{name:"password",label:c("pages.login.fields.password","Password"),rules:[{required:!0}],children:e.jsx($,{type:"password",autoComplete:"current-password",placeholder:"●●●●●●●●",size:"large"})}),!u&&e.jsx(C.Item,{children:e.jsx(R,{type:"primary",size:"large",htmlType:"submit",loading:t,block:!0,children:c("Login")})})]})]});return e.jsx(F,{style:qe,...o??{},children:e.jsx(M,{justify:"center",align:u?"top":"middle",style:{padding:"16px 0",minHeight:"100dvh",paddingTop:u?"15dvh":"16px"},children:e.jsx(q,{xs:22,children:n?n(b,y):e.jsxs(e.Fragment,{children:[y,b]})})})})},Xr=({loginLink:r,wrapperProps:s,contentProps:l,renderContent:i,formProps:o,title:n})=>{const{token:a}=k.useToken(),[x]=C.useForm(),u=E(),d=Te(),h=ce(),{Link:c}=Le(),f=d==="legacy"?c:h,{mutate:w,isLoading:t}=Wt(),y=n===!1?null:e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"32px",fontSize:"20px"},children:n??e.jsx(ue,{collapsed:!1})}),m=e.jsx(p.Title,{level:3,style:{color:a.colorPrimaryTextHover,...Re},children:u("pages.forgotPassword.title","Forgot your password?")}),T=e.jsx(z,{title:m,headStyle:ze,bodyStyle:De,style:{...Fe,backgroundColor:a.colorBgElevated},...l??{},children:e.jsxs(C,{layout:"vertical",form:x,onFinish:b=>w(b),requiredMark:!1,...o,children:[e.jsx(C.Item,{name:"email",label:u("pages.forgotPassword.fields.email","Email"),rules:[{required:!0},{type:"email",message:u("pages.forgotPassword.errors.validEmail","Invalid email address")}],children:e.jsx($,{type:"email",size:"large",placeholder:u("pages.forgotPassword.fields.email","Email")})}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between"},children:r??e.jsxs(p.Text,{style:{fontSize:12,marginLeft:"auto"},children:[u("pages.register.buttons.haveAccount","Have an account? ")," ",e.jsx(f,{style:{fontWeight:"bold",color:a.colorPrimaryTextHover},to:"/login",children:u("pages.login.signin","Sign in")})]})}),e.jsx(C.Item,{style:{marginTop:"24px",marginBottom:0},children:e.jsx(R,{type:"primary",size:"large",htmlType:"submit",loading:t,block:!0,children:u("pages.forgotPassword.buttons.submit","Send reset instructions")})})]})});return e.jsx(F,{style:qe,...s??{},children:e.jsx(M,{justify:"center",align:"middle",style:{padding:"16px 0",minHeight:"100dvh"},children:e.jsx(q,{xs:22,children:i?i(T,y):e.jsxs(e.Fragment,{children:[y,T]})})})})},Zr=({wrapperProps:r,contentProps:s,renderContent:l,formProps:i,title:o})=>{const{token:n}=k.useToken(),[a]=C.useForm(),x=E(),u=de(),{mutate:d,isLoading:h}=Vt({v3LegacyAuthProviderCompatible:!!(u!=null&&u.isLegacy)}),c=o===!1?null:e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"32px",fontSize:"20px"},children:o??e.jsx(ue,{collapsed:!1})}),f=e.jsx(p.Title,{level:3,style:{color:n.colorPrimaryTextHover,...Re},children:x("pages.updatePassword.title","Set New Password")}),w=e.jsx(z,{title:f,headStyle:ze,bodyStyle:De,style:{...Fe,backgroundColor:n.colorBgElevated},...s??{},children:e.jsxs(C,{layout:"vertical",form:a,onFinish:t=>d(t),requiredMark:!1,...i,children:[e.jsx(C.Item,{name:"password",label:x("pages.updatePassword.fields.password","New Password"),rules:[{required:!0}],style:{marginBottom:"12px"},children:e.jsx($,{type:"password",placeholder:"●●●●●●●●",size:"large"})}),e.jsx(C.Item,{name:"confirmPassword",label:x("pages.updatePassword.fields.confirmPassword","Confirm New Password"),hasFeedback:!0,dependencies:["password"],rules:[{required:!0},({getFieldValue:t})=>({validator(y,m){return!m||t("password")===m?Promise.resolve():Promise.reject(new Error(x("pages.updatePassword.errors.confirmPasswordNotMatch","Passwords do not match")))}})],children:e.jsx($,{type:"password",placeholder:"●●●●●●●●",size:"large"})}),e.jsx(C.Item,{style:{marginBottom:0},children:e.jsx(R,{type:"primary",size:"large",htmlType:"submit",loading:h,block:!0,children:x("pages.updatePassword.buttons.submit","Update")})})]})});return e.jsx(F,{style:qe,...r??{},children:e.jsx(M,{justify:"center",align:"middle",style:{padding:"16px 0",minHeight:"100dvh"},children:e.jsx(q,{xs:22,children:l?l(w,c):e.jsxs(e.Fragment,{children:[c,w]})})})})},Pe=r=>{const{type:s}=r,l=()=>{switch(s){case"forgotPassword":return e.jsx(Xr,{...r});case"updatePassword":return e.jsx(Zr,{...r});default:return e.jsx(Yr,{...r})}};return e.jsx(e.Fragment,{children:l()})},eo=({children:r})=>{const s=O(),{replace:l}=D(),{pathname:i}=_(),{createUrl:o}=D(),[n,a]=N.useState(localStorage.getItem("product-view")||"table"),x=d=>{l(""),a(d),localStorage.setItem("product-view",d)},u=E();return e.jsxs(pe,{breadcrumb:!1,headerButtons:d=>[e.jsx(ut,{size:"large",value:n,style:{marginRight:24},options:[{label:"",value:"table",icon:e.jsx(ke,{onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0})},{label:"",value:"card",icon:e.jsx(hr,{onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0})}],onChange:x},"view"),N.createElement(at,{...d.createButtonProps,key:"create",size:"large",onClick:()=>s({to:`${o("courses")}`,query:{to:i},options:{keepQuery:!0},type:"replace"})},u("Add Course"))],children:[n==="table"&&e.jsx(Qr,{}),n==="card"&&e.jsx(Gr,{}),r]})},to=G(({token:r})=>({uploadDragger:{width:"100% !important",height:"100% !important",marginLeft:"auto",marginRight:"auto",padding:"16px",".ant-upload-drag":{width:"240px !important",height:"240px !important",marginLeft:"auto",marginRight:"auto",border:"none",backgroundColor:r.colorBgContainer},".ant-upload-btn":{padding:"0px !important"}},formItem:{backgroundColor:r.colorBgContainer,padding:"16px",margin:0,borderBottom:`1px solid ${r.colorBorderSecondary}`}})),ft=r=>{var W;const s=lt(),[l]=xt(),i=O(),o=E(),n=it(),a=ee.useBreakpoint(),{styles:x,theme:u}=to(),{drawerProps:d,formProps:h,close:c,saveButtonProps:f,formLoading:w}=_t({resource:"products",id:r==null?void 0:r.id,action:r.action,redirect:!1,onMutationSuccess:()=>{var U;(U=r.onMutationSuccess)==null||U.call(r)}}),{selectProps:t}=Ht({resource:"categories"}),y=()=>{if(c(),r!=null&&r.onClose){r.onClose();return}i({to:l.get("to")??s({action:"list"})??"",query:{to:void 0},options:{keepQuery:!0},type:"replace"})},m=C.useWatch("images",h.form),T=(m==null?void 0:m[0])||null,b=(T==null?void 0:T.url)||((W=T==null?void 0:T.response)==null?void 0:W.url),L=r.action==="edit"?null:o("Add New Course");return e.jsx(jt,{...d,open:!0,title:L,width:a.sm?"378px":"100%",zIndex:1001,onClose:y,children:e.jsx(Se,{spinning:w,children:e.jsxs(C,{...h,layout:"vertical",children:[e.jsx(C.Item,{name:"images",valuePropName:"fileList",getValueFromEvent:Mt,style:{margin:0},rules:[{required:!0}],children:e.jsx(ar.Dragger,{name:"file",action:`${n}/media/upload`,maxCount:1,accept:".png,.jpg,.jpeg",className:x.uploadDragger,showUploadList:!1,children:e.jsxs(B,{vertical:!0,align:"center",justify:"center",style:{position:"relative",height:"100%"},children:[e.jsx(X,{shape:"square",style:{aspectRatio:1,objectFit:"contain",width:b?"100%":"48px",height:b?"100%":"48px",marginTop:b?void 0:"auto",transform:b?void 0:"translateY(50%)"},src:b||"/images/product-default-img.png",alt:"Product Image"}),e.jsx(R,{icon:e.jsx(gr,{onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),style:{marginTop:"auto",marginBottom:"16px",backgroundColor:u.colorBgContainer,...!!b&&{position:"absolute",bottom:0}},children:o("Course description")})]})})}),e.jsxs(B,{vertical:!0,children:[e.jsx(C.Item,{label:o("course name"),name:"name",className:x.formItem,rules:[{required:!0}],children:e.jsx($,{})}),e.jsx(C.Item,{label:o("Course description"),name:"description",className:x.formItem,rules:[{required:!0}],children:e.jsx($.TextArea,{rows:6})}),e.jsx(C.Item,{label:o("Course price"),name:"price",className:x.formItem,rules:[{required:!0}],children:e.jsx(S,{prefix:"$",style:{width:"150px"}})}),e.jsx(C.Item,{label:o("Course category"),name:["category","id"],className:x.formItem,rules:[{required:!0}],children:e.jsx(lr,{...t})}),e.jsx(C.Item,{label:o("Course Status"),name:"isActive",className:x.formItem,initialValue:!0,children:e.jsx(ut,{block:!0,size:"large",options:[{label:o("Active"),value:!0},{label:o("Completed"),value:!1}]})}),e.jsxs(B,{align:"center",justify:"space-between",style:{padding:"16px 16px 0px 16px"},children:[e.jsx(R,{onClick:y,children:"Cancel"}),e.jsx(dt,{...f,htmlType:"submit",type:"primary",icon:null,children:"Save"})]})]})]})})})},ro=()=>{lt(),xt();const{listUrl:r}=D();Ee();const s=O(),l=_();return e.jsx(ft,{action:"create",onMutationSuccess:()=>{s({to:`${r("courses")}`,query:{to:l},options:{keepQuery:!0},type:"replace"})}})},oo=()=>e.jsx(ft,{action:"edit"}),so=r=>{var J,te;const{listUrl:s}=D(),l=_(),i=Ee(),{data:o}=V(),n=O();E();const{token:a}=k.useToken(),x=ee.useBreakpoint(),{mutate:u,data:d,isLoading:h}=Ut(),[c,f]=N.useState(!1);N.useEffect(()=>{const A=localStorage.getItem("storedCode");(A=="undefined"||!A)&&localStorage.setItem("storedCode",JSON.stringify(d))},[d]);const w=!localStorage.getItem("storedCode")||localStorage.getItem("storedCode")=="undefined"?{code:"No Generated Code"}:JSON.parse(localStorage.getItem("storedCode")),t=async()=>{f(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition(async A=>{const re=A.coords.latitude,me=A.coords.longitude;try{u({resource:`generateCode/${o==null?void 0:o.id}/${i.id}/`,values:{latitude:re,longitude:me}},{onSuccess:()=>{f(!1)}})}catch(oe){console.log("Error creating data:",oe),f(!1)}},A=>{console.log("Error getting location:",A)}):console.log("Geolocation is not supported by this browser.")},{queryResult:y}=Ie({resource:`generateCode/${o==null?void 0:o.id}`,id:i.id}),m=((J=y.data)==null?void 0:J.data)??{},b=(m.courses??[])[(i==null?void 0:i.id)-1]??{id:"No Id",name:"No Course",code:"No Code",year:"No year",lecturer:"No Lecturer"},L=m.session??{id:"No Id"};N.useEffect(()=>()=>{},[L]);const W=((te=d==null?void 0:d.data)==null?void 0:te.code)??"No Generated Code";console.log(w.code);const U=()=>{if(r!=null&&r.onClose){r.onClose();return}n({to:`${s("courses")}`,query:{to:l},options:{keepQuery:!0},type:"replace"}),localStorage.setItem("storedCode","undefined")};return e.jsxs(jt,{open:!0,width:x.sm?"60%":"100%",zIndex:1001,onClose:U,children:[e.jsx(B,{vertical:!0,align:"left",justify:"center",style:{margin:"20px"},children:e.jsx(p.Title,{children:`${b.code} : ${b.name}`})}),e.jsxs(B,{vertical:!0,style:{backgroundColor:a.colorBgContainer,padding:"40px",margin:40,borderRadius:10},children:[e.jsxs(B,{gap:100,style:{width:"100%"},children:[e.jsx(p.Title,{level:5,children:"Session"}),e.jsx(p.Text,{type:"secondary",style:{fontSize:18},children:L.id})]}),e.jsx(Z,{style:{margin:0,padding:10}}),e.jsx(p.Text,{style:{color:"red",fontSize:16,fontStyle:"italic"},children:"Every session has time limit of 15 minutes"})]}),e.jsxs(Se,{spinning:h,children:[e.jsx(B,{align:"center",justify:"center",style:{padding:"16px 16px 16px 0",height:"100px"},children:e.jsx(dt,{style:{backgroundColor:"green",color:"white",fontSize:"20px",height:"50px"},htmlType:"submit",disabled:c,icon:c?e.jsx(Se,{tip:!0,style:{color:"white"}}):e.jsx(yr,{onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),onClick:t,children:c?"Generating...":"Generate Code"})}),e.jsxs(B,{vertical:!0,style:{backgroundColor:a.colorBgContainer,padding:"40px",margin:40,borderRadius:10},children:[e.jsx(B,{gap:100,style:{width:"100%"},children:e.jsx(p.Text,{type:"secondary",style:{fontSize:16,fontStyle:"italic"},children:"Generated code appears below"})}),e.jsx(Z,{style:{margin:10,padding:10}}),e.jsx(p.Text,{type:"secondary",style:{textAlign:"center",padding:"70px 0px",fontSize:50,fontStyle:"italic"},children:d==null?w.code:W})]})]})]})},no=()=>e.jsx(so,{}),io=G(({token:r})=>({card:{position:"relative",height:"100%",display:"flex",flexDirection:"column",":hover":{".viewButton":{display:"block !important"}}},viewButton:{position:"absolute",display:"none !important",width:"max-content !important",top:"50%",left:0,marginLeft:"50%",transform:"translate(-50%, -50%)",padding:"5px 12px 5px 12px",zIndex:1,backgroundColor:r.colorBgContainer}})),ao=()=>{var u;const{styles:r,cx:s}=io();k.useToken();const{data:l}=V();E();const i=O(),{pathname:o}=_(),{showUrl:n}=D(),{listProps:a}=nt({resource:`lecturerClasses/${l==null?void 0:l.id}`}),x=((u=a.dataSource)==null?void 0:u.all_classes_info)??[];return console.log(x),e.jsxs(e.Fragment,{children:[e.jsx(Z,{style:{margin:"16px 0px"}}),e.jsx(le,{...a,pagination:{...a.pagination,showTotal:d=>e.jsx(Ae,{total:d,entityName:"classes"})},dataSource:x,grid:{gutter:[16,16],column:4,xxl:4,xl:4,lg:3,md:2,sm:1,xs:1},renderItem:d=>e.jsx(le.Item,{style:{height:"100%"},children:e.jsx(z,{hoverable:!0,bordered:!1,className:r.card,styles:{body:{padding:"50px 20px"},cover:{position:"relative"},actions:{marginTop:"auto"}},onClick:()=>i({to:`${n("report",`${d.department.id}/${d.courses[0].course.id}`)}`,query:{to:o},options:{keepQuery:!0},type:"replace"}),cover:e.jsx(e.Fragment,{children:e.jsx(Be,{onClick:()=>i({to:`${n("report",d.department.id)}`,query:{to:o},options:{keepQuery:!0},type:"replace"}),className:s(r.viewButton,"viewButton"),icon:e.jsx(xe,{onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),children:"View"})}),children:e.jsx(z.Meta,{title:e.jsx(B,{children:e.jsx(p.Title,{level:5,ellipsis:{rows:1,tooltip:d.department.dname},children:d.department.dname})}),description:`${d.courses[0].course.code} : ${d.courses[0].course.name}`})},`data-${d.department.id}`)})})]})},lo=({children:r})=>e.jsxs(pe,{breadcrumb:!1,children:[e.jsx(ao,{}),r]}),co=({children:r})=>{var c,f,w;O(),_(),D();const s=Ee(),l=E(),{token:i}=k.useToken(),{data:o}=V(),{tableProps:n,filters:a}=ot({resource:`studentsTable/${o==null?void 0:o.id}/${s.id}/`,filters:{initial:[{field:"classes",operator:"contains",value:5}]},syncWithLocation:!0}),x=((c=n.dataSource)==null?void 0:c.student_info)??[],u=((w=(f=n.dataSource)==null?void 0:f.student_info[0])==null?void 0:w.student_course.course)??"",{isLoading:d,triggerExport:h}=Qt({filters:a,mapData:t=>({id:t.id,fullName:t.fullName,gsm:t.gsm,isActive:t.isActive,createdAt:t.createdAt})});return e.jsxs(pe,{breadcrumb:!1,headerProps:{extra:e.jsx(Gt,{onClick:h,loading:d})},children:[e.jsx(p.Title,{style:{fontSize:30,marginBlock:30},children:`${u.code==null?"course code":u.code} : ${u.name==null?"course":u.name}`}),e.jsxs(g,{...n,dataSource:x,rowKey:"student.id",scroll:{x:!0},pagination:{...n.pagination,showTotal:t=>e.jsx(Ae,{total:t,entityName:"students"})},children:[e.jsx(g.Column,{dataIndex:"student",title:"Reference Number",render:t=>e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:t.reference}),filterIcon:t=>e.jsx(j,{style:{color:t?i.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("orderNumber",a,"eq"),filterDropdown:t=>e.jsx(v,{...t,children:e.jsx(S,{addonBefore:"#",style:{width:"100%"},placeholder:l("id")})})},"reference"),e.jsx(g.Column,{dataIndex:"student",title:"Index Number",render:t=>e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:t.index}),filterIcon:t=>e.jsx(j,{style:{color:t?i.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("orderNumber",a,"eq"),filterDropdown:t=>e.jsx(v,{...t,children:e.jsx(S,{addonBefore:"#",style:{width:"100%"},placeholder:l("id")})})},"index"),e.jsx(g.Column,{dataIndex:"student",title:"Full Name",render:t=>e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:t.name}),filterIcon:t=>e.jsx(j,{style:{color:t?i.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("orderNumber",a,"eq"),filterDropdown:t=>e.jsx(v,{...t,children:e.jsx(S,{addonBefore:"#",style:{width:"100%"},placeholder:l("id")})})},"name"),e.jsx(g.Column,{dataIndex:"student",title:"Strikes",render:t=>e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:t.Total_strike}),filterIcon:t=>e.jsx(j,{style:{color:t?i.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("orderNumber",a,"eq"),filterDropdown:t=>e.jsx(v,{...t,children:e.jsx(S,{addonBefore:"#",style:{width:"100%"},placeholder:l("id")})})},"strikes"),e.jsx(g.Column,{dataIndex:"student_sessions",title:"Week 1",render:t=>e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:t[0].attended==!0?1:t[0].attended==!1?0:"N/A"}),filterIcon:t=>e.jsx(j,{style:{color:t?i.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("orderNumber",a,"eq"),filterDropdown:t=>e.jsx(v,{...t,children:e.jsx(S,{addonBefore:"#",style:{width:"100%"},placeholder:l("id")})})},"week 1"),e.jsx(g.Column,{dataIndex:"student_sessions",title:"Week 2",render:t=>e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:t[1].attended==!0?1:t[1].attended==!1?0:"N/A"}),filterIcon:t=>e.jsx(j,{style:{color:t?i.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("orderNumber",a,"eq"),filterDropdown:t=>e.jsx(v,{...t,children:e.jsx(S,{addonBefore:"#",style:{width:"100%"},placeholder:l("id")})})},"week2"),e.jsx(g.Column,{dataIndex:"student_sessions",title:"Week 3",render:t=>e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:t[2].attended==!0?1:t[2].attended==!1?0:"N/A"}),filterIcon:t=>e.jsx(j,{style:{color:t?i.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("orderNumber",a,"eq"),filterDropdown:t=>e.jsx(v,{...t,children:e.jsx(S,{addonBefore:"#",style:{width:"100%"},placeholder:l("id")})})},"week3"),e.jsx(g.Column,{dataIndex:"student_sessions",title:"Week 4",render:t=>e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:t[3].attended==!0?1:t[3].attended==!1?0:"N/A"}),filterIcon:t=>e.jsx(j,{style:{color:t?i.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("orderNumber",a,"eq"),filterDropdown:t=>e.jsx(v,{...t,children:e.jsx(S,{addonBefore:"#",style:{width:"100%"},placeholder:l("id")})})},"week4"),e.jsx(g.Column,{dataIndex:"student_sessions",title:"Week 5",render:t=>e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:t[4].attended==!0?1:t[4].attended==!1?0:"N/A"}),filterIcon:t=>e.jsx(j,{style:{color:t?i.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("orderNumber",a,"eq"),filterDropdown:t=>e.jsx(v,{...t,children:e.jsx(S,{addonBefore:"#",style:{width:"100%"},placeholder:l("id")})})},"week 5"),e.jsx(g.Column,{dataIndex:"student_sessions",title:"Week 6",render:t=>e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:t[5].attended==!0?1:t[5].attended==!1?0:"N/A"}),filterIcon:t=>e.jsx(j,{style:{color:t?i.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("orderNumber",a,"eq"),filterDropdown:t=>e.jsx(v,{...t,children:e.jsx(S,{addonBefore:"#",style:{width:"100%"},placeholder:l("id")})})},"week6"),e.jsx(g.Column,{dataIndex:"student_sessions",title:"Week 7",render:t=>e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:t[6].attended==!0?1:t[6].attended==!1?0:"N/A"}),filterIcon:t=>e.jsx(j,{style:{color:t?i.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("orderNumber",a,"eq"),filterDropdown:t=>e.jsx(v,{...t,children:e.jsx(S,{addonBefore:"#",style:{width:"100%"},placeholder:l("id")})})},"week7"),e.jsx(g.Column,{dataIndex:"student_sessions",title:"Week 8",render:t=>e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:t[7].attended==!0?1:t[7].attended==!1?0:"N/A"}),filterIcon:t=>e.jsx(j,{style:{color:t?i.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("orderNumber",a,"eq"),filterDropdown:t=>e.jsx(v,{...t,children:e.jsx(S,{addonBefore:"#",style:{width:"100%"},placeholder:l("id")})})},"week8"),e.jsx(g.Column,{dataIndex:"student_sessions",title:"Week 9",render:t=>e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:t[8].attended==!0?1:t[8].attended==!1?0:"N/A"}),filterIcon:t=>e.jsx(j,{style:{color:t?i.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("orderNumber",a,"eq"),filterDropdown:t=>e.jsx(v,{...t,children:e.jsx(S,{addonBefore:"#",style:{width:"100%"},placeholder:l("id")})})},"week9"),e.jsx(g.Column,{dataIndex:"student_sessions",title:"Week 10",render:t=>e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:t[9].attended==!0?1:t[9].attended==!1?0:"N/A"}),filterIcon:t=>e.jsx(j,{style:{color:t?i.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("orderNumber",a,"eq"),filterDropdown:t=>e.jsx(v,{...t,children:e.jsx(S,{addonBefore:"#",style:{width:"100%"},placeholder:l("id")})})},"week10"),e.jsx(g.Column,{dataIndex:"student_sessions",title:"Week 11",render:t=>e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:t[10].attended==!0?1:t[10].attended==!1?0:"N/A"}),filterIcon:t=>e.jsx(j,{style:{color:t?i.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("orderNumber",a,"eq"),filterDropdown:t=>e.jsx(v,{...t,children:e.jsx(S,{addonBefore:"#",style:{width:"100%"},placeholder:l("id")})})},"week11"),e.jsx(g.Column,{dataIndex:"student_sessions",title:"Week 12",render:t=>e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:t[11].attended==!0?1:t[11].attended==!1?0:"N/A"}),filterIcon:t=>e.jsx(j,{style:{color:t?i.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("orderNumber",a,"eq"),filterDropdown:t=>e.jsx(v,{...t,children:e.jsx(S,{addonBefore:"#",style:{width:"100%"},placeholder:l("id")})})},"week12"),e.jsx(g.Column,{dataIndex:"student_sessions",title:"Week 13",render:t=>e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:t[12].attended==!0?1:t[12].attended==!1?0:"N/A"}),filterIcon:t=>e.jsx(j,{style:{color:t?i.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("orderNumber",a,"eq"),filterDropdown:t=>e.jsx(v,{...t,children:e.jsx(S,{addonBefore:"#",style:{width:"100%"},placeholder:l("id")})})},"week13"),e.jsx(g.Column,{dataIndex:"student_sessions",title:"Week 14",render:t=>e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:t[13].attended==!0?1:t[13].attended==!1?0:"N/A"}),filterIcon:t=>e.jsx(j,{style:{color:t?i.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("orderNumber",a,"eq"),filterDropdown:t=>e.jsx(v,{...t,children:e.jsx(S,{addonBefore:"#",style:{width:"100%"},placeholder:l("id")})})},"week14"),e.jsx(g.Column,{dataIndex:"student_sessions",title:"Week 15",render:t=>e.jsx(p.Text,{style:{whiteSpace:"nowrap"},children:t[14].attended==!0?1:t[14].attended==!1?0:"N/A"}),filterIcon:t=>e.jsx(j,{style:{color:t?i.colorPrimary:void 0},onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),defaultFilteredValue:P("orderNumber",a,"eq"),filterDropdown:t=>e.jsx(v,{...t,children:e.jsx(S,{addonBefore:"#",style:{width:"100%"},placeholder:l("id")})})},"week15")]}),r]})},uo=()=>{const s=sr("https://knust-ams.up.railway.app/api");return e.jsx(vr,{children:e.jsx(Rr,{theme:{token:{colorPrimary:"#A2121C"}},children:e.jsx(Jt,{children:e.jsxs(Kt,{routerProvider:Yt,dataProvider:s,authProvider:zr,options:{syncWithLocation:!0,warnWhenUnsavedChanges:!0},notificationProvider:Xt,resources:[{name:"dashboard",list:"/",meta:{label:"Dashboard",icon:e.jsx(pt,{onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0})}},{name:"courses",list:"/courses",create:"/courses/new",edit:"/courses/:id/edit",show:"/courses/:id",meta:{icon:e.jsx(jr,{onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0})}},{name:"report",list:"/report",show:"/report/:id",meta:{icon:e.jsx(fr,{onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0})}}],children:[e.jsxs(Tr,{children:[e.jsxs(I,{element:e.jsx(fe,{fallback:e.jsx(Zt,{to:"/lecturer-login"}),children:e.jsx(Ze,{Header:et,Title:tt,children:e.jsx("div",{style:{maxWidth:"1200px",marginLeft:"auto",marginRight:"auto"},children:e.jsx(ie,{})})})},"authenticated-routes"),children:[e.jsx(I,{index:!0,element:e.jsx(Kr,{})}),e.jsxs(I,{path:"/courses",element:e.jsx(eo,{children:e.jsx(ie,{})}),children:[e.jsx(I,{path:"new",element:e.jsx(ro,{})}),e.jsx(I,{path:":id",element:e.jsx(no,{})}),e.jsx(I,{path:":id/edit",element:e.jsx(oo,{})})]}),e.jsxs(I,{path:"/report",children:[e.jsx(I,{index:!0,element:e.jsx(lo,{})}),e.jsx(I,{path:":id",element:e.jsx(co,{})})]})]}),e.jsxs(I,{element:e.jsx(fe,{fallback:e.jsx(ie,{}),children:e.jsx(er,{resource:"dashboard"})},"auth-pages"),children:[e.jsx(I,{path:"/lecturer-login",element:e.jsx(Pe,{title:e.jsx("img",{src:ae,alt:"logo"}),type:"login"})}),e.jsx(I,{path:"/forgot-password",element:e.jsx(Pe,{title:e.jsx("img",{src:ae,alt:"logo"}),type:"forgotPassword"})}),e.jsx(I,{path:"/update-password",element:e.jsx(Pe,{title:e.jsx("img",{src:ae,alt:"logo"}),type:"updatePassword"})})]}),e.jsx(I,{element:e.jsx(fe,{children:e.jsx(Ze,{Header:et,Title:tt,children:e.jsx(ie,{})})},"catch-all"),children:e.jsx(I,{path:"*",element:e.jsx(tr,{})})})]}),e.jsx(rr,{}),e.jsx(or,{})]})})})})};Ir.use(Br).use(Nr).use(Lr).init({supportedLngs:["en","de"],backend:{loadPath:"/locales/{{lng}}.json"},fallbackLng:["en","de"]});Ne.extend(Cr);Ne.extend(wr);Ne.extend(br);const po=document.getElementById("root"),xo=Tt(po);xo.render(e.jsx(Je.StrictMode,{children:e.jsx(Je.Suspense,{fallback:null,children:e.jsx(uo,{})})}));
