import{u as F}from"./unist-util-visit-parents-Cg8WeLrx.js";import{c as j}from"./unist-util-is-DwpaFvQX.js";import{e as k}from"./escape-string-regexp-BdPwSnSr.js";var z=I,A=F,O=j,P=k,U=[].splice;function I(e,r,a,i){var o,c;return typeof r=="string"||r&&typeof r.exec=="function"?c=[[r,a]]:(c=r,i=a),o=i||{},b(e,o,x(S(c))),e;function x(f){var p=f[0];return s;function s(t,y){var g=p[0],R=p[1],n=[],h=0,d=y.children.indexOf(t),l,u,w,v;for(g.lastIndex=0,u=g.exec(t.value);u&&(l=u.index,v=R.apply(null,[].concat(u,{index:u.index,input:u.input})),v!==!1&&(h!==l&&n.push({type:"text",value:t.value.slice(h,l)}),typeof v=="string"&&v.length>0&&(v={type:"text",value:v}),v&&(n=[].concat(n,v)),h=l+u[0].length),!!g.global);)u=g.exec(t.value);if(l===void 0?(n=[t],d--):(h<t.value.length&&n.push({type:"text",value:t.value.slice(h)}),n.unshift(d,1),U.apply(y.children,n)),f.length>1)for(w=x(f.slice(1)),l=-1;++l<n.length;)t=n[l],t.type==="text"?w(t,y):b(t,o,w);return d+n.length+1}}}function b(e,r,a){var i=O(r.ignore||[]),o=[];return A(e,"text",c),o;function c(x,f){for(var p=-1,s,t;++p<f.length;){if(s=f[p],i(s,t?t.children.indexOf(s):void 0,t))return;t=s}return a(x,t)}}function S(e){var r=[],a,i;if(typeof e!="object")throw new Error("Expected array or object as schema");if("length"in e)for(i=-1;++i<e.length;)r.push([m(e[i][0]),E(e[i][1])]);else for(a in e)r.push([m(a),E(e[a])]);return r}function m(e){return typeof e=="string"?new RegExp(P(e),"g"):e}function E(e){return typeof e=="function"?e:r;function r(){return e}}export{z as m};
